[2023-05-04 20:37:20 +0800] [141494] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f7679075cf0>
  on_reload: <function OnReload.on_reload at 0x7f7679075e10>
  when_ready: <function WhenReady.when_ready at 0x7f7679075f30>
  pre_fork: <function Prefork.pre_fork at 0x7f7679076050>
  post_fork: <function Postfork.post_fork at 0x7f7679076170>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f7679076290>
  worker_int: <function WorkerInt.worker_int at 0x7f76790763b0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f76790764d0>
  pre_exec: <function PreExec.pre_exec at 0x7f76790765f0>
  pre_request: <function PreRequest.pre_request at 0x7f7679076710>
  post_request: <function PostRequest.post_request at 0x7f76790767a0>
  child_exit: <function ChildExit.child_exit at 0x7f76790768c0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f76790769e0>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f7679076b00>
  on_exit: <function OnExit.on_exit at 0x7f7679076c20>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-04 20:37:20 +0800] [141494] [INFO] Starting gunicorn 20.1.0
[2023-05-04 20:37:20 +0800] [141494] [DEBUG] Arbiter booted
[2023-05-04 20:37:20 +0800] [141494] [INFO] Listening at: http://0.0.0.0:8000 (141494)
[2023-05-04 20:37:20 +0800] [141494] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-04 20:37:20 +0800] [141495] [INFO] Booting worker with pid: 141495
[2023-05-04 20:37:20 +0800] [141496] [INFO] Booting worker with pid: 141496
[2023-05-04 20:37:20 +0800] [141494] [DEBUG] 2 workers
[2023-05-04 20:37:21 +0800] [141496] [INFO] Started server process [141496]
[2023-05-04 20:37:21 +0800] [141496] [INFO] Waiting for application startup.
[2023-05-04 20:37:21 +0800] [141496] [INFO] Application startup complete.
[2023-05-04 20:37:21 +0800] [141495] [INFO] Started server process [141495]
[2023-05-04 20:37:21 +0800] [141495] [INFO] Waiting for application startup.
[2023-05-04 20:37:21 +0800] [141495] [INFO] Application startup complete.
[2023-05-04 20:38:47 +0800] [141495] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 39, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/crud.py", line 104, in get_diff_peaks
    order_attr = get_order_attr("diff_peaks", req.seq)
  File "/data/wshao/ATAC_db/crud.py", line 35, in get_order_attr
    seq_key = eval(f'{model_name}.{key[:-4]}')  # 去除末尾_seq
  File "<string>", line 1, in <module>
AttributeError: type object 'DiffPeaks' has no attribute 'dis_tss'
[2023-05-04 20:40:36 +0800] [141495] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 39, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/crud.py", line 104, in get_diff_peaks
    order_attr = get_order_attr("diff_peaks", req.seq)
  File "/data/wshao/ATAC_db/crud.py", line 35, in get_order_attr
    seq_key = eval(f'{model_name}.{key[:-4]}')  # 去除末尾_seq
  File "<string>", line 1, in <module>
AttributeError: type object 'DiffPeaks' has no attribute 'dis_tss'
[2023-05-04 20:40:48 +0800] [142414] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7faa57e49cf0>
  on_reload: <function OnReload.on_reload at 0x7faa57e49e10>
  when_ready: <function WhenReady.when_ready at 0x7faa57e49f30>
  pre_fork: <function Prefork.pre_fork at 0x7faa57e4a050>
  post_fork: <function Postfork.post_fork at 0x7faa57e4a170>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7faa57e4a290>
  worker_int: <function WorkerInt.worker_int at 0x7faa57e4a3b0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7faa57e4a4d0>
  pre_exec: <function PreExec.pre_exec at 0x7faa57e4a5f0>
  pre_request: <function PreRequest.pre_request at 0x7faa57e4a710>
  post_request: <function PostRequest.post_request at 0x7faa57e4a7a0>
  child_exit: <function ChildExit.child_exit at 0x7faa57e4a8c0>
  worker_exit: <function WorkerExit.worker_exit at 0x7faa57e4a9e0>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7faa57e4ab00>
  on_exit: <function OnExit.on_exit at 0x7faa57e4ac20>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-04 20:40:48 +0800] [142414] [INFO] Starting gunicorn 20.1.0
[2023-05-04 20:40:48 +0800] [142414] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-04 20:40:48 +0800] [142414] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-04 20:40:48 +0800] [142414] [ERROR] Retrying in 1 second.
[2023-05-04 20:40:49 +0800] [142414] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-04 20:40:49 +0800] [142414] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-04 20:40:49 +0800] [142414] [ERROR] Retrying in 1 second.
[2023-05-04 20:40:50 +0800] [142414] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-04 20:40:50 +0800] [142414] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-04 20:40:50 +0800] [142414] [ERROR] Retrying in 1 second.
[2023-05-04 20:40:51 +0800] [142414] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-04 20:40:51 +0800] [142414] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-04 20:40:51 +0800] [142414] [ERROR] Retrying in 1 second.
[2023-05-04 20:40:52 +0800] [142414] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-04 20:40:52 +0800] [142414] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-04 20:40:52 +0800] [142414] [ERROR] Retrying in 1 second.
[2023-05-04 20:40:53 +0800] [142414] [ERROR] Can't connect to ('0.0.0.0', 8000)
[2023-05-04 20:53:47 +0800] [145809] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f77e70cdcf0>
  on_reload: <function OnReload.on_reload at 0x7f77e70cde10>
  when_ready: <function WhenReady.when_ready at 0x7f77e70cdf30>
  pre_fork: <function Prefork.pre_fork at 0x7f77e70ce050>
  post_fork: <function Postfork.post_fork at 0x7f77e70ce170>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f77e70ce290>
  worker_int: <function WorkerInt.worker_int at 0x7f77e70ce3b0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f77e70ce4d0>
  pre_exec: <function PreExec.pre_exec at 0x7f77e70ce5f0>
  pre_request: <function PreRequest.pre_request at 0x7f77e70ce710>
  post_request: <function PostRequest.post_request at 0x7f77e70ce7a0>
  child_exit: <function ChildExit.child_exit at 0x7f77e70ce8c0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f77e70ce9e0>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f77e70ceb00>
  on_exit: <function OnExit.on_exit at 0x7f77e70cec20>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-04 20:53:47 +0800] [145809] [INFO] Starting gunicorn 20.1.0
[2023-05-04 20:53:47 +0800] [145809] [DEBUG] Arbiter booted
[2023-05-04 20:53:47 +0800] [145809] [INFO] Listening at: http://0.0.0.0:8000 (145809)
[2023-05-04 20:53:47 +0800] [145809] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-04 20:53:47 +0800] [145810] [INFO] Booting worker with pid: 145810
[2023-05-04 20:53:47 +0800] [145811] [INFO] Booting worker with pid: 145811
[2023-05-04 20:53:47 +0800] [145809] [DEBUG] 2 workers
[2023-05-04 20:53:48 +0800] [145810] [INFO] Started server process [145810]
[2023-05-04 20:53:48 +0800] [145810] [INFO] Waiting for application startup.
[2023-05-04 20:53:48 +0800] [145810] [INFO] Application startup complete.
[2023-05-04 20:53:48 +0800] [145811] [INFO] Started server process [145811]
[2023-05-04 20:53:48 +0800] [145811] [INFO] Waiting for application startup.
[2023-05-04 20:53:48 +0800] [145811] [INFO] Application startup complete.
[2023-05-04 21:01:25 +0800] [145810] [INFO] Worker reloading: /data/wshao/ATAC_db/crud.py modified
[2023-05-04 21:01:25 +0800] [145811] [INFO] Worker reloading: /data/wshao/ATAC_db/crud.py modified
[2023-05-04 21:24:11 +0800] [145809] [INFO] Handling signal: hup
[2023-05-04 21:24:11 +0800] [145809] [INFO] Hang up: Master
[2023-05-04 21:24:11 +0800] [145809] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f77e70cdcf0>
  on_reload: <function OnReload.on_reload at 0x7f77e70cde10>
  when_ready: <function WhenReady.when_ready at 0x7f77e70cdf30>
  pre_fork: <function Prefork.pre_fork at 0x7f77e70ce050>
  post_fork: <function Postfork.post_fork at 0x7f77e70ce170>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f77e70ce290>
  worker_int: <function WorkerInt.worker_int at 0x7f77e70ce3b0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f77e70ce4d0>
  pre_exec: <function PreExec.pre_exec at 0x7f77e70ce5f0>
  pre_request: <function PreRequest.pre_request at 0x7f77e70ce710>
  post_request: <function PostRequest.post_request at 0x7f77e70ce7a0>
  child_exit: <function ChildExit.child_exit at 0x7f77e70ce8c0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f77e70ce9e0>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f77e70ceb00>
  on_exit: <function OnExit.on_exit at 0x7f77e70cec20>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-04 21:24:11 +0800] [153497] [INFO] Booting worker with pid: 153497
[2023-05-04 21:24:11 +0800] [153498] [INFO] Booting worker with pid: 153498
[2023-05-04 21:24:11 +0800] [145810] [INFO] Shutting down
[2023-05-04 21:24:11 +0800] [145810] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-04 21:24:11 +0800] [145811] [INFO] Shutting down
[2023-05-04 21:24:11 +0800] [145811] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-04 21:24:11 +0800] [145810] [INFO] Waiting for application shutdown.
[2023-05-04 21:24:11 +0800] [145810] [INFO] Application shutdown complete.
[2023-05-04 21:24:11 +0800] [145810] [INFO] Finished server process [145810]
[2023-05-04 21:24:12 +0800] [145810] [INFO] Worker exiting (pid: 145810)
[2023-05-04 21:24:12 +0800] [145811] [INFO] Waiting for application shutdown.
[2023-05-04 21:24:12 +0800] [145811] [INFO] Application shutdown complete.
[2023-05-04 21:24:12 +0800] [145811] [INFO] Finished server process [145811]
[2023-05-04 21:24:12 +0800] [145811] [INFO] Worker exiting (pid: 145811)
[2023-05-04 21:24:12 +0800] [145809] [WARNING] Worker with pid 145811 was terminated due to signal 15
[2023-05-04 21:24:13 +0800] [153497] [INFO] Started server process [153497]
[2023-05-04 21:24:13 +0800] [153497] [INFO] Waiting for application startup.
[2023-05-04 21:24:13 +0800] [153497] [INFO] Application startup complete.
[2023-05-04 21:24:13 +0800] [153498] [INFO] Started server process [153498]
[2023-05-04 21:24:13 +0800] [153498] [INFO] Waiting for application startup.
[2023-05-04 21:24:13 +0800] [153498] [INFO] Application startup complete.
[2023-05-04 23:08:07 +0800] [153498] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 38, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/schemas.py", line 64, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-05-04 23:45:09 +0800] [153497] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 38, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/schemas.py", line 64, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-05-05 10:55:31 +0800] [153498] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 37, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/crud.py", line 86, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-05 10:58:19 +0800] [153497] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 37, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/crud.py", line 86, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 5, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-05 11:00:22 +0800] [153498] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 38, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/schemas.py", line 64, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-05-05 11:00:22 +0800] [153498] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 38, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/schemas.py", line 64, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-05-05 11:16:46 +0800] [153498] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/main.py", line 38, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/schemas.py", line 64, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-05-05 12:12:10 +0800] [145809] [INFO] Handling signal: hup
[2023-05-05 12:12:10 +0800] [145809] [INFO] Hang up: Master
[2023-05-05 12:12:10 +0800] [145809] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f77e70cdcf0>
  on_reload: <function OnReload.on_reload at 0x7f77e70cde10>
  when_ready: <function WhenReady.when_ready at 0x7f77e70cdf30>
  pre_fork: <function Prefork.pre_fork at 0x7f77e70ce050>
  post_fork: <function Postfork.post_fork at 0x7f77e70ce170>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f77e70ce290>
  worker_int: <function WorkerInt.worker_int at 0x7f77e70ce3b0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f77e70ce4d0>
  pre_exec: <function PreExec.pre_exec at 0x7f77e70ce5f0>
  pre_request: <function PreRequest.pre_request at 0x7f77e70ce710>
  post_request: <function PostRequest.post_request at 0x7f77e70ce7a0>
  child_exit: <function ChildExit.child_exit at 0x7f77e70ce8c0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f77e70ce9e0>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f77e70ceb00>
  on_exit: <function OnExit.on_exit at 0x7f77e70cec20>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 12:12:10 +0800] [372708] [INFO] Booting worker with pid: 372708
[2023-05-05 12:12:10 +0800] [372709] [INFO] Booting worker with pid: 372709
[2023-05-05 12:12:10 +0800] [153497] [INFO] Shutting down
[2023-05-05 12:12:10 +0800] [153498] [INFO] Shutting down
[2023-05-05 12:12:10 +0800] [153497] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 12:12:10 +0800] [153498] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 12:12:10 +0800] [153498] [INFO] Waiting for application shutdown.
[2023-05-05 12:12:10 +0800] [153497] [INFO] Waiting for application shutdown.
[2023-05-05 12:12:10 +0800] [153497] [INFO] Application shutdown complete.
[2023-05-05 12:12:10 +0800] [153498] [INFO] Application shutdown complete.
[2023-05-05 12:12:10 +0800] [153498] [INFO] Finished server process [153498]
[2023-05-05 12:12:10 +0800] [153497] [INFO] Finished server process [153497]
[2023-05-05 12:12:10 +0800] [153498] [INFO] Worker exiting (pid: 153498)
[2023-05-05 12:12:10 +0800] [153497] [INFO] Worker exiting (pid: 153497)
[2023-05-05 12:12:11 +0800] [145809] [WARNING] Worker with pid 153498 was terminated due to signal 15
[2023-05-05 12:12:11 +0800] [372709] [INFO] Started server process [372709]
[2023-05-05 12:12:11 +0800] [372708] [INFO] Started server process [372708]
[2023-05-05 12:12:11 +0800] [372709] [INFO] Waiting for application startup.
[2023-05-05 12:12:11 +0800] [372708] [INFO] Waiting for application startup.
[2023-05-05 12:12:11 +0800] [372708] [INFO] Application startup complete.
[2023-05-05 12:12:11 +0800] [372709] [INFO] Application startup complete.
[2023-05-05 12:12:34 +0800] [372708] [INFO] Worker reloading: /data/wshao/ATAC_db/main.py modified
[2023-05-05 12:12:34 +0800] [372709] [INFO] Worker reloading: /data/wshao/ATAC_db/main.py modified
[2023-05-05 12:12:49 +0800] [145809] [INFO] Handling signal: hup
[2023-05-05 12:12:49 +0800] [145809] [INFO] Hang up: Master
[2023-05-05 12:12:49 +0800] [145809] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f77e70cdcf0>
  on_reload: <function OnReload.on_reload at 0x7f77e70cde10>
  when_ready: <function WhenReady.when_ready at 0x7f77e70cdf30>
  pre_fork: <function Prefork.pre_fork at 0x7f77e70ce050>
  post_fork: <function Postfork.post_fork at 0x7f77e70ce170>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f77e70ce290>
  worker_int: <function WorkerInt.worker_int at 0x7f77e70ce3b0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f77e70ce4d0>
  pre_exec: <function PreExec.pre_exec at 0x7f77e70ce5f0>
  pre_request: <function PreRequest.pre_request at 0x7f77e70ce710>
  post_request: <function PostRequest.post_request at 0x7f77e70ce7a0>
  child_exit: <function ChildExit.child_exit at 0x7f77e70ce8c0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f77e70ce9e0>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f77e70ceb00>
  on_exit: <function OnExit.on_exit at 0x7f77e70cec20>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 12:12:49 +0800] [372868] [INFO] Booting worker with pid: 372868
[2023-05-05 12:12:49 +0800] [372869] [INFO] Booting worker with pid: 372869
[2023-05-05 12:12:49 +0800] [372709] [INFO] Shutting down
[2023-05-05 12:12:49 +0800] [372709] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 12:12:49 +0800] [372708] [INFO] Shutting down
[2023-05-05 12:12:49 +0800] [372708] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 12:12:49 +0800] [372709] [INFO] Waiting for application shutdown.
[2023-05-05 12:12:49 +0800] [372709] [INFO] Application shutdown complete.
[2023-05-05 12:12:49 +0800] [372709] [INFO] Finished server process [372709]
[2023-05-05 12:12:49 +0800] [372708] [INFO] Waiting for application shutdown.
[2023-05-05 12:12:49 +0800] [372708] [INFO] Application shutdown complete.
[2023-05-05 12:12:49 +0800] [372708] [INFO] Finished server process [372708]
[2023-05-05 12:12:49 +0800] [372708] [INFO] Worker exiting (pid: 372708)
[2023-05-05 12:12:49 +0800] [372709] [INFO] Worker exiting (pid: 372709)
[2023-05-05 12:12:49 +0800] [145809] [WARNING] Worker with pid 372708 was terminated due to signal 15
[2023-05-05 12:12:50 +0800] [372868] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/main.py", line 12, in <module>
    import pandas
ModuleNotFoundError: No module named 'pandas'
[2023-05-05 12:12:50 +0800] [372868] [INFO] Worker exiting (pid: 372868)
[2023-05-05 12:12:50 +0800] [372869] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/main.py", line 12, in <module>
    import pandas
ModuleNotFoundError: No module named 'pandas'
[2023-05-05 12:12:50 +0800] [372869] [INFO] Worker exiting (pid: 372869)
[2023-05-05 12:12:50 +0800] [145809] [WARNING] Worker with pid 372869 was terminated due to signal 15
[2023-05-05 12:12:50 +0800] [145809] [INFO] Shutting down: Master
[2023-05-05 12:12:50 +0800] [145809] [INFO] Reason: Worker failed to boot.
[2023-05-05 12:13:38 +0800] [373102] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7fc8b1bc5cf0>
  on_reload: <function OnReload.on_reload at 0x7fc8b1bc5e10>
  when_ready: <function WhenReady.when_ready at 0x7fc8b1bc5f30>
  pre_fork: <function Prefork.pre_fork at 0x7fc8b1bc6050>
  post_fork: <function Postfork.post_fork at 0x7fc8b1bc6170>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7fc8b1bc6290>
  worker_int: <function WorkerInt.worker_int at 0x7fc8b1bc63b0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7fc8b1bc64d0>
  pre_exec: <function PreExec.pre_exec at 0x7fc8b1bc65f0>
  pre_request: <function PreRequest.pre_request at 0x7fc8b1bc6710>
  post_request: <function PostRequest.post_request at 0x7fc8b1bc67a0>
  child_exit: <function ChildExit.child_exit at 0x7fc8b1bc68c0>
  worker_exit: <function WorkerExit.worker_exit at 0x7fc8b1bc69e0>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7fc8b1bc6b00>
  on_exit: <function OnExit.on_exit at 0x7fc8b1bc6c20>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 12:13:38 +0800] [373102] [INFO] Starting gunicorn 20.1.0
[2023-05-05 12:13:38 +0800] [373102] [DEBUG] Arbiter booted
[2023-05-05 12:13:38 +0800] [373102] [INFO] Listening at: http://0.0.0.0:8000 (373102)
[2023-05-05 12:13:38 +0800] [373102] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-05 12:13:38 +0800] [373104] [INFO] Booting worker with pid: 373104
[2023-05-05 12:13:38 +0800] [373105] [INFO] Booting worker with pid: 373105
[2023-05-05 12:13:38 +0800] [373102] [DEBUG] 2 workers
[2023-05-05 12:13:39 +0800] [373104] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/main.py", line 12, in <module>
    import pandas
ModuleNotFoundError: No module named 'pandas'
[2023-05-05 12:13:39 +0800] [373104] [INFO] Worker exiting (pid: 373104)
[2023-05-05 12:13:39 +0800] [373105] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/main.py", line 12, in <module>
    import pandas
ModuleNotFoundError: No module named 'pandas'
[2023-05-05 12:13:39 +0800] [373105] [INFO] Worker exiting (pid: 373105)
[2023-05-05 12:13:39 +0800] [373102] [WARNING] Worker with pid 373105 was terminated due to signal 15
[2023-05-05 12:13:39 +0800] [373102] [INFO] Shutting down: Master
[2023-05-05 12:13:39 +0800] [373102] [INFO] Reason: Worker failed to boot.
[2023-05-05 12:15:28 +0800] [373575] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7fea01709f30>
  on_reload: <function OnReload.on_reload at 0x7fea0170a050>
  when_ready: <function WhenReady.when_ready at 0x7fea0170a170>
  pre_fork: <function Prefork.pre_fork at 0x7fea0170a290>
  post_fork: <function Postfork.post_fork at 0x7fea0170a3b0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7fea0170a4d0>
  worker_int: <function WorkerInt.worker_int at 0x7fea0170a5f0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7fea0170a710>
  pre_exec: <function PreExec.pre_exec at 0x7fea0170a830>
  pre_request: <function PreRequest.pre_request at 0x7fea0170a950>
  post_request: <function PostRequest.post_request at 0x7fea0170a9e0>
  child_exit: <function ChildExit.child_exit at 0x7fea0170ab00>
  worker_exit: <function WorkerExit.worker_exit at 0x7fea0170ac20>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7fea0170ad40>
  on_exit: <function OnExit.on_exit at 0x7fea0170ae60>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 12:15:28 +0800] [373575] [INFO] Starting gunicorn 20.1.0
[2023-05-05 12:15:28 +0800] [373575] [DEBUG] Arbiter booted
[2023-05-05 12:15:28 +0800] [373575] [INFO] Listening at: http://0.0.0.0:8000 (373575)
[2023-05-05 12:15:28 +0800] [373575] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-05 12:15:28 +0800] [373576] [INFO] Booting worker with pid: 373576
[2023-05-05 12:15:28 +0800] [373577] [INFO] Booting worker with pid: 373577
[2023-05-05 12:15:28 +0800] [373575] [DEBUG] 2 workers
[2023-05-05 12:15:29 +0800] [373576] [INFO] Started server process [373576]
[2023-05-05 12:15:29 +0800] [373576] [INFO] Waiting for application startup.
[2023-05-05 12:15:29 +0800] [373576] [INFO] Application startup complete.
[2023-05-05 12:15:29 +0800] [373577] [INFO] Started server process [373577]
[2023-05-05 12:15:29 +0800] [373577] [INFO] Waiting for application startup.
[2023-05-05 12:15:29 +0800] [373577] [INFO] Application startup complete.
[2023-05-05 12:15:52 +0800] [373577] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/main.py", line 133, in download_overall_data
    df.to_excel(file, index=False)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 2252, in to_excel
    formatter.write(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/io/formats/excel.py", line 934, in write
    writer = ExcelWriter(  # type: ignore[abstract]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/io/excel/_openpyxl.py", line 56, in __init__
    from openpyxl.workbook import Workbook
ModuleNotFoundError: No module named 'openpyxl'
[2023-05-05 14:54:12 +0800] [373575] [INFO] Handling signal: hup
[2023-05-05 14:54:12 +0800] [373575] [INFO] Hang up: Master
[2023-05-05 16:33:00 +0800] [437098] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f1242d12050>
  on_reload: <function OnReload.on_reload at 0x7f1242d12170>
  when_ready: <function WhenReady.when_ready at 0x7f1242d12290>
  pre_fork: <function Prefork.pre_fork at 0x7f1242d123b0>
  post_fork: <function Postfork.post_fork at 0x7f1242d124d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f1242d125f0>
  worker_int: <function WorkerInt.worker_int at 0x7f1242d12710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f1242d12830>
  pre_exec: <function PreExec.pre_exec at 0x7f1242d12950>
  pre_request: <function PreRequest.pre_request at 0x7f1242d12a70>
  post_request: <function PostRequest.post_request at 0x7f1242d12b00>
  child_exit: <function ChildExit.child_exit at 0x7f1242d12c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f1242d12d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f1242d12e60>
  on_exit: <function OnExit.on_exit at 0x7f1242d12f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 16:33:00 +0800] [437098] [INFO] Starting gunicorn 20.1.0
[2023-05-05 16:33:00 +0800] [437098] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-05 16:33:00 +0800] [437098] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-05 16:33:00 +0800] [437098] [ERROR] Retrying in 1 second.
[2023-05-05 16:33:01 +0800] [437098] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-05 16:33:01 +0800] [437098] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-05 16:33:01 +0800] [437098] [ERROR] Retrying in 1 second.
[2023-05-05 16:33:02 +0800] [437098] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-05 16:33:02 +0800] [437098] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-05 16:33:02 +0800] [437098] [ERROR] Retrying in 1 second.
[2023-05-05 16:33:03 +0800] [437098] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-05 16:33:03 +0800] [437098] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-05 16:33:03 +0800] [437098] [ERROR] Retrying in 1 second.
[2023-05-05 16:33:04 +0800] [437098] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-05 16:33:04 +0800] [437098] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-05 16:33:04 +0800] [437098] [ERROR] Retrying in 1 second.
[2023-05-05 16:33:05 +0800] [437098] [ERROR] Can't connect to ('0.0.0.0', 8000)
[2023-05-05 16:34:22 +0800] [437450] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f3f09d06050>
  on_reload: <function OnReload.on_reload at 0x7f3f09d06170>
  when_ready: <function WhenReady.when_ready at 0x7f3f09d06290>
  pre_fork: <function Prefork.pre_fork at 0x7f3f09d063b0>
  post_fork: <function Postfork.post_fork at 0x7f3f09d064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f3f09d065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f3f09d06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f3f09d06830>
  pre_exec: <function PreExec.pre_exec at 0x7f3f09d06950>
  pre_request: <function PreRequest.pre_request at 0x7f3f09d06a70>
  post_request: <function PostRequest.post_request at 0x7f3f09d06b00>
  child_exit: <function ChildExit.child_exit at 0x7f3f09d06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f3f09d06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f3f09d06e60>
  on_exit: <function OnExit.on_exit at 0x7f3f09d06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 16:34:22 +0800] [437450] [INFO] Starting gunicorn 20.1.0
[2023-05-05 16:34:22 +0800] [437450] [DEBUG] Arbiter booted
[2023-05-05 16:34:22 +0800] [437450] [INFO] Listening at: http://0.0.0.0:8000 (437450)
[2023-05-05 16:34:22 +0800] [437450] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-05 16:34:22 +0800] [437451] [INFO] Booting worker with pid: 437451
[2023-05-05 16:34:22 +0800] [437452] [INFO] Booting worker with pid: 437452
[2023-05-05 16:34:22 +0800] [437450] [DEBUG] 2 workers
[2023-05-05 16:34:24 +0800] [437451] [INFO] Started server process [437451]
[2023-05-05 16:34:24 +0800] [437452] [INFO] Started server process [437452]
[2023-05-05 16:34:24 +0800] [437451] [INFO] Waiting for application startup.
[2023-05-05 16:34:24 +0800] [437452] [INFO] Waiting for application startup.
[2023-05-05 16:34:24 +0800] [437452] [INFO] Application startup complete.
[2023-05-05 16:34:24 +0800] [437451] [INFO] Application startup complete.
[2023-05-05 16:36:01 +0800] [437452] [INFO] Worker reloading: /data/wshao/ATAC_db/code/main.py modified
[2023-05-05 16:36:01 +0800] [437451] [INFO] Worker reloading: /data/wshao/ATAC_db/code/main.py modified
[2023-05-05 19:27:49 +0800] [437450] [INFO] Handling signal: hup
[2023-05-05 19:27:49 +0800] [437450] [INFO] Hang up: Master
[2023-05-05 19:27:49 +0800] [437450] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f3f09d06050>
  on_reload: <function OnReload.on_reload at 0x7f3f09d06170>
  when_ready: <function WhenReady.when_ready at 0x7f3f09d06290>
  pre_fork: <function Prefork.pre_fork at 0x7f3f09d063b0>
  post_fork: <function Postfork.post_fork at 0x7f3f09d064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f3f09d065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f3f09d06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f3f09d06830>
  pre_exec: <function PreExec.pre_exec at 0x7f3f09d06950>
  pre_request: <function PreRequest.pre_request at 0x7f3f09d06a70>
  post_request: <function PostRequest.post_request at 0x7f3f09d06b00>
  child_exit: <function ChildExit.child_exit at 0x7f3f09d06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f3f09d06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f3f09d06e60>
  on_exit: <function OnExit.on_exit at 0x7f3f09d06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 19:27:49 +0800] [480340] [INFO] Booting worker with pid: 480340
[2023-05-05 19:27:49 +0800] [480341] [INFO] Booting worker with pid: 480341
[2023-05-05 19:27:49 +0800] [437451] [INFO] Shutting down
[2023-05-05 19:27:49 +0800] [437451] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 19:27:49 +0800] [437452] [INFO] Shutting down
[2023-05-05 19:27:49 +0800] [437452] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 19:27:49 +0800] [437452] [INFO] Waiting for application shutdown.
[2023-05-05 19:27:49 +0800] [437452] [INFO] Application shutdown complete.
[2023-05-05 19:27:49 +0800] [437452] [INFO] Finished server process [437452]
[2023-05-05 19:27:49 +0800] [437452] [INFO] Worker exiting (pid: 437452)
[2023-05-05 19:27:49 +0800] [437451] [INFO] Waiting for application shutdown.
[2023-05-05 19:27:49 +0800] [437451] [INFO] Application shutdown complete.
[2023-05-05 19:27:49 +0800] [437451] [INFO] Finished server process [437451]
[2023-05-05 19:27:49 +0800] [437451] [INFO] Worker exiting (pid: 437451)
[2023-05-05 19:27:50 +0800] [437450] [WARNING] Worker with pid 437451 was terminated due to signal 15
[2023-05-05 19:27:51 +0800] [480340] [INFO] Started server process [480340]
[2023-05-05 19:27:51 +0800] [480340] [INFO] Waiting for application startup.
[2023-05-05 19:27:51 +0800] [480340] [INFO] Application startup complete.
[2023-05-05 19:27:51 +0800] [480341] [INFO] Started server process [480341]
[2023-05-05 19:27:51 +0800] [480341] [INFO] Waiting for application startup.
[2023-05-05 19:27:51 +0800] [480341] [INFO] Application startup complete.
[2023-05-05 19:27:58 +0800] [437450] [INFO] Handling signal: hup
[2023-05-05 19:27:58 +0800] [437450] [INFO] Hang up: Master
[2023-05-05 19:27:58 +0800] [437450] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f3f09d06050>
  on_reload: <function OnReload.on_reload at 0x7f3f09d06170>
  when_ready: <function WhenReady.when_ready at 0x7f3f09d06290>
  pre_fork: <function Prefork.pre_fork at 0x7f3f09d063b0>
  post_fork: <function Postfork.post_fork at 0x7f3f09d064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f3f09d065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f3f09d06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f3f09d06830>
  pre_exec: <function PreExec.pre_exec at 0x7f3f09d06950>
  pre_request: <function PreRequest.pre_request at 0x7f3f09d06a70>
  post_request: <function PostRequest.post_request at 0x7f3f09d06b00>
  child_exit: <function ChildExit.child_exit at 0x7f3f09d06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f3f09d06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f3f09d06e60>
  on_exit: <function OnExit.on_exit at 0x7f3f09d06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 19:27:58 +0800] [480383] [INFO] Booting worker with pid: 480383
[2023-05-05 19:27:58 +0800] [480384] [INFO] Booting worker with pid: 480384
[2023-05-05 19:27:58 +0800] [480341] [INFO] Shutting down
[2023-05-05 19:27:58 +0800] [480341] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 19:27:58 +0800] [480340] [INFO] Shutting down
[2023-05-05 19:27:58 +0800] [480340] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 19:27:58 +0800] [480341] [INFO] Waiting for application shutdown.
[2023-05-05 19:27:58 +0800] [480341] [INFO] Application shutdown complete.
[2023-05-05 19:27:58 +0800] [480341] [INFO] Finished server process [480341]
[2023-05-05 19:27:58 +0800] [480341] [INFO] Worker exiting (pid: 480341)
[2023-05-05 19:27:58 +0800] [480340] [INFO] Waiting for application shutdown.
[2023-05-05 19:27:58 +0800] [480340] [INFO] Application shutdown complete.
[2023-05-05 19:27:58 +0800] [480340] [INFO] Finished server process [480340]
[2023-05-05 19:27:58 +0800] [480340] [INFO] Worker exiting (pid: 480340)
[2023-05-05 19:27:58 +0800] [437450] [WARNING] Worker with pid 480340 was terminated due to signal 15
[2023-05-05 19:27:59 +0800] [480384] [INFO] Started server process [480384]
[2023-05-05 19:27:59 +0800] [480384] [INFO] Waiting for application startup.
[2023-05-05 19:27:59 +0800] [480384] [INFO] Application startup complete.
[2023-05-05 19:27:59 +0800] [480383] [INFO] Started server process [480383]
[2023-05-05 19:27:59 +0800] [480383] [INFO] Waiting for application startup.
[2023-05-05 19:27:59 +0800] [480383] [INFO] Application startup complete.
[2023-05-05 19:28:06 +0800] [437450] [INFO] Handling signal: hup
[2023-05-05 19:28:06 +0800] [437450] [INFO] Hang up: Master
[2023-05-05 19:28:06 +0800] [437450] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f3f09d06050>
  on_reload: <function OnReload.on_reload at 0x7f3f09d06170>
  when_ready: <function WhenReady.when_ready at 0x7f3f09d06290>
  pre_fork: <function Prefork.pre_fork at 0x7f3f09d063b0>
  post_fork: <function Postfork.post_fork at 0x7f3f09d064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f3f09d065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f3f09d06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f3f09d06830>
  pre_exec: <function PreExec.pre_exec at 0x7f3f09d06950>
  pre_request: <function PreRequest.pre_request at 0x7f3f09d06a70>
  post_request: <function PostRequest.post_request at 0x7f3f09d06b00>
  child_exit: <function ChildExit.child_exit at 0x7f3f09d06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f3f09d06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f3f09d06e60>
  on_exit: <function OnExit.on_exit at 0x7f3f09d06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 19:28:06 +0800] [480438] [INFO] Booting worker with pid: 480438
[2023-05-05 19:28:06 +0800] [480439] [INFO] Booting worker with pid: 480439
[2023-05-05 19:28:07 +0800] [480383] [INFO] Shutting down
[2023-05-05 19:28:07 +0800] [480383] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 19:28:07 +0800] [480384] [INFO] Shutting down
[2023-05-05 19:28:07 +0800] [480384] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 19:28:07 +0800] [480383] [INFO] Waiting for application shutdown.
[2023-05-05 19:28:07 +0800] [480383] [INFO] Application shutdown complete.
[2023-05-05 19:28:07 +0800] [480383] [INFO] Finished server process [480383]
[2023-05-05 19:28:07 +0800] [480384] [INFO] Waiting for application shutdown.
[2023-05-05 19:28:07 +0800] [480384] [INFO] Application shutdown complete.
[2023-05-05 19:28:07 +0800] [480384] [INFO] Finished server process [480384]
[2023-05-05 19:28:07 +0800] [480383] [INFO] Worker exiting (pid: 480383)
[2023-05-05 19:28:07 +0800] [480384] [INFO] Worker exiting (pid: 480384)
[2023-05-05 19:28:08 +0800] [480439] [INFO] Started server process [480439]
[2023-05-05 19:28:08 +0800] [480439] [INFO] Waiting for application startup.
[2023-05-05 19:28:08 +0800] [480439] [INFO] Application startup complete.
[2023-05-05 19:28:08 +0800] [480438] [INFO] Started server process [480438]
[2023-05-05 19:28:08 +0800] [480438] [INFO] Waiting for application startup.
[2023-05-05 19:28:08 +0800] [480438] [INFO] Application startup complete.
[2023-05-05 19:28:20 +0800] [437450] [INFO] Handling signal: hup
[2023-05-05 19:28:20 +0800] [437450] [INFO] Hang up: Master
[2023-05-05 19:28:20 +0800] [437450] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f3f09d06050>
  on_reload: <function OnReload.on_reload at 0x7f3f09d06170>
  when_ready: <function WhenReady.when_ready at 0x7f3f09d06290>
  pre_fork: <function Prefork.pre_fork at 0x7f3f09d063b0>
  post_fork: <function Postfork.post_fork at 0x7f3f09d064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f3f09d065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f3f09d06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f3f09d06830>
  pre_exec: <function PreExec.pre_exec at 0x7f3f09d06950>
  pre_request: <function PreRequest.pre_request at 0x7f3f09d06a70>
  post_request: <function PostRequest.post_request at 0x7f3f09d06b00>
  child_exit: <function ChildExit.child_exit at 0x7f3f09d06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f3f09d06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f3f09d06e60>
  on_exit: <function OnExit.on_exit at 0x7f3f09d06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 19:28:20 +0800] [480491] [INFO] Booting worker with pid: 480491
[2023-05-05 19:28:20 +0800] [480438] [INFO] Shutting down
[2023-05-05 19:28:20 +0800] [480438] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 19:28:20 +0800] [480492] [INFO] Booting worker with pid: 480492
[2023-05-05 19:28:20 +0800] [480439] [INFO] Shutting down
[2023-05-05 19:28:20 +0800] [480439] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 19:28:20 +0800] [480438] [INFO] Waiting for application shutdown.
[2023-05-05 19:28:20 +0800] [480438] [INFO] Application shutdown complete.
[2023-05-05 19:28:20 +0800] [480438] [INFO] Finished server process [480438]
[2023-05-05 19:28:20 +0800] [480438] [INFO] Worker exiting (pid: 480438)
[2023-05-05 19:28:20 +0800] [480439] [INFO] Waiting for application shutdown.
[2023-05-05 19:28:20 +0800] [480439] [INFO] Application shutdown complete.
[2023-05-05 19:28:20 +0800] [480439] [INFO] Finished server process [480439]
[2023-05-05 19:28:20 +0800] [480439] [INFO] Worker exiting (pid: 480439)
[2023-05-05 19:28:20 +0800] [437450] [WARNING] Worker with pid 480439 was terminated due to signal 15
[2023-05-05 19:28:20 +0800] [437450] [INFO] Handling signal: hup
[2023-05-05 19:28:20 +0800] [437450] [INFO] Hang up: Master
[2023-05-05 19:28:20 +0800] [437450] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f3f09d06050>
  on_reload: <function OnReload.on_reload at 0x7f3f09d06170>
  when_ready: <function WhenReady.when_ready at 0x7f3f09d06290>
  pre_fork: <function Prefork.pre_fork at 0x7f3f09d063b0>
  post_fork: <function Postfork.post_fork at 0x7f3f09d064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f3f09d065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f3f09d06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f3f09d06830>
  pre_exec: <function PreExec.pre_exec at 0x7f3f09d06950>
  pre_request: <function PreRequest.pre_request at 0x7f3f09d06a70>
  post_request: <function PostRequest.post_request at 0x7f3f09d06b00>
  child_exit: <function ChildExit.child_exit at 0x7f3f09d06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f3f09d06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f3f09d06e60>
  on_exit: <function OnExit.on_exit at 0x7f3f09d06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 19:28:20 +0800] [480494] [INFO] Booting worker with pid: 480494
[2023-05-05 19:28:20 +0800] [480496] [INFO] Booting worker with pid: 480496
[2023-05-05 19:28:20 +0800] [437450] [WARNING] Worker with pid 480491 was terminated due to signal 15
[2023-05-05 19:28:20 +0800] [437450] [WARNING] Worker with pid 480492 was terminated due to signal 15
[2023-05-05 19:28:21 +0800] [437450] [INFO] Handling signal: hup
[2023-05-05 19:28:21 +0800] [437450] [INFO] Hang up: Master
[2023-05-05 19:28:21 +0800] [437450] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f3f09d06050>
  on_reload: <function OnReload.on_reload at 0x7f3f09d06170>
  when_ready: <function WhenReady.when_ready at 0x7f3f09d06290>
  pre_fork: <function Prefork.pre_fork at 0x7f3f09d063b0>
  post_fork: <function Postfork.post_fork at 0x7f3f09d064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f3f09d065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f3f09d06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f3f09d06830>
  pre_exec: <function PreExec.pre_exec at 0x7f3f09d06950>
  pre_request: <function PreRequest.pre_request at 0x7f3f09d06a70>
  post_request: <function PostRequest.post_request at 0x7f3f09d06b00>
  child_exit: <function ChildExit.child_exit at 0x7f3f09d06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f3f09d06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f3f09d06e60>
  on_exit: <function OnExit.on_exit at 0x7f3f09d06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 19:28:21 +0800] [480497] [INFO] Booting worker with pid: 480497
[2023-05-05 19:28:21 +0800] [437450] [WARNING] Worker with pid 480496 was terminated due to signal 15
[2023-05-05 19:28:21 +0800] [480498] [INFO] Booting worker with pid: 480498
[2023-05-05 19:28:21 +0800] [437450] [WARNING] Worker with pid 480494 was terminated due to signal 15
[2023-05-05 19:28:21 +0800] [437450] [INFO] Handling signal: hup
[2023-05-05 19:28:21 +0800] [437450] [INFO] Hang up: Master
[2023-05-05 19:28:21 +0800] [437450] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: True
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f3f09d06050>
  on_reload: <function OnReload.on_reload at 0x7f3f09d06170>
  when_ready: <function WhenReady.when_ready at 0x7f3f09d06290>
  pre_fork: <function Prefork.pre_fork at 0x7f3f09d063b0>
  post_fork: <function Postfork.post_fork at 0x7f3f09d064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f3f09d065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f3f09d06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f3f09d06830>
  pre_exec: <function PreExec.pre_exec at 0x7f3f09d06950>
  pre_request: <function PreRequest.pre_request at 0x7f3f09d06a70>
  post_request: <function PostRequest.post_request at 0x7f3f09d06b00>
  child_exit: <function ChildExit.child_exit at 0x7f3f09d06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f3f09d06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f3f09d06e60>
  on_exit: <function OnExit.on_exit at 0x7f3f09d06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 19:28:21 +0800] [480502] [INFO] Booting worker with pid: 480502
[2023-05-05 19:28:21 +0800] [437450] [WARNING] Worker with pid 480497 was terminated due to signal 15
[2023-05-05 19:28:21 +0800] [480503] [INFO] Booting worker with pid: 480503
[2023-05-05 19:28:21 +0800] [437450] [WARNING] Worker with pid 480498 was terminated due to signal 15
[2023-05-05 19:28:22 +0800] [480502] [INFO] Started server process [480502]
[2023-05-05 19:28:22 +0800] [480503] [INFO] Started server process [480503]
[2023-05-05 19:28:22 +0800] [480503] [INFO] Waiting for application startup.
[2023-05-05 19:28:22 +0800] [480502] [INFO] Waiting for application startup.
[2023-05-05 19:28:22 +0800] [480502] [INFO] Application startup complete.
[2023-05-05 19:28:22 +0800] [480503] [INFO] Application startup complete.
[2023-05-05 19:31:38 +0800] [437450] [CRITICAL] WORKER TIMEOUT (pid:480502)
[2023-05-05 19:31:39 +0800] [437450] [WARNING] Worker with pid 480502 was terminated due to signal 6
[2023-05-05 19:31:39 +0800] [481328] [INFO] Booting worker with pid: 481328
[2023-05-05 19:31:40 +0800] [481328] [INFO] Started server process [481328]
[2023-05-05 19:31:40 +0800] [481328] [INFO] Waiting for application startup.
[2023-05-05 19:31:40 +0800] [481328] [INFO] Application startup complete.
[2023-05-05 19:32:10 +0800] [437450] [CRITICAL] WORKER TIMEOUT (pid:481328)
[2023-05-05 19:32:11 +0800] [437450] [WARNING] Worker with pid 481328 was terminated due to signal 6
[2023-05-05 19:32:11 +0800] [481467] [INFO] Booting worker with pid: 481467
[2023-05-05 19:32:12 +0800] [481467] [INFO] Started server process [481467]
[2023-05-05 19:32:12 +0800] [481467] [INFO] Waiting for application startup.
[2023-05-05 19:32:12 +0800] [481467] [INFO] Application startup complete.
[2023-05-05 19:36:55 +0800] [437450] [CRITICAL] WORKER TIMEOUT (pid:481467)
[2023-05-05 19:36:55 +0800] [437450] [WARNING] Worker with pid 481467 was terminated due to signal 6
[2023-05-05 19:36:55 +0800] [482622] [INFO] Booting worker with pid: 482622
[2023-05-05 19:36:56 +0800] [482622] [INFO] Started server process [482622]
[2023-05-05 19:36:56 +0800] [482622] [INFO] Waiting for application startup.
[2023-05-05 19:36:56 +0800] [482622] [INFO] Application startup complete.
[2023-05-05 19:42:17 +0800] [480503] [INFO] Worker reloading: /data/wshao/ATAC_db/code/gunicorn.py modified
[2023-05-05 19:42:18 +0800] [482622] [INFO] Worker reloading: /data/wshao/ATAC_db/code/gunicorn.py modified
[2023-05-05 19:43:15 +0800] [484156] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 120
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f76c8f06050>
  on_reload: <function OnReload.on_reload at 0x7f76c8f06170>
  when_ready: <function WhenReady.when_ready at 0x7f76c8f06290>
  pre_fork: <function Prefork.pre_fork at 0x7f76c8f063b0>
  post_fork: <function Postfork.post_fork at 0x7f76c8f064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f76c8f065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f76c8f06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f76c8f06830>
  pre_exec: <function PreExec.pre_exec at 0x7f76c8f06950>
  pre_request: <function PreRequest.pre_request at 0x7f76c8f06a70>
  post_request: <function PostRequest.post_request at 0x7f76c8f06b00>
  child_exit: <function ChildExit.child_exit at 0x7f76c8f06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f76c8f06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f76c8f06e60>
  on_exit: <function OnExit.on_exit at 0x7f76c8f06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 19:43:15 +0800] [484156] [INFO] Starting gunicorn 20.1.0
[2023-05-05 19:43:15 +0800] [484156] [DEBUG] Arbiter booted
[2023-05-05 19:43:15 +0800] [484156] [INFO] Listening at: http://0.0.0.0:8000 (484156)
[2023-05-05 19:43:15 +0800] [484156] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-05 19:43:15 +0800] [484157] [INFO] Booting worker with pid: 484157
[2023-05-05 19:43:15 +0800] [484158] [INFO] Booting worker with pid: 484158
[2023-05-05 19:43:15 +0800] [484156] [DEBUG] 2 workers
[2023-05-05 19:43:16 +0800] [484157] [INFO] Started server process [484157]
[2023-05-05 19:43:16 +0800] [484157] [INFO] Waiting for application startup.
[2023-05-05 19:43:16 +0800] [484157] [INFO] Application startup complete.
[2023-05-05 19:43:16 +0800] [484158] [INFO] Started server process [484158]
[2023-05-05 19:43:16 +0800] [484158] [INFO] Waiting for application startup.
[2023-05-05 19:43:16 +0800] [484158] [INFO] Application startup complete.
[2023-05-05 20:01:42 +0800] [484156] [INFO] Handling signal: hup
[2023-05-05 20:01:42 +0800] [484156] [INFO] Hang up: Master
[2023-05-05 20:01:42 +0800] [484156] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 120
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f76c8f06050>
  on_reload: <function OnReload.on_reload at 0x7f76c8f06170>
  when_ready: <function WhenReady.when_ready at 0x7f76c8f06290>
  pre_fork: <function Prefork.pre_fork at 0x7f76c8f063b0>
  post_fork: <function Postfork.post_fork at 0x7f76c8f064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f76c8f065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f76c8f06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f76c8f06830>
  pre_exec: <function PreExec.pre_exec at 0x7f76c8f06950>
  pre_request: <function PreRequest.pre_request at 0x7f76c8f06a70>
  post_request: <function PostRequest.post_request at 0x7f76c8f06b00>
  child_exit: <function ChildExit.child_exit at 0x7f76c8f06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f76c8f06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f76c8f06e60>
  on_exit: <function OnExit.on_exit at 0x7f76c8f06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-05 20:01:42 +0800] [488617] [INFO] Booting worker with pid: 488617
[2023-05-05 20:01:42 +0800] [488618] [INFO] Booting worker with pid: 488618
[2023-05-05 20:01:42 +0800] [484158] [INFO] Shutting down
[2023-05-05 20:01:42 +0800] [484157] [INFO] Shutting down
[2023-05-05 20:01:42 +0800] [484158] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 20:01:42 +0800] [484157] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-05 20:01:42 +0800] [484158] [INFO] Waiting for application shutdown.
[2023-05-05 20:01:42 +0800] [484157] [INFO] Waiting for application shutdown.
[2023-05-05 20:01:42 +0800] [484158] [INFO] Application shutdown complete.
[2023-05-05 20:01:42 +0800] [484157] [INFO] Application shutdown complete.
[2023-05-05 20:01:42 +0800] [484158] [INFO] Finished server process [484158]
[2023-05-05 20:01:42 +0800] [484157] [INFO] Finished server process [484157]
[2023-05-05 20:01:42 +0800] [484158] [INFO] Worker exiting (pid: 484158)
[2023-05-05 20:01:42 +0800] [484157] [INFO] Worker exiting (pid: 484157)
[2023-05-05 20:01:45 +0800] [488617] [INFO] Started server process [488617]
[2023-05-05 20:01:45 +0800] [488618] [INFO] Started server process [488618]
[2023-05-05 20:01:45 +0800] [488617] [INFO] Waiting for application startup.
[2023-05-05 20:01:45 +0800] [488618] [INFO] Waiting for application startup.
[2023-05-05 20:01:45 +0800] [488618] [INFO] Application startup complete.
[2023-05-05 20:01:45 +0800] [488617] [INFO] Application startup complete.
[2023-05-06 11:08:59 +0800] [488617] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 43, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 86, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 0, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-06 11:08:59 +0800] [488618] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 35, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 66, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-06 12:05:20 +0800] [488617] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 146, in download_diff_peak_data
    os.mkdir(path)
FileNotFoundError: [Errno 2] No such file or directory: '../data/74/csv'
[2023-05-06 12:05:21 +0800] [488618] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 165, in download_diff_GO_enrichment_data
    os.mkdir(path)
FileNotFoundError: [Errno 2] No such file or directory: '../data/74/csv'
[2023-05-06 12:05:22 +0800] [488618] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 183, in download_diff_KEGG_enrichment_data
    os.mkdir(path)
FileNotFoundError: [Errno 2] No such file or directory: '../data/74/csv'
[2023-05-06 12:05:25 +0800] [488618] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 201, in download_diff_motif_data
    os.mkdir(path)
FileNotFoundError: [Errno 2] No such file or directory: '../data/74/csv'
[2023-05-06 12:05:25 +0800] [488618] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 220, in download_diff_footprint_data
    os.mkdir(path)
FileNotFoundError: [Errno 2] No such file or directory: '../data/74/csv'
[2023-05-06 12:06:19 +0800] [488618] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 238, in download_ctrl_peak_data
    os.mkdir(path)
FileNotFoundError: [Errno 2] No such file or directory: '../data/74/csv'
[2023-05-06 12:06:38 +0800] [484156] [CRITICAL] WORKER TIMEOUT (pid:488618)
[2023-05-06 12:06:39 +0800] [484156] [WARNING] Worker with pid 488618 was terminated due to signal 6
[2023-05-06 12:06:39 +0800] [749535] [INFO] Booting worker with pid: 749535
[2023-05-06 12:06:41 +0800] [749535] [INFO] Started server process [749535]
[2023-05-06 12:06:41 +0800] [749535] [INFO] Waiting for application startup.
[2023-05-06 12:06:41 +0800] [749535] [INFO] Application startup complete.
[2023-05-06 12:17:25 +0800] [484156] [INFO] Handling signal: hup
[2023-05-06 12:17:25 +0800] [484156] [INFO] Hang up: Master
[2023-05-06 12:17:25 +0800] [484156] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 120
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f76c8f06050>
  on_reload: <function OnReload.on_reload at 0x7f76c8f06170>
  when_ready: <function WhenReady.when_ready at 0x7f76c8f06290>
  pre_fork: <function Prefork.pre_fork at 0x7f76c8f063b0>
  post_fork: <function Postfork.post_fork at 0x7f76c8f064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f76c8f065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f76c8f06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f76c8f06830>
  pre_exec: <function PreExec.pre_exec at 0x7f76c8f06950>
  pre_request: <function PreRequest.pre_request at 0x7f76c8f06a70>
  post_request: <function PostRequest.post_request at 0x7f76c8f06b00>
  child_exit: <function ChildExit.child_exit at 0x7f76c8f06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f76c8f06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f76c8f06e60>
  on_exit: <function OnExit.on_exit at 0x7f76c8f06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 12:17:25 +0800] [752604] [INFO] Booting worker with pid: 752604
[2023-05-06 12:17:25 +0800] [752605] [INFO] Booting worker with pid: 752605
[2023-05-06 12:17:25 +0800] [749535] [INFO] Shutting down
[2023-05-06 12:17:25 +0800] [749535] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 12:17:25 +0800] [488617] [INFO] Shutting down
[2023-05-06 12:17:25 +0800] [488617] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 12:17:25 +0800] [749535] [INFO] Waiting for application shutdown.
[2023-05-06 12:17:25 +0800] [749535] [INFO] Application shutdown complete.
[2023-05-06 12:17:25 +0800] [749535] [INFO] Finished server process [749535]
[2023-05-06 12:17:25 +0800] [749535] [INFO] Worker exiting (pid: 749535)
[2023-05-06 12:17:25 +0800] [488617] [INFO] Waiting for application shutdown.
[2023-05-06 12:17:25 +0800] [488617] [INFO] Application shutdown complete.
[2023-05-06 12:17:25 +0800] [488617] [INFO] Finished server process [488617]
[2023-05-06 12:17:25 +0800] [488617] [INFO] Worker exiting (pid: 488617)
[2023-05-06 12:17:26 +0800] [484156] [WARNING] Worker with pid 488617 was terminated due to signal 15
[2023-05-06 12:17:27 +0800] [752604] [INFO] Started server process [752604]
[2023-05-06 12:17:27 +0800] [752604] [INFO] Waiting for application startup.
[2023-05-06 12:17:27 +0800] [752604] [INFO] Application startup complete.
[2023-05-06 12:17:27 +0800] [752605] [INFO] Started server process [752605]
[2023-05-06 12:17:27 +0800] [752605] [INFO] Waiting for application startup.
[2023-05-06 12:17:27 +0800] [752605] [INFO] Application startup complete.
[2023-05-06 12:18:25 +0800] [484156] [INFO] Handling signal: hup
[2023-05-06 12:18:25 +0800] [484156] [INFO] Hang up: Master
[2023-05-06 12:18:25 +0800] [484156] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 120
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f76c8f06050>
  on_reload: <function OnReload.on_reload at 0x7f76c8f06170>
  when_ready: <function WhenReady.when_ready at 0x7f76c8f06290>
  pre_fork: <function Prefork.pre_fork at 0x7f76c8f063b0>
  post_fork: <function Postfork.post_fork at 0x7f76c8f064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f76c8f065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f76c8f06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f76c8f06830>
  pre_exec: <function PreExec.pre_exec at 0x7f76c8f06950>
  pre_request: <function PreRequest.pre_request at 0x7f76c8f06a70>
  post_request: <function PostRequest.post_request at 0x7f76c8f06b00>
  child_exit: <function ChildExit.child_exit at 0x7f76c8f06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f76c8f06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f76c8f06e60>
  on_exit: <function OnExit.on_exit at 0x7f76c8f06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 12:18:25 +0800] [752875] [INFO] Booting worker with pid: 752875
[2023-05-06 12:18:25 +0800] [752876] [INFO] Booting worker with pid: 752876
[2023-05-06 12:18:25 +0800] [752604] [INFO] Shutting down
[2023-05-06 12:18:25 +0800] [752605] [INFO] Shutting down
[2023-05-06 12:18:25 +0800] [752605] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 12:18:25 +0800] [752604] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 12:18:25 +0800] [752605] [INFO] Waiting for application shutdown.
[2023-05-06 12:18:25 +0800] [752604] [INFO] Waiting for application shutdown.
[2023-05-06 12:18:25 +0800] [752604] [INFO] Application shutdown complete.
[2023-05-06 12:18:25 +0800] [752605] [INFO] Application shutdown complete.
[2023-05-06 12:18:25 +0800] [752604] [INFO] Finished server process [752604]
[2023-05-06 12:18:25 +0800] [752605] [INFO] Finished server process [752605]
[2023-05-06 12:18:25 +0800] [752605] [INFO] Worker exiting (pid: 752605)
[2023-05-06 12:18:25 +0800] [752604] [INFO] Worker exiting (pid: 752604)
[2023-05-06 12:18:27 +0800] [752876] [INFO] Started server process [752876]
[2023-05-06 12:18:27 +0800] [752876] [INFO] Waiting for application startup.
[2023-05-06 12:18:27 +0800] [752876] [INFO] Application startup complete.
[2023-05-06 12:18:27 +0800] [752875] [INFO] Started server process [752875]
[2023-05-06 12:18:27 +0800] [752875] [INFO] Waiting for application startup.
[2023-05-06 12:18:27 +0800] [752875] [INFO] Application startup complete.
[2023-05-06 12:20:27 +0800] [484156] [CRITICAL] WORKER TIMEOUT (pid:752875)
[2023-05-06 12:20:28 +0800] [484156] [WARNING] Worker with pid 752875 was terminated due to signal 6
[2023-05-06 12:20:28 +0800] [753427] [INFO] Booting worker with pid: 753427
[2023-05-06 12:20:29 +0800] [753427] [INFO] Started server process [753427]
[2023-05-06 12:20:29 +0800] [753427] [INFO] Waiting for application startup.
[2023-05-06 12:20:29 +0800] [753427] [INFO] Application startup complete.
[2023-05-06 12:45:32 +0800] [484156] [CRITICAL] WORKER TIMEOUT (pid:753427)
[2023-05-06 12:45:33 +0800] [484156] [WARNING] Worker with pid 753427 was terminated due to signal 6
[2023-05-06 12:45:33 +0800] [760425] [INFO] Booting worker with pid: 760425
[2023-05-06 12:45:35 +0800] [760425] [INFO] Started server process [760425]
[2023-05-06 12:45:35 +0800] [760425] [INFO] Waiting for application startup.
[2023-05-06 12:45:35 +0800] [760425] [INFO] Application startup complete.
[2023-05-06 15:29:48 +0800] [484156] [INFO] Handling signal: hup
[2023-05-06 15:29:48 +0800] [484156] [INFO] Hang up: Master
[2023-05-06 15:29:48 +0800] [484156] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 120
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f76c8f06050>
  on_reload: <function OnReload.on_reload at 0x7f76c8f06170>
  when_ready: <function WhenReady.when_ready at 0x7f76c8f06290>
  pre_fork: <function Prefork.pre_fork at 0x7f76c8f063b0>
  post_fork: <function Postfork.post_fork at 0x7f76c8f064d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f76c8f065f0>
  worker_int: <function WorkerInt.worker_int at 0x7f76c8f06710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f76c8f06830>
  pre_exec: <function PreExec.pre_exec at 0x7f76c8f06950>
  pre_request: <function PreRequest.pre_request at 0x7f76c8f06a70>
  post_request: <function PostRequest.post_request at 0x7f76c8f06b00>
  child_exit: <function ChildExit.child_exit at 0x7f76c8f06c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7f76c8f06d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f76c8f06e60>
  on_exit: <function OnExit.on_exit at 0x7f76c8f06f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 15:29:48 +0800] [805488] [INFO] Booting worker with pid: 805488
[2023-05-06 15:29:48 +0800] [805489] [INFO] Booting worker with pid: 805489
[2023-05-06 15:29:48 +0800] [760425] [INFO] Shutting down
[2023-05-06 15:29:48 +0800] [760425] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 15:29:48 +0800] [752876] [INFO] Shutting down
[2023-05-06 15:29:48 +0800] [752876] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 15:29:48 +0800] [760425] [INFO] Waiting for application shutdown.
[2023-05-06 15:29:48 +0800] [760425] [INFO] Application shutdown complete.
[2023-05-06 15:29:48 +0800] [760425] [INFO] Finished server process [760425]
[2023-05-06 15:29:48 +0800] [752876] [INFO] Waiting for application shutdown.
[2023-05-06 15:29:48 +0800] [752876] [INFO] Application shutdown complete.
[2023-05-06 15:29:48 +0800] [752876] [INFO] Finished server process [752876]
[2023-05-06 15:29:48 +0800] [760425] [INFO] Worker exiting (pid: 760425)
[2023-05-06 15:29:48 +0800] [752876] [INFO] Worker exiting (pid: 752876)
[2023-05-06 15:29:49 +0800] [805489] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/code/main.py", line 13, in <module>
    import paramiko
ModuleNotFoundError: No module named 'paramiko'
[2023-05-06 15:29:49 +0800] [805488] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/code/main.py", line 13, in <module>
    import paramiko
ModuleNotFoundError: No module named 'paramiko'
[2023-05-06 15:29:49 +0800] [805489] [INFO] Worker exiting (pid: 805489)
[2023-05-06 15:29:49 +0800] [805488] [INFO] Worker exiting (pid: 805488)
[2023-05-06 15:30:20 +0800] [484156] [INFO] Shutting down: Master
[2023-05-06 15:30:20 +0800] [484156] [INFO] Reason: Worker failed to boot.
[2023-05-06 15:33:38 +0800] [806554] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 120
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7fcf17f1e050>
  on_reload: <function OnReload.on_reload at 0x7fcf17f1e170>
  when_ready: <function WhenReady.when_ready at 0x7fcf17f1e290>
  pre_fork: <function Prefork.pre_fork at 0x7fcf17f1e3b0>
  post_fork: <function Postfork.post_fork at 0x7fcf17f1e4d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7fcf17f1e5f0>
  worker_int: <function WorkerInt.worker_int at 0x7fcf17f1e710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7fcf17f1e830>
  pre_exec: <function PreExec.pre_exec at 0x7fcf17f1e950>
  pre_request: <function PreRequest.pre_request at 0x7fcf17f1ea70>
  post_request: <function PostRequest.post_request at 0x7fcf17f1eb00>
  child_exit: <function ChildExit.child_exit at 0x7fcf17f1ec20>
  worker_exit: <function WorkerExit.worker_exit at 0x7fcf17f1ed40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7fcf17f1ee60>
  on_exit: <function OnExit.on_exit at 0x7fcf17f1ef80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 15:33:38 +0800] [806554] [INFO] Starting gunicorn 20.1.0
[2023-05-06 15:33:38 +0800] [806554] [DEBUG] Arbiter booted
[2023-05-06 15:33:38 +0800] [806554] [INFO] Listening at: http://0.0.0.0:8000 (806554)
[2023-05-06 15:33:38 +0800] [806554] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-06 15:33:38 +0800] [806555] [INFO] Booting worker with pid: 806555
[2023-05-06 15:33:38 +0800] [806556] [INFO] Booting worker with pid: 806556
[2023-05-06 15:33:38 +0800] [806554] [DEBUG] 2 workers
[2023-05-06 15:33:38 +0800] [806555] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/code/main.py", line 13, in <module>
    import paramiko
ModuleNotFoundError: No module named 'paramiko'
[2023-05-06 15:33:38 +0800] [806555] [INFO] Worker exiting (pid: 806555)
[2023-05-06 15:33:39 +0800] [806556] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/code/main.py", line 13, in <module>
    import paramiko
ModuleNotFoundError: No module named 'paramiko'
[2023-05-06 15:33:39 +0800] [806556] [INFO] Worker exiting (pid: 806556)
[2023-05-06 15:33:39 +0800] [806554] [WARNING] Worker with pid 806556 was terminated due to signal 15
[2023-05-06 15:33:39 +0800] [806554] [INFO] Shutting down: Master
[2023-05-06 15:33:39 +0800] [806554] [INFO] Reason: Worker failed to boot.
[2023-05-06 15:35:31 +0800] [807075] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 120
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7fdb7eee6050>
  on_reload: <function OnReload.on_reload at 0x7fdb7eee6170>
  when_ready: <function WhenReady.when_ready at 0x7fdb7eee6290>
  pre_fork: <function Prefork.pre_fork at 0x7fdb7eee63b0>
  post_fork: <function Postfork.post_fork at 0x7fdb7eee64d0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7fdb7eee65f0>
  worker_int: <function WorkerInt.worker_int at 0x7fdb7eee6710>
  worker_abort: <function WorkerAbort.worker_abort at 0x7fdb7eee6830>
  pre_exec: <function PreExec.pre_exec at 0x7fdb7eee6950>
  pre_request: <function PreRequest.pre_request at 0x7fdb7eee6a70>
  post_request: <function PostRequest.post_request at 0x7fdb7eee6b00>
  child_exit: <function ChildExit.child_exit at 0x7fdb7eee6c20>
  worker_exit: <function WorkerExit.worker_exit at 0x7fdb7eee6d40>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7fdb7eee6e60>
  on_exit: <function OnExit.on_exit at 0x7fdb7eee6f80>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 15:35:31 +0800] [807075] [INFO] Starting gunicorn 20.1.0
[2023-05-06 15:35:31 +0800] [807075] [DEBUG] Arbiter booted
[2023-05-06 15:35:31 +0800] [807075] [INFO] Listening at: http://0.0.0.0:8000 (807075)
[2023-05-06 15:35:31 +0800] [807075] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-06 15:35:31 +0800] [807076] [INFO] Booting worker with pid: 807076
[2023-05-06 15:35:31 +0800] [807077] [INFO] Booting worker with pid: 807077
[2023-05-06 15:35:32 +0800] [807075] [DEBUG] 2 workers
[2023-05-06 15:35:32 +0800] [807076] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/code/main.py", line 13, in <module>
    import paramiko
ModuleNotFoundError: No module named 'paramiko'
[2023-05-06 15:35:32 +0800] [807076] [INFO] Worker exiting (pid: 807076)
[2023-05-06 15:35:32 +0800] [807077] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/arbiter.py", line 589, in spawn_worker
    worker.init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/workers.py", line 66, in init_process
    super(UvicornWorker, self).init_process()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/gunicorn/util.py", line 359, in import_app
    mod = importlib.import_module(module)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/data/wshao/ATAC_db/code/main.py", line 13, in <module>
    import paramiko
ModuleNotFoundError: No module named 'paramiko'
[2023-05-06 15:35:32 +0800] [807077] [INFO] Worker exiting (pid: 807077)
[2023-05-06 15:35:33 +0800] [807075] [WARNING] Worker with pid 807077 was terminated due to signal 15
[2023-05-06 15:35:33 +0800] [807075] [INFO] Shutting down: Master
[2023-05-06 15:35:33 +0800] [807075] [INFO] Reason: Worker failed to boot.
[2023-05-06 15:36:57 +0800] [807478] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 120
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7fd4dd23e320>
  on_reload: <function OnReload.on_reload at 0x7fd4dd23e440>
  when_ready: <function WhenReady.when_ready at 0x7fd4dd23e560>
  pre_fork: <function Prefork.pre_fork at 0x7fd4dd23e680>
  post_fork: <function Postfork.post_fork at 0x7fd4dd23e7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7fd4dd23e8c0>
  worker_int: <function WorkerInt.worker_int at 0x7fd4dd23e9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7fd4dd23eb00>
  pre_exec: <function PreExec.pre_exec at 0x7fd4dd23ec20>
  pre_request: <function PreRequest.pre_request at 0x7fd4dd23ed40>
  post_request: <function PostRequest.post_request at 0x7fd4dd23edd0>
  child_exit: <function ChildExit.child_exit at 0x7fd4dd23eef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7fd4dd23f010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7fd4dd23f130>
  on_exit: <function OnExit.on_exit at 0x7fd4dd23f250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 15:36:57 +0800] [807478] [INFO] Starting gunicorn 20.1.0
[2023-05-06 15:36:57 +0800] [807478] [DEBUG] Arbiter booted
[2023-05-06 15:36:57 +0800] [807478] [INFO] Listening at: http://0.0.0.0:8000 (807478)
[2023-05-06 15:36:57 +0800] [807478] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-06 15:36:57 +0800] [807479] [INFO] Booting worker with pid: 807479
[2023-05-06 15:36:57 +0800] [807480] [INFO] Booting worker with pid: 807480
[2023-05-06 15:36:58 +0800] [807478] [DEBUG] 2 workers
[2023-05-06 15:36:59 +0800] [807479] [INFO] Started server process [807479]
[2023-05-06 15:36:59 +0800] [807479] [INFO] Waiting for application startup.
[2023-05-06 15:36:59 +0800] [807479] [INFO] Application startup complete.
[2023-05-06 15:36:59 +0800] [807480] [INFO] Started server process [807480]
[2023-05-06 15:36:59 +0800] [807480] [INFO] Waiting for application startup.
[2023-05-06 15:36:59 +0800] [807480] [INFO] Application startup complete.
[2023-05-06 15:39:00 +0800] [807478] [CRITICAL] WORKER TIMEOUT (pid:807480)
[2023-05-06 15:39:00 +0800] [807478] [WARNING] Worker with pid 807480 was terminated due to signal 6
[2023-05-06 15:39:00 +0800] [808024] [INFO] Booting worker with pid: 808024
[2023-05-06 15:39:01 +0800] [808024] [INFO] Started server process [808024]
[2023-05-06 15:39:01 +0800] [808024] [INFO] Waiting for application startup.
[2023-05-06 15:39:01 +0800] [808024] [INFO] Application startup complete.
[2023-05-06 15:40:10 +0800] [808358] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7fcbc24be320>
  on_reload: <function OnReload.on_reload at 0x7fcbc24be440>
  when_ready: <function WhenReady.when_ready at 0x7fcbc24be560>
  pre_fork: <function Prefork.pre_fork at 0x7fcbc24be680>
  post_fork: <function Postfork.post_fork at 0x7fcbc24be7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7fcbc24be8c0>
  worker_int: <function WorkerInt.worker_int at 0x7fcbc24be9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7fcbc24beb00>
  pre_exec: <function PreExec.pre_exec at 0x7fcbc24bec20>
  pre_request: <function PreRequest.pre_request at 0x7fcbc24bed40>
  post_request: <function PostRequest.post_request at 0x7fcbc24bedd0>
  child_exit: <function ChildExit.child_exit at 0x7fcbc24beef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7fcbc24bf010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7fcbc24bf130>
  on_exit: <function OnExit.on_exit at 0x7fcbc24bf250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 15:40:10 +0800] [808358] [INFO] Starting gunicorn 20.1.0
[2023-05-06 15:40:10 +0800] [808358] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-06 15:40:10 +0800] [808358] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-06 15:40:10 +0800] [808358] [ERROR] Retrying in 1 second.
[2023-05-06 15:40:11 +0800] [808358] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-06 15:40:11 +0800] [808358] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-06 15:40:11 +0800] [808358] [ERROR] Retrying in 1 second.
[2023-05-06 15:40:12 +0800] [808358] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-06 15:40:12 +0800] [808358] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-06 15:40:12 +0800] [808358] [ERROR] Retrying in 1 second.
[2023-05-06 15:40:14 +0800] [808358] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-06 15:40:14 +0800] [808358] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-06 15:40:14 +0800] [808358] [ERROR] Retrying in 1 second.
[2023-05-06 15:40:15 +0800] [808358] [ERROR] Connection in use: ('0.0.0.0', 8000)
[2023-05-06 15:40:15 +0800] [808358] [DEBUG] connection to ('0.0.0.0', 8000) failed: [Errno 98] Address already in use
[2023-05-06 15:40:15 +0800] [808358] [ERROR] Retrying in 1 second.
[2023-05-06 15:40:16 +0800] [808358] [ERROR] Can't connect to ('0.0.0.0', 8000)
[2023-05-06 15:45:52 +0800] [807479] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 697, in recv
    out = self.in_buffer.read(nbytes, self.timeout)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/buffered_pipe.py", line 154, in read
    raise PipeTimeout()
paramiko.buffered_pipe.PipeTimeout

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 495, in _recv_file
    data = chan.recv(buff_size)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 699, in recv
    raise socket.timeout()
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 291, in download_plots
    scp.get(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 436, in _recv_all
    command[code](msg[1:])
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 513, in _recv_file
    raise SCPException('Error receiving, socket.timeout')
scp.SCPException: Error receiving, socket.timeout
[2023-05-06 15:50:49 +0800] [808024] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 291, in download_plots
    scp.get(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 436, in _recv_all
    command[code](msg[1:])
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 507, in _recv_file
    os.utime(path, self._utime)
FileNotFoundError: [Errno 2] No such file or directory
[2023-05-06 15:51:01 +0800] [807479] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 291, in download_plots
    scp.get(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 436, in _recv_all
    command[code](msg[1:])
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 507, in _recv_file
    os.utime(path, self._utime)
FileNotFoundError: [Errno 2] No such file or directory
[2023-05-06 17:47:32 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 17:47:32 +0800] [843359] [INFO] Starting gunicorn 20.1.0
[2023-05-06 17:47:32 +0800] [843359] [DEBUG] Arbiter booted
[2023-05-06 17:47:32 +0800] [843359] [INFO] Listening at: http://0.0.0.0:8000 (843359)
[2023-05-06 17:47:32 +0800] [843359] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-05-06 17:47:32 +0800] [843360] [INFO] Booting worker with pid: 843360
[2023-05-06 17:47:32 +0800] [843361] [INFO] Booting worker with pid: 843361
[2023-05-06 17:47:32 +0800] [843359] [DEBUG] 2 workers
[2023-05-06 17:47:34 +0800] [843360] [INFO] Started server process [843360]
[2023-05-06 17:47:34 +0800] [843360] [INFO] Waiting for application startup.
[2023-05-06 17:47:34 +0800] [843360] [INFO] Application startup complete.
[2023-05-06 17:47:34 +0800] [843361] [INFO] Started server process [843361]
[2023-05-06 17:47:34 +0800] [843361] [INFO] Waiting for application startup.
[2023-05-06 17:47:34 +0800] [843361] [INFO] Application startup complete.
[2023-05-06 20:05:30 +0800] [843359] [INFO] Handling signal: hup
[2023-05-06 20:05:30 +0800] [843359] [INFO] Hang up: Master
[2023-05-06 20:05:30 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 20:05:30 +0800] [881468] [INFO] Booting worker with pid: 881468
[2023-05-06 20:05:30 +0800] [881469] [INFO] Booting worker with pid: 881469
[2023-05-06 20:05:30 +0800] [843360] [INFO] Shutting down
[2023-05-06 20:05:30 +0800] [843360] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 20:05:30 +0800] [843361] [INFO] Shutting down
[2023-05-06 20:05:30 +0800] [843361] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 20:05:30 +0800] [843360] [INFO] Waiting for application shutdown.
[2023-05-06 20:05:30 +0800] [843361] [INFO] Waiting for application shutdown.
[2023-05-06 20:05:30 +0800] [843360] [INFO] Application shutdown complete.
[2023-05-06 20:05:30 +0800] [843361] [INFO] Application shutdown complete.
[2023-05-06 20:05:30 +0800] [843360] [INFO] Finished server process [843360]
[2023-05-06 20:05:30 +0800] [843361] [INFO] Finished server process [843361]
[2023-05-06 20:05:30 +0800] [843360] [INFO] Worker exiting (pid: 843360)
[2023-05-06 20:05:30 +0800] [843361] [INFO] Worker exiting (pid: 843361)
[2023-05-06 20:05:31 +0800] [843359] [WARNING] Worker with pid 843361 was terminated due to signal 15
[2023-05-06 20:05:33 +0800] [881469] [INFO] Started server process [881469]
[2023-05-06 20:05:33 +0800] [881468] [INFO] Started server process [881468]
[2023-05-06 20:05:33 +0800] [881469] [INFO] Waiting for application startup.
[2023-05-06 20:05:33 +0800] [881468] [INFO] Waiting for application startup.
[2023-05-06 20:05:33 +0800] [881469] [INFO] Application startup complete.
[2023-05-06 20:05:33 +0800] [881468] [INFO] Application startup complete.
[2023-05-06 20:06:14 +0800] [843359] [INFO] Handling signal: hup
[2023-05-06 20:06:14 +0800] [843359] [INFO] Hang up: Master
[2023-05-06 20:06:14 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-06 20:06:14 +0800] [881673] [INFO] Booting worker with pid: 881673
[2023-05-06 20:06:14 +0800] [881674] [INFO] Booting worker with pid: 881674
[2023-05-06 20:06:14 +0800] [881468] [INFO] Shutting down
[2023-05-06 20:06:14 +0800] [881469] [INFO] Shutting down
[2023-05-06 20:06:14 +0800] [881468] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 20:06:14 +0800] [881469] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-06 20:06:14 +0800] [881469] [INFO] Waiting for application shutdown.
[2023-05-06 20:06:14 +0800] [881468] [INFO] Waiting for application shutdown.
[2023-05-06 20:06:14 +0800] [881468] [INFO] Application shutdown complete.
[2023-05-06 20:06:14 +0800] [881469] [INFO] Application shutdown complete.
[2023-05-06 20:06:14 +0800] [881469] [INFO] Finished server process [881469]
[2023-05-06 20:06:14 +0800] [881468] [INFO] Finished server process [881468]
[2023-05-06 20:06:14 +0800] [881468] [INFO] Worker exiting (pid: 881468)
[2023-05-06 20:06:14 +0800] [881469] [INFO] Worker exiting (pid: 881469)
[2023-05-06 20:06:16 +0800] [881674] [INFO] Started server process [881674]
[2023-05-06 20:06:16 +0800] [881674] [INFO] Waiting for application startup.
[2023-05-06 20:06:16 +0800] [881674] [INFO] Application startup complete.
[2023-05-06 20:06:16 +0800] [881673] [INFO] Started server process [881673]
[2023-05-06 20:06:16 +0800] [881673] [INFO] Waiting for application startup.
[2023-05-06 20:06:16 +0800] [881673] [INFO] Application startup complete.
[2023-05-07 13:21:27 +0800] [881673] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 87, in get_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 172, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 4, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-07 13:34:43 +0800] [881674] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 108, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 74, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-07 16:24:33 +0800] [843359] [INFO] Handling signal: hup
[2023-05-07 16:24:33 +0800] [843359] [INFO] Hang up: Master
[2023-05-07 16:24:33 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-07 16:24:33 +0800] [1181555] [INFO] Booting worker with pid: 1181555
[2023-05-07 16:24:33 +0800] [1181556] [INFO] Booting worker with pid: 1181556
[2023-05-07 16:24:33 +0800] [881673] [INFO] Shutting down
[2023-05-07 16:24:33 +0800] [881673] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-07 16:24:33 +0800] [881674] [INFO] Shutting down
[2023-05-07 16:24:33 +0800] [881674] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-07 16:24:33 +0800] [881673] [INFO] Waiting for application shutdown.
[2023-05-07 16:24:33 +0800] [881673] [INFO] Application shutdown complete.
[2023-05-07 16:24:33 +0800] [881673] [INFO] Finished server process [881673]
[2023-05-07 16:24:33 +0800] [881673] [INFO] Worker exiting (pid: 881673)
[2023-05-07 16:24:33 +0800] [881674] [INFO] Waiting for application shutdown.
[2023-05-07 16:24:33 +0800] [881674] [INFO] Application shutdown complete.
[2023-05-07 16:24:33 +0800] [881674] [INFO] Finished server process [881674]
[2023-05-07 16:24:33 +0800] [881674] [INFO] Worker exiting (pid: 881674)
[2023-05-07 16:24:34 +0800] [843359] [WARNING] Worker with pid 881674 was terminated due to signal 15
[2023-05-07 16:24:34 +0800] [843359] [WARNING] Worker with pid 881673 was terminated due to signal 15
[2023-05-07 16:24:35 +0800] [1181555] [INFO] Started server process [1181555]
[2023-05-07 16:24:35 +0800] [1181556] [INFO] Started server process [1181556]
[2023-05-07 16:24:35 +0800] [1181556] [INFO] Waiting for application startup.
[2023-05-07 16:24:35 +0800] [1181555] [INFO] Waiting for application startup.
[2023-05-07 16:24:35 +0800] [1181556] [INFO] Application startup complete.
[2023-05-07 16:24:35 +0800] [1181555] [INFO] Application startup complete.
[2023-05-07 16:25:07 +0800] [843359] [INFO] Handling signal: hup
[2023-05-07 16:25:07 +0800] [843359] [INFO] Hang up: Master
[2023-05-07 16:25:07 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-07 16:25:07 +0800] [1181721] [INFO] Booting worker with pid: 1181721
[2023-05-07 16:25:07 +0800] [1181722] [INFO] Booting worker with pid: 1181722
[2023-05-07 16:25:07 +0800] [1181556] [INFO] Shutting down
[2023-05-07 16:25:07 +0800] [1181556] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-07 16:25:07 +0800] [1181555] [INFO] Shutting down
[2023-05-07 16:25:07 +0800] [1181555] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-07 16:25:07 +0800] [1181556] [INFO] Waiting for application shutdown.
[2023-05-07 16:25:07 +0800] [1181556] [INFO] Application shutdown complete.
[2023-05-07 16:25:07 +0800] [1181556] [INFO] Finished server process [1181556]
[2023-05-07 16:25:07 +0800] [1181556] [INFO] Worker exiting (pid: 1181556)
[2023-05-07 16:25:07 +0800] [1181555] [INFO] Waiting for application shutdown.
[2023-05-07 16:25:07 +0800] [1181555] [INFO] Application shutdown complete.
[2023-05-07 16:25:07 +0800] [1181555] [INFO] Finished server process [1181555]
[2023-05-07 16:25:07 +0800] [1181555] [INFO] Worker exiting (pid: 1181555)
[2023-05-07 16:25:08 +0800] [843359] [WARNING] Worker with pid 1181555 was terminated due to signal 15
[2023-05-07 16:25:09 +0800] [1181721] [INFO] Started server process [1181721]
[2023-05-07 16:25:09 +0800] [1181721] [INFO] Waiting for application startup.
[2023-05-07 16:25:09 +0800] [1181721] [INFO] Application startup complete.
[2023-05-07 16:25:09 +0800] [1181722] [INFO] Started server process [1181722]
[2023-05-07 16:25:09 +0800] [1181722] [INFO] Waiting for application startup.
[2023-05-07 16:25:09 +0800] [1181722] [INFO] Application startup complete.
[2023-05-07 22:39:14 +0800] [843359] [INFO] Handling signal: hup
[2023-05-07 22:39:14 +0800] [843359] [INFO] Hang up: Master
[2023-05-07 22:39:14 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-07 22:39:14 +0800] [1274692] [INFO] Booting worker with pid: 1274692
[2023-05-07 22:39:14 +0800] [1274693] [INFO] Booting worker with pid: 1274693
[2023-05-07 22:39:14 +0800] [1181722] [INFO] Shutting down
[2023-05-07 22:39:14 +0800] [1181722] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-07 22:39:14 +0800] [1181721] [INFO] Shutting down
[2023-05-07 22:39:14 +0800] [1181721] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-07 22:39:14 +0800] [1181722] [INFO] Waiting for application shutdown.
[2023-05-07 22:39:14 +0800] [1181722] [INFO] Application shutdown complete.
[2023-05-07 22:39:14 +0800] [1181722] [INFO] Finished server process [1181722]
[2023-05-07 22:39:14 +0800] [1181721] [INFO] Waiting for application shutdown.
[2023-05-07 22:39:14 +0800] [1181721] [INFO] Application shutdown complete.
[2023-05-07 22:39:14 +0800] [1181721] [INFO] Finished server process [1181721]
[2023-05-07 22:39:14 +0800] [1181722] [INFO] Worker exiting (pid: 1181722)
[2023-05-07 22:39:14 +0800] [1181721] [INFO] Worker exiting (pid: 1181721)
[2023-05-07 22:39:16 +0800] [1274693] [INFO] Started server process [1274693]
[2023-05-07 22:39:16 +0800] [1274693] [INFO] Waiting for application startup.
[2023-05-07 22:39:16 +0800] [1274693] [INFO] Application startup complete.
[2023-05-07 22:39:16 +0800] [1274692] [INFO] Started server process [1274692]
[2023-05-07 22:39:16 +0800] [1274692] [INFO] Waiting for application startup.
[2023-05-07 22:39:16 +0800] [1274692] [INFO] Application startup complete.
[2023-05-08 15:01:21 +0800] [1274692] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 122, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 224, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-08 18:27:03 +0800] [1274693] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 114, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 80, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-08 22:17:59 +0800] [843359] [INFO] Handling signal: hup
[2023-05-08 22:17:59 +0800] [843359] [INFO] Hang up: Master
[2023-05-08 22:17:59 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-08 22:17:59 +0800] [1628507] [INFO] Booting worker with pid: 1628507
[2023-05-08 22:17:59 +0800] [1628508] [INFO] Booting worker with pid: 1628508
[2023-05-08 22:17:59 +0800] [1274692] [INFO] Shutting down
[2023-05-08 22:17:59 +0800] [1274692] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-08 22:17:59 +0800] [1274693] [INFO] Shutting down
[2023-05-08 22:17:59 +0800] [1274693] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-08 22:17:59 +0800] [1274692] [INFO] Waiting for application shutdown.
[2023-05-08 22:17:59 +0800] [1274692] [INFO] Application shutdown complete.
[2023-05-08 22:17:59 +0800] [1274692] [INFO] Finished server process [1274692]
[2023-05-08 22:17:59 +0800] [1274692] [INFO] Worker exiting (pid: 1274692)
[2023-05-08 22:17:59 +0800] [1274693] [INFO] Waiting for application shutdown.
[2023-05-08 22:17:59 +0800] [1274693] [INFO] Application shutdown complete.
[2023-05-08 22:17:59 +0800] [1274693] [INFO] Finished server process [1274693]
[2023-05-08 22:17:59 +0800] [1274693] [INFO] Worker exiting (pid: 1274693)
[2023-05-08 22:18:00 +0800] [843359] [WARNING] Worker with pid 1274692 was terminated due to signal 15
[2023-05-08 22:18:01 +0800] [1628507] [INFO] Started server process [1628507]
[2023-05-08 22:18:01 +0800] [1628507] [INFO] Waiting for application startup.
[2023-05-08 22:18:01 +0800] [1628507] [INFO] Application startup complete.
[2023-05-08 22:18:01 +0800] [1628508] [INFO] Started server process [1628508]
[2023-05-08 22:18:01 +0800] [1628508] [INFO] Waiting for application startup.
[2023-05-08 22:18:01 +0800] [1628508] [INFO] Application startup complete.
[2023-05-09 10:53:31 +0800] [1628508] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 64, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 124, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 4, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-09 10:53:31 +0800] [1628507] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 71, in get_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 139, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 4, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-09 17:58:17 +0800] [843359] [INFO] Handling signal: hup
[2023-05-09 17:58:17 +0800] [843359] [INFO] Hang up: Master
[2023-05-09 17:58:17 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-09 17:58:17 +0800] [1920142] [INFO] Booting worker with pid: 1920142
[2023-05-09 17:58:17 +0800] [1920143] [INFO] Booting worker with pid: 1920143
[2023-05-09 17:58:17 +0800] [1628508] [INFO] Shutting down
[2023-05-09 17:58:17 +0800] [1628508] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-09 17:58:17 +0800] [1628507] [INFO] Shutting down
[2023-05-09 17:58:17 +0800] [1628507] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-09 17:58:18 +0800] [1628508] [INFO] Waiting for application shutdown.
[2023-05-09 17:58:18 +0800] [1628508] [INFO] Application shutdown complete.
[2023-05-09 17:58:18 +0800] [1628508] [INFO] Finished server process [1628508]
[2023-05-09 17:58:18 +0800] [1628507] [INFO] Waiting for application shutdown.
[2023-05-09 17:58:18 +0800] [1628507] [INFO] Application shutdown complete.
[2023-05-09 17:58:18 +0800] [1628507] [INFO] Finished server process [1628507]
[2023-05-09 17:58:18 +0800] [1628508] [INFO] Worker exiting (pid: 1628508)
[2023-05-09 17:58:18 +0800] [1628507] [INFO] Worker exiting (pid: 1628507)
[2023-05-09 17:58:18 +0800] [843359] [WARNING] Worker with pid 1628508 was terminated due to signal 15
[2023-05-09 17:58:19 +0800] [1920142] [INFO] Started server process [1920142]
[2023-05-09 17:58:19 +0800] [1920142] [INFO] Waiting for application startup.
[2023-05-09 17:58:19 +0800] [1920142] [INFO] Application startup complete.
[2023-05-09 17:58:19 +0800] [1920143] [INFO] Started server process [1920143]
[2023-05-09 17:58:19 +0800] [1920143] [INFO] Waiting for application startup.
[2023-05-09 17:58:19 +0800] [1920143] [INFO] Application startup complete.
[2023-05-09 19:59:07 +0800] [843359] [INFO] Handling signal: hup
[2023-05-09 19:59:07 +0800] [843359] [INFO] Hang up: Master
[2023-05-09 19:59:08 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-09 19:59:08 +0800] [1951323] [INFO] Booting worker with pid: 1951323
[2023-05-09 19:59:08 +0800] [1951324] [INFO] Booting worker with pid: 1951324
[2023-05-09 19:59:08 +0800] [1920142] [INFO] Shutting down
[2023-05-09 19:59:08 +0800] [1920143] [INFO] Shutting down
[2023-05-09 19:59:08 +0800] [1920142] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-09 19:59:08 +0800] [1920143] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-09 19:59:08 +0800] [1920142] [INFO] Waiting for application shutdown.
[2023-05-09 19:59:08 +0800] [1920143] [INFO] Waiting for application shutdown.
[2023-05-09 19:59:08 +0800] [1920142] [INFO] Application shutdown complete.
[2023-05-09 19:59:08 +0800] [1920143] [INFO] Application shutdown complete.
[2023-05-09 19:59:08 +0800] [1920143] [INFO] Finished server process [1920143]
[2023-05-09 19:59:08 +0800] [1920142] [INFO] Finished server process [1920142]
[2023-05-09 19:59:08 +0800] [1920142] [INFO] Worker exiting (pid: 1920142)
[2023-05-09 19:59:08 +0800] [1920143] [INFO] Worker exiting (pid: 1920143)
[2023-05-09 19:59:08 +0800] [843359] [WARNING] Worker with pid 1920143 was terminated due to signal 15
[2023-05-09 19:59:09 +0800] [1951323] [INFO] Started server process [1951323]
[2023-05-09 19:59:09 +0800] [1951324] [INFO] Started server process [1951324]
[2023-05-09 19:59:09 +0800] [1951324] [INFO] Waiting for application startup.
[2023-05-09 19:59:09 +0800] [1951323] [INFO] Waiting for application startup.
[2023-05-09 19:59:09 +0800] [1951324] [INFO] Application startup complete.
[2023-05-09 19:59:09 +0800] [1951323] [INFO] Application startup complete.
[2023-05-11 10:58:48 +0800] [1951323] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 121, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 226, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-12 22:35:37 +0800] [843359] [INFO] Handling signal: hup
[2023-05-12 22:35:37 +0800] [843359] [INFO] Hang up: Master
[2023-05-12 22:35:37 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-12 22:35:37 +0800] [3053015] [INFO] Booting worker with pid: 3053015
[2023-05-12 22:35:37 +0800] [3053016] [INFO] Booting worker with pid: 3053016
[2023-05-12 22:35:37 +0800] [1951324] [INFO] Shutting down
[2023-05-12 22:35:37 +0800] [1951324] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-12 22:35:37 +0800] [1951323] [INFO] Shutting down
[2023-05-12 22:35:37 +0800] [1951323] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-12 22:35:37 +0800] [1951324] [INFO] Waiting for application shutdown.
[2023-05-12 22:35:37 +0800] [1951324] [INFO] Application shutdown complete.
[2023-05-12 22:35:37 +0800] [1951324] [INFO] Finished server process [1951324]
[2023-05-12 22:35:37 +0800] [1951324] [INFO] Worker exiting (pid: 1951324)
[2023-05-12 22:35:37 +0800] [1951323] [INFO] Waiting for application shutdown.
[2023-05-12 22:35:37 +0800] [1951323] [INFO] Application shutdown complete.
[2023-05-12 22:35:37 +0800] [1951323] [INFO] Finished server process [1951323]
[2023-05-12 22:35:37 +0800] [1951323] [INFO] Worker exiting (pid: 1951323)
[2023-05-12 22:35:38 +0800] [843359] [WARNING] Worker with pid 1951323 was terminated due to signal 15
[2023-05-12 22:35:39 +0800] [3053016] [INFO] Started server process [3053016]
[2023-05-12 22:35:39 +0800] [3053016] [INFO] Waiting for application startup.
[2023-05-12 22:35:39 +0800] [3053016] [INFO] Application startup complete.
[2023-05-12 22:35:39 +0800] [3053015] [INFO] Started server process [3053015]
[2023-05-12 22:35:39 +0800] [3053015] [INFO] Waiting for application startup.
[2023-05-12 22:35:39 +0800] [3053015] [INFO] Application startup complete.
[2023-05-13 15:03:42 +0800] [3053015] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 105, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-13 15:03:43 +0800] [3053016] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-13 16:04:29 +0800] [843359] [INFO] Handling signal: hup
[2023-05-13 16:04:29 +0800] [843359] [INFO] Hang up: Master
[2023-05-13 16:04:29 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-13 16:04:29 +0800] [3316208] [INFO] Booting worker with pid: 3316208
[2023-05-13 16:04:29 +0800] [3316209] [INFO] Booting worker with pid: 3316209
[2023-05-13 16:04:29 +0800] [3053016] [INFO] Shutting down
[2023-05-13 16:04:29 +0800] [3053015] [INFO] Shutting down
[2023-05-13 16:04:29 +0800] [3053016] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-13 16:04:29 +0800] [3053015] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-13 16:04:30 +0800] [3053015] [INFO] Waiting for application shutdown.
[2023-05-13 16:04:30 +0800] [3053016] [INFO] Waiting for application shutdown.
[2023-05-13 16:04:30 +0800] [3053015] [INFO] Application shutdown complete.
[2023-05-13 16:04:30 +0800] [3053016] [INFO] Application shutdown complete.
[2023-05-13 16:04:30 +0800] [3053015] [INFO] Finished server process [3053015]
[2023-05-13 16:04:30 +0800] [3053016] [INFO] Finished server process [3053016]
[2023-05-13 16:04:30 +0800] [3053016] [INFO] Worker exiting (pid: 3053016)
[2023-05-13 16:04:30 +0800] [3053015] [INFO] Worker exiting (pid: 3053015)
[2023-05-13 16:04:30 +0800] [843359] [WARNING] Worker with pid 3053016 was terminated due to signal 15
[2023-05-13 16:04:30 +0800] [843359] [WARNING] Worker with pid 3053015 was terminated due to signal 15
[2023-05-13 16:04:31 +0800] [3316209] [INFO] Started server process [3316209]
[2023-05-13 16:04:31 +0800] [3316208] [INFO] Started server process [3316208]
[2023-05-13 16:04:31 +0800] [3316209] [INFO] Waiting for application startup.
[2023-05-13 16:04:31 +0800] [3316208] [INFO] Waiting for application startup.
[2023-05-13 16:04:31 +0800] [3316209] [INFO] Application startup complete.
[2023-05-13 16:04:31 +0800] [3316208] [INFO] Application startup complete.
[2023-05-14 10:53:24 +0800] [3316209] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-14 10:54:15 +0800] [3316208] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 76, in get_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-15 19:15:34 +0800] [843359] [INFO] Handling signal: hup
[2023-05-15 19:15:34 +0800] [843359] [INFO] Hang up: Master
[2023-05-15 19:15:34 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-15 19:15:34 +0800] [4113645] [INFO] Booting worker with pid: 4113645
[2023-05-15 19:15:34 +0800] [4113646] [INFO] Booting worker with pid: 4113646
[2023-05-15 19:15:34 +0800] [3316208] [INFO] Shutting down
[2023-05-15 19:15:34 +0800] [3316208] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-15 19:15:34 +0800] [3316209] [INFO] Shutting down
[2023-05-15 19:15:34 +0800] [3316209] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-15 19:15:34 +0800] [3316208] [INFO] Waiting for application shutdown.
[2023-05-15 19:15:34 +0800] [3316208] [INFO] Application shutdown complete.
[2023-05-15 19:15:34 +0800] [3316208] [INFO] Finished server process [3316208]
[2023-05-15 19:15:34 +0800] [3316208] [INFO] Worker exiting (pid: 3316208)
[2023-05-15 19:15:34 +0800] [3316209] [INFO] Waiting for application shutdown.
[2023-05-15 19:15:34 +0800] [3316209] [INFO] Application shutdown complete.
[2023-05-15 19:15:34 +0800] [3316209] [INFO] Finished server process [3316209]
[2023-05-15 19:15:34 +0800] [3316209] [INFO] Worker exiting (pid: 3316209)
[2023-05-15 19:15:36 +0800] [4113646] [INFO] Started server process [4113646]
[2023-05-15 19:15:36 +0800] [4113646] [INFO] Waiting for application startup.
[2023-05-15 19:15:36 +0800] [4113646] [INFO] Application startup complete.
[2023-05-15 19:15:36 +0800] [4113645] [INFO] Started server process [4113645]
[2023-05-15 19:15:36 +0800] [4113645] [INFO] Waiting for application startup.
[2023-05-15 19:15:36 +0800] [4113645] [INFO] Application startup complete.
[2023-05-16 20:42:17 +0800] [4113645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 85, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-16 20:42:17 +0800] [4113645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 219, in download_diff_KEGG_enrichment_data
    df.columns = ["cluster", "KEGG_id", "description", "gene_ratio", "bg_ratio", "p_value", "p_adjust", "q_value",
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 6002, in __setattr__
    return object.__setattr__(self, name, value)
  File "pandas/_libs/properties.pyx", line 69, in pandas._libs.properties.AxisProperty.__set__
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 730, in _set_axis
    self._mgr.set_axis(axis, labels)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/internals/managers.py", line 225, in set_axis
    self._validate_set_axis(axis, new_labels)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/internals/base.py", line 70, in _validate_set_axis
    raise ValueError(
ValueError: Length mismatch: Expected axis has 9 elements, new values have 10 elements
[2023-05-16 20:42:19 +0800] [4113646] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 246, in download_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 85, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-16 20:44:10 +0800] [843359] [WARNING] Worker with pid 4113645 was terminated due to signal 9
[2023-05-16 20:44:10 +0800] [300659] [INFO] Booting worker with pid: 300659
[2023-05-16 20:44:16 +0800] [300659] [INFO] Started server process [300659]
[2023-05-16 20:44:16 +0800] [300659] [INFO] Waiting for application startup.
[2023-05-16 20:44:16 +0800] [300659] [INFO] Application startup complete.
[2023-05-16 20:48:42 +0800] [4113646] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 697, in recv
    out = self.in_buffer.read(nbytes, self.timeout)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/buffered_pipe.py", line 154, in read
    raise PipeTimeout()
paramiko.buffered_pipe.PipeTimeout

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 495, in _recv_file
    data = chan.recv(buff_size)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 699, in recv
    raise socket.timeout()
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 350, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/DBA/dba_DBA_obj.RData',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 436, in _recv_all
    command[code](msg[1:])
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 513, in _recv_file
    raise SCPException('Error receiving, socket.timeout')
scp.SCPException: Error receiving, socket.timeout
[2023-05-17 02:25:50 +0800] [300659] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 219, in download_diff_KEGG_enrichment_data
    df.columns = ["cluster", "KEGG_id", "description", "gene_ratio", "bg_ratio", "p_value", "p_adjust", "q_value",
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 6002, in __setattr__
    return object.__setattr__(self, name, value)
  File "pandas/_libs/properties.pyx", line 69, in pandas._libs.properties.AxisProperty.__set__
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 730, in _set_axis
    self._mgr.set_axis(axis, labels)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/internals/managers.py", line 225, in set_axis
    self._validate_set_axis(axis, new_labels)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/internals/base.py", line 70, in _validate_set_axis
    raise ValueError(
ValueError: Length mismatch: Expected axis has 9 elements, new values have 10 elements
[2023-05-17 11:37:40 +0800] [300659] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 209, in download_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 86, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-17 11:38:28 +0800] [300659] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 219, in download_diff_KEGG_enrichment_data
    df.columns = ["cluster", "KEGG_id", "description", "gene_ratio", "bg_ratio", "p_value", "p_adjust", "q_value",
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 6002, in __setattr__
    return object.__setattr__(self, name, value)
  File "pandas/_libs/properties.pyx", line 69, in pandas._libs.properties.AxisProperty.__set__
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 730, in _set_axis
    self._mgr.set_axis(axis, labels)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/internals/managers.py", line 225, in set_axis
    self._validate_set_axis(axis, new_labels)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/internals/base.py", line 70, in _validate_set_axis
    raise ValueError(
ValueError: Length mismatch: Expected axis has 9 elements, new values have 10 elements
[2023-05-17 11:51:17 +0800] [843359] [INFO] Handling signal: hup
[2023-05-17 11:51:17 +0800] [843359] [INFO] Hang up: Master
[2023-05-17 11:51:17 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 2
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 3600
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-17 11:51:17 +0800] [528297] [INFO] Booting worker with pid: 528297
[2023-05-17 11:51:17 +0800] [528298] [INFO] Booting worker with pid: 528298
[2023-05-17 11:51:17 +0800] [300659] [INFO] Shutting down
[2023-05-17 11:51:17 +0800] [300659] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-17 11:51:17 +0800] [4113646] [INFO] Shutting down
[2023-05-17 11:51:17 +0800] [4113646] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-17 11:51:17 +0800] [300659] [INFO] Waiting for application shutdown.
[2023-05-17 11:51:17 +0800] [4113646] [INFO] Waiting for application shutdown.
[2023-05-17 11:51:17 +0800] [300659] [INFO] Application shutdown complete.
[2023-05-17 11:51:17 +0800] [4113646] [INFO] Application shutdown complete.
[2023-05-17 11:51:17 +0800] [300659] [INFO] Finished server process [300659]
[2023-05-17 11:51:17 +0800] [4113646] [INFO] Finished server process [4113646]
[2023-05-17 11:51:17 +0800] [300659] [INFO] Worker exiting (pid: 300659)
[2023-05-17 11:51:17 +0800] [4113646] [INFO] Worker exiting (pid: 4113646)
[2023-05-17 11:51:18 +0800] [843359] [WARNING] Worker with pid 4113646 was terminated due to signal 15
[2023-05-17 11:51:18 +0800] [843359] [WARNING] Worker with pid 300659 was terminated due to signal 15
[2023-05-17 11:51:20 +0800] [528298] [INFO] Started server process [528298]
[2023-05-17 11:51:20 +0800] [528298] [INFO] Waiting for application startup.
[2023-05-17 11:51:20 +0800] [528298] [INFO] Application startup complete.
[2023-05-17 11:51:20 +0800] [528297] [INFO] Started server process [528297]
[2023-05-17 11:51:20 +0800] [528297] [INFO] Waiting for application startup.
[2023-05-17 11:51:20 +0800] [528297] [INFO] Application startup complete.
[2023-05-19 04:18:25 +0800] [528297] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-19 04:18:27 +0800] [528298] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 227, in download_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-19 04:52:31 +0800] [843359] [CRITICAL] WORKER TIMEOUT (pid:528298)
[2023-05-19 04:54:15 +0800] [843359] [CRITICAL] WORKER TIMEOUT (pid:528297)
[2023-05-19 04:55:13 +0800] [843359] [WARNING] Worker with pid 528298 was terminated due to signal 9
[2023-05-19 04:55:13 +0800] [1129670] [INFO] Booting worker with pid: 1129670
[2023-05-19 04:55:13 +0800] [843359] [WARNING] Worker with pid 528297 was terminated due to signal 9
[2023-05-19 04:55:13 +0800] [1129739] [INFO] Booting worker with pid: 1129739
[2023-05-19 04:55:16 +0800] [1129739] [INFO] Started server process [1129739]
[2023-05-19 04:55:16 +0800] [1129670] [INFO] Started server process [1129670]
[2023-05-19 04:55:16 +0800] [1129670] [INFO] Waiting for application startup.
[2023-05-19 04:55:16 +0800] [1129739] [INFO] Waiting for application startup.
[2023-05-19 04:55:16 +0800] [1129739] [INFO] Application startup complete.
[2023-05-19 04:55:16 +0800] [1129670] [INFO] Application startup complete.
[2023-05-19 12:06:05 +0800] [843359] [INFO] Handling signal: hup
[2023-05-19 12:06:05 +0800] [843359] [INFO] Hang up: Master
[2023-05-19 12:06:05 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-19 12:06:05 +0800] [1237555] [INFO] Booting worker with pid: 1237555
[2023-05-19 12:06:05 +0800] [843359] [DEBUG] 4 workers
[2023-05-19 12:06:05 +0800] [1237556] [INFO] Booting worker with pid: 1237556
[2023-05-19 12:06:05 +0800] [1237557] [INFO] Booting worker with pid: 1237557
[2023-05-19 12:06:05 +0800] [1237558] [INFO] Booting worker with pid: 1237558
[2023-05-19 12:06:05 +0800] [1129670] [INFO] Shutting down
[2023-05-19 12:06:05 +0800] [1129670] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-19 12:06:05 +0800] [1129739] [INFO] Shutting down
[2023-05-19 12:06:05 +0800] [1129739] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-19 12:06:05 +0800] [1129670] [INFO] Waiting for application shutdown.
[2023-05-19 12:06:05 +0800] [1129670] [INFO] Application shutdown complete.
[2023-05-19 12:06:05 +0800] [1129670] [INFO] Finished server process [1129670]
[2023-05-19 12:06:05 +0800] [1129670] [INFO] Worker exiting (pid: 1129670)
[2023-05-19 12:06:05 +0800] [1129739] [INFO] Waiting for application shutdown.
[2023-05-19 12:06:05 +0800] [1129739] [INFO] Application shutdown complete.
[2023-05-19 12:06:05 +0800] [1129739] [INFO] Finished server process [1129739]
[2023-05-19 12:06:05 +0800] [1129739] [INFO] Worker exiting (pid: 1129739)
[2023-05-19 12:06:06 +0800] [843359] [WARNING] Worker with pid 1129670 was terminated due to signal 15
[2023-05-19 12:06:06 +0800] [843359] [WARNING] Worker with pid 1129739 was terminated due to signal 15
[2023-05-19 12:06:08 +0800] [1237558] [INFO] Started server process [1237558]
[2023-05-19 12:06:08 +0800] [1237558] [INFO] Waiting for application startup.
[2023-05-19 12:06:08 +0800] [1237558] [INFO] Application startup complete.
[2023-05-19 12:06:08 +0800] [1237557] [INFO] Started server process [1237557]
[2023-05-19 12:06:08 +0800] [1237557] [INFO] Waiting for application startup.
[2023-05-19 12:06:08 +0800] [1237557] [INFO] Application startup complete.
[2023-05-19 12:06:08 +0800] [1237556] [INFO] Started server process [1237556]
[2023-05-19 12:06:08 +0800] [1237556] [INFO] Waiting for application startup.
[2023-05-19 12:06:08 +0800] [1237556] [INFO] Application startup complete.
[2023-05-19 12:06:08 +0800] [1237555] [INFO] Started server process [1237555]
[2023-05-19 12:06:08 +0800] [1237555] [INFO] Waiting for application startup.
[2023-05-19 12:06:08 +0800] [1237555] [INFO] Application startup complete.
[2023-05-19 12:09:32 +0800] [1237555] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 201, in download_diff_GO_enrichment_data
    df.columns = ["GO_id", "description", "gene_ratio", "bg_ratio", "p_value", "p_adjust", "q_value", "gene_ids",
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 6002, in __setattr__
    return object.__setattr__(self, name, value)
  File "pandas/_libs/properties.pyx", line 69, in pandas._libs.properties.AxisProperty.__set__
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/generic.py", line 730, in _set_axis
    self._mgr.set_axis(axis, labels)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/internals/managers.py", line 225, in set_axis
    self._validate_set_axis(axis, new_labels)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pandas/core/internals/base.py", line 70, in _validate_set_axis
    raise ValueError(
ValueError: Length mismatch: Expected axis has 0 elements, new values have 9 elements
[2023-05-19 12:26:44 +0800] [843359] [WARNING] Worker with pid 1237555 was terminated due to signal 9
[2023-05-19 12:26:44 +0800] [1240110] [INFO] Booting worker with pid: 1240110
[2023-05-19 12:26:47 +0800] [1240110] [INFO] Started server process [1240110]
[2023-05-19 12:26:47 +0800] [1240110] [INFO] Waiting for application startup.
[2023-05-19 12:26:47 +0800] [1240110] [INFO] Application startup complete.
[2023-05-19 13:14:13 +0800] [843359] [INFO] Handling signal: hup
[2023-05-19 13:14:13 +0800] [843359] [INFO] Hang up: Master
[2023-05-19 13:14:13 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-19 13:14:13 +0800] [1251931] [INFO] Booting worker with pid: 1251931
[2023-05-19 13:14:13 +0800] [1251932] [INFO] Booting worker with pid: 1251932
[2023-05-19 13:14:13 +0800] [1251933] [INFO] Booting worker with pid: 1251933
[2023-05-19 13:14:13 +0800] [1251934] [INFO] Booting worker with pid: 1251934
[2023-05-19 13:14:13 +0800] [1237556] [INFO] Shutting down
[2023-05-19 13:14:13 +0800] [1237556] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-19 13:14:13 +0800] [1240110] [INFO] Shutting down
[2023-05-19 13:14:13 +0800] [1240110] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-19 13:14:13 +0800] [1237557] [INFO] Shutting down
[2023-05-19 13:14:13 +0800] [1237557] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-19 13:14:13 +0800] [1237558] [INFO] Shutting down
[2023-05-19 13:14:13 +0800] [1237558] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-19 13:14:13 +0800] [1237556] [INFO] Waiting for application shutdown.
[2023-05-19 13:14:13 +0800] [1237556] [INFO] Application shutdown complete.
[2023-05-19 13:14:13 +0800] [1237556] [INFO] Finished server process [1237556]
[2023-05-19 13:14:13 +0800] [1237556] [INFO] Worker exiting (pid: 1237556)
[2023-05-19 13:14:13 +0800] [1240110] [INFO] Waiting for application shutdown.
[2023-05-19 13:14:13 +0800] [1240110] [INFO] Application shutdown complete.
[2023-05-19 13:14:13 +0800] [1240110] [INFO] Finished server process [1240110]
[2023-05-19 13:14:13 +0800] [1240110] [INFO] Worker exiting (pid: 1240110)
[2023-05-19 13:14:13 +0800] [1237557] [INFO] Waiting for application shutdown.
[2023-05-19 13:14:13 +0800] [1237557] [INFO] Application shutdown complete.
[2023-05-19 13:14:13 +0800] [1237557] [INFO] Finished server process [1237557]
[2023-05-19 13:14:13 +0800] [1237557] [INFO] Worker exiting (pid: 1237557)
[2023-05-19 13:14:13 +0800] [1237558] [INFO] Waiting for application shutdown.
[2023-05-19 13:14:13 +0800] [1237558] [INFO] Application shutdown complete.
[2023-05-19 13:14:13 +0800] [1237558] [INFO] Finished server process [1237558]
[2023-05-19 13:14:13 +0800] [1237558] [INFO] Worker exiting (pid: 1237558)
[2023-05-19 13:14:14 +0800] [843359] [WARNING] Worker with pid 1237556 was terminated due to signal 15
[2023-05-19 13:14:14 +0800] [843359] [WARNING] Worker with pid 1237557 was terminated due to signal 15
[2023-05-19 13:14:14 +0800] [843359] [WARNING] Worker with pid 1240110 was terminated due to signal 15
[2023-05-19 13:14:14 +0800] [843359] [WARNING] Worker with pid 1237558 was terminated due to signal 15
[2023-05-19 13:14:17 +0800] [1251932] [INFO] Started server process [1251932]
[2023-05-19 13:14:17 +0800] [1251932] [INFO] Waiting for application startup.
[2023-05-19 13:14:17 +0800] [1251932] [INFO] Application startup complete.
[2023-05-19 13:14:17 +0800] [1251934] [INFO] Started server process [1251934]
[2023-05-19 13:14:17 +0800] [1251934] [INFO] Waiting for application startup.
[2023-05-19 13:14:17 +0800] [1251934] [INFO] Application startup complete.
[2023-05-19 13:14:17 +0800] [1251933] [INFO] Started server process [1251933]
[2023-05-19 13:14:17 +0800] [1251933] [INFO] Waiting for application startup.
[2023-05-19 13:14:17 +0800] [1251933] [INFO] Application startup complete.
[2023-05-19 13:14:17 +0800] [1251931] [INFO] Started server process [1251931]
[2023-05-19 13:14:17 +0800] [1251931] [INFO] Waiting for application startup.
[2023-05-19 13:14:17 +0800] [1251931] [INFO] Application startup complete.
[2023-05-20 06:22:17 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 3, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-20 06:22:17 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 191, in download_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 3, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-20 11:43:39 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 56, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-20 11:43:39 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 76, in get_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-20 16:10:00 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:14:56 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:16:34 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:18:10 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:19:30 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:20:50 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:22:10 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:23:30 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:24:50 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:26:10 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:27:30 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:28:50 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:30:10 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:31:30 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:32:50 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:34:10 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:35:30 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:36:50 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:38:10 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:39:30 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:40:50 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:42:11 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:43:30 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:44:51 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:46:12 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-20 16:47:32 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 351, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 435, in _recv_all
    raise SCPException(asunicode(msg[1:]))
scp.SCPException: scp: /data/cabins/wshao/ATAC-seq/data/MSL3_TDF/peak/narrowPeaks.tar.gz: No such file or directory
[2023-05-21 08:09:40 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 7, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-21 08:09:40 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 191, in download_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 7, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-21 08:09:40 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 303, in transfer_files
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 7, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-21 08:09:40 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 7, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-22 11:21:43 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 45, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-22 11:21:43 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 56, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-22 11:21:43 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-22 11:21:43 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-22 20:05:21 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-23 05:25:20 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 10, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-23 05:25:21 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 209, in download_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 10, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-23 05:25:21 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 227, in download_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 10, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-23 05:25:21 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 246, in download_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 10, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-24 20:53:12 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-24 20:53:12 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-24 20:54:25 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-24 20:54:26 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 45, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-25 16:47:10 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-25 16:47:10 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-25 16:47:10 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 45, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-25 16:47:10 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-25 22:13:42 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-26 17:11:14 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 22, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-26 17:11:15 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 227, in download_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 22, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-26 17:16:41 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 22, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-26 21:27:20 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-27 17:19:30 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-27 17:19:30 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-27 17:19:30 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 56, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-27 17:19:30 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 76, in get_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-28 10:28:52 +0800] [1251932] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-28 10:28:52 +0800] [1251931] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-28 10:28:52 +0800] [1251934] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-28 10:28:53 +0800] [1251933] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-29 16:34:18 +0800] [843359] [INFO] Handling signal: hup
[2023-05-29 16:34:18 +0800] [843359] [INFO] Hang up: Master
[2023-05-29 16:34:18 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-29 16:34:18 +0800] [678891] [INFO] Booting worker with pid: 678891
[2023-05-29 16:34:18 +0800] [678892] [INFO] Booting worker with pid: 678892
[2023-05-29 16:34:18 +0800] [678893] [INFO] Booting worker with pid: 678893
[2023-05-29 16:34:18 +0800] [678894] [INFO] Booting worker with pid: 678894
[2023-05-29 16:34:18 +0800] [1251931] [INFO] Shutting down
[2023-05-29 16:34:18 +0800] [1251934] [INFO] Shutting down
[2023-05-29 16:34:18 +0800] [1251931] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-29 16:34:18 +0800] [1251934] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-29 16:34:18 +0800] [1251932] [INFO] Shutting down
[2023-05-29 16:34:18 +0800] [1251932] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-29 16:34:19 +0800] [1251933] [INFO] Shutting down
[2023-05-29 16:34:19 +0800] [1251933] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-29 16:34:19 +0800] [1251934] [INFO] Waiting for application shutdown.
[2023-05-29 16:34:19 +0800] [1251931] [INFO] Waiting for application shutdown.
[2023-05-29 16:34:19 +0800] [1251931] [INFO] Application shutdown complete.
[2023-05-29 16:34:19 +0800] [1251931] [INFO] Finished server process [1251931]
[2023-05-29 16:34:19 +0800] [1251934] [INFO] Application shutdown complete.
[2023-05-29 16:34:19 +0800] [1251934] [INFO] Finished server process [1251934]
[2023-05-29 16:34:19 +0800] [1251934] [INFO] Worker exiting (pid: 1251934)
[2023-05-29 16:34:19 +0800] [1251931] [INFO] Worker exiting (pid: 1251931)
[2023-05-29 16:34:19 +0800] [1251932] [INFO] Waiting for application shutdown.
[2023-05-29 16:34:19 +0800] [1251932] [INFO] Application shutdown complete.
[2023-05-29 16:34:19 +0800] [1251932] [INFO] Finished server process [1251932]
[2023-05-29 16:34:19 +0800] [1251932] [INFO] Worker exiting (pid: 1251932)
[2023-05-29 16:34:19 +0800] [1251933] [INFO] Waiting for application shutdown.
[2023-05-29 16:34:19 +0800] [1251933] [INFO] Application shutdown complete.
[2023-05-29 16:34:19 +0800] [1251933] [INFO] Finished server process [1251933]
[2023-05-29 16:34:19 +0800] [1251933] [INFO] Worker exiting (pid: 1251933)
[2023-05-29 16:34:19 +0800] [843359] [WARNING] Worker with pid 1251932 was terminated due to signal 15
[2023-05-29 16:34:19 +0800] [843359] [WARNING] Worker with pid 1251934 was terminated due to signal 15
[2023-05-29 16:34:20 +0800] [843359] [WARNING] Worker with pid 1251933 was terminated due to signal 15
[2023-05-29 16:34:20 +0800] [843359] [WARNING] Worker with pid 1251931 was terminated due to signal 15
[2023-05-29 16:34:27 +0800] [678894] [INFO] Started server process [678894]
[2023-05-29 16:34:27 +0800] [678892] [INFO] Started server process [678892]
[2023-05-29 16:34:27 +0800] [678894] [INFO] Waiting for application startup.
[2023-05-29 16:34:27 +0800] [678892] [INFO] Waiting for application startup.
[2023-05-29 16:34:27 +0800] [678892] [INFO] Application startup complete.
[2023-05-29 16:34:27 +0800] [678894] [INFO] Application startup complete.
[2023-05-29 16:34:27 +0800] [678893] [INFO] Started server process [678893]
[2023-05-29 16:34:27 +0800] [678893] [INFO] Waiting for application startup.
[2023-05-29 16:34:27 +0800] [678893] [INFO] Application startup complete.
[2023-05-29 16:34:27 +0800] [678891] [INFO] Started server process [678891]
[2023-05-29 16:34:27 +0800] [678891] [INFO] Waiting for application startup.
[2023-05-29 16:34:27 +0800] [678891] [INFO] Application startup complete.
[2023-05-30 15:17:08 +0800] [678894] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-30 15:17:08 +0800] [678891] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-30 15:17:09 +0800] [678892] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 83, in get_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-30 15:17:09 +0800] [678893] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 116, in get_treat_peak_data
    data, records_sum = crud.get_treat_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 536, in get_treat_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT treat_peaks.id AS treat_peaks_id, treat_peaks.peak_id AS treat_peaks_peak_id, treat_peaks.chr AS treat_peaks_chr, treat_peaks.start AS treat_peaks_start, treat_peaks.end AS treat_peaks_end, treat_peaks.width AS treat_peaks_width, treat_peaks.score AS treat_peaks_score, treat_peaks.signal_value AS treat_peaks_signal_value, treat_peaks.log_p_value AS treat_peaks_log_p_value, treat_peaks.log_q_value AS treat_peaks_log_q_value, treat_peaks.peak_offset AS treat_peaks_peak_offset, treat_peaks.annotation AS treat_peaks_annotation, treat_peaks.gene_chr AS treat_peaks_gene_chr, treat_peaks.gene_start AS treat_peaks_gene_start, treat_peaks.gene_end AS treat_peaks_gene_end, treat_peaks.gene_len AS treat_peaks_gene_len, treat_peaks.gene_strand AS treat_peaks_gene_strand, treat_peaks.gene_id AS treat_peaks_gene_id, treat_peaks.transcript_id AS treat_peaks_transcript_id, treat_peaks.distance_to_tss AS treat_peaks_distance_to_tss 
FROM treat_peaks 
WHERE treat_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-30 21:42:41 +0800] [843359] [INFO] Handling signal: hup
[2023-05-30 21:42:41 +0800] [843359] [INFO] Hang up: Master
[2023-05-30 21:42:41 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-05-30 21:42:41 +0800] [1110508] [INFO] Booting worker with pid: 1110508
[2023-05-30 21:42:41 +0800] [1110509] [INFO] Booting worker with pid: 1110509
[2023-05-30 21:42:41 +0800] [1110510] [INFO] Booting worker with pid: 1110510
[2023-05-30 21:42:41 +0800] [678894] [INFO] Shutting down
[2023-05-30 21:42:41 +0800] [678894] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-30 21:42:41 +0800] [678892] [INFO] Shutting down
[2023-05-30 21:42:41 +0800] [678892] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-30 21:42:41 +0800] [1110511] [INFO] Booting worker with pid: 1110511
[2023-05-30 21:42:41 +0800] [678891] [INFO] Shutting down
[2023-05-30 21:42:41 +0800] [678891] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-30 21:42:41 +0800] [678893] [INFO] Shutting down
[2023-05-30 21:42:41 +0800] [678893] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-05-30 21:42:41 +0800] [678894] [INFO] Waiting for application shutdown.
[2023-05-30 21:42:41 +0800] [678894] [INFO] Application shutdown complete.
[2023-05-30 21:42:41 +0800] [678894] [INFO] Finished server process [678894]
[2023-05-30 21:42:41 +0800] [678894] [INFO] Worker exiting (pid: 678894)
[2023-05-30 21:42:41 +0800] [678892] [INFO] Waiting for application shutdown.
[2023-05-30 21:42:41 +0800] [678892] [INFO] Application shutdown complete.
[2023-05-30 21:42:41 +0800] [678892] [INFO] Finished server process [678892]
[2023-05-30 21:42:41 +0800] [678892] [INFO] Worker exiting (pid: 678892)
[2023-05-30 21:42:41 +0800] [678891] [INFO] Waiting for application shutdown.
[2023-05-30 21:42:41 +0800] [678891] [INFO] Application shutdown complete.
[2023-05-30 21:42:41 +0800] [678891] [INFO] Finished server process [678891]
[2023-05-30 21:42:41 +0800] [678891] [INFO] Worker exiting (pid: 678891)
[2023-05-30 21:42:42 +0800] [678893] [INFO] Waiting for application shutdown.
[2023-05-30 21:42:42 +0800] [678893] [INFO] Application shutdown complete.
[2023-05-30 21:42:42 +0800] [678893] [INFO] Finished server process [678893]
[2023-05-30 21:42:42 +0800] [678893] [INFO] Worker exiting (pid: 678893)
[2023-05-30 21:42:42 +0800] [843359] [WARNING] Worker with pid 678892 was terminated due to signal 15
[2023-05-30 21:42:42 +0800] [843359] [WARNING] Worker with pid 678891 was terminated due to signal 15
[2023-05-30 21:42:42 +0800] [843359] [WARNING] Worker with pid 678894 was terminated due to signal 15
[2023-05-30 21:42:42 +0800] [843359] [WARNING] Worker with pid 678893 was terminated due to signal 15
[2023-05-30 21:42:46 +0800] [1110511] [INFO] Started server process [1110511]
[2023-05-30 21:42:46 +0800] [1110509] [INFO] Started server process [1110509]
[2023-05-30 21:42:46 +0800] [1110509] [INFO] Waiting for application startup.
[2023-05-30 21:42:46 +0800] [1110511] [INFO] Waiting for application startup.
[2023-05-30 21:42:46 +0800] [1110511] [INFO] Application startup complete.
[2023-05-30 21:42:46 +0800] [1110509] [INFO] Application startup complete.
[2023-05-30 21:42:46 +0800] [1110510] [INFO] Started server process [1110510]
[2023-05-30 21:42:46 +0800] [1110508] [INFO] Started server process [1110508]
[2023-05-30 21:42:46 +0800] [1110508] [INFO] Waiting for application startup.
[2023-05-30 21:42:46 +0800] [1110510] [INFO] Waiting for application startup.
[2023-05-30 21:42:46 +0800] [1110510] [INFO] Application startup complete.
[2023-05-30 21:42:46 +0800] [1110508] [INFO] Application startup complete.
[2023-05-31 10:37:10 +0800] [1110511] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-31 10:37:10 +0800] [1110508] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-31 10:37:10 +0800] [1110510] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-31 10:37:11 +0800] [1110509] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-31 21:02:20 +0800] [1110511] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-31 21:02:20 +0800] [1110508] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-31 21:02:20 +0800] [1110510] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-05-31 21:02:20 +0800] [1110509] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 56, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-01 22:41:05 +0800] [1110508] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-01 22:41:05 +0800] [1110511] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-01 22:41:05 +0800] [1110510] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 10, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-01 22:41:08 +0800] [1110509] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-02 13:59:25 +0800] [1110510] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 45, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 21, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-02 13:59:25 +0800] [1110508] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 56, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 21, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-02 13:59:25 +0800] [1110511] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 90, in get_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 21, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-02 13:59:25 +0800] [1110509] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 103, in get_ctrl_peak_data
    data, records_sum = crud.get_ctrl_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 409, in get_ctrl_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT ctrl_peaks.id AS ctrl_peaks_id, ctrl_peaks.peak_id AS ctrl_peaks_peak_id, ctrl_peaks.chr AS ctrl_peaks_chr, ctrl_peaks.start AS ctrl_peaks_start, ctrl_peaks.end AS ctrl_peaks_end, ctrl_peaks.width AS ctrl_peaks_width, ctrl_peaks.score AS ctrl_peaks_score, ctrl_peaks.signal_value AS ctrl_peaks_signal_value, ctrl_peaks.log_p_value AS ctrl_peaks_log_p_value, ctrl_peaks.log_q_value AS ctrl_peaks_log_q_value, ctrl_peaks.peak_offset AS ctrl_peaks_peak_offset, ctrl_peaks.annotation AS ctrl_peaks_annotation, ctrl_peaks.gene_chr AS ctrl_peaks_gene_chr, ctrl_peaks.gene_start AS ctrl_peaks_gene_start, ctrl_peaks.gene_end AS ctrl_peaks_gene_end, ctrl_peaks.gene_len AS ctrl_peaks_gene_len, ctrl_peaks.gene_strand AS ctrl_peaks_gene_strand, ctrl_peaks.gene_id AS ctrl_peaks_gene_id, ctrl_peaks.transcript_id AS ctrl_peaks_transcript_id, ctrl_peaks.distance_to_tss AS ctrl_peaks_distance_to_tss 
FROM ctrl_peaks 
WHERE ctrl_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 21, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-03 11:43:48 +0800] [1110508] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-03 11:43:48 +0800] [1110510] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-03 12:02:38 +0800] [1110509] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 145, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-03 12:02:54 +0800] [1110511] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 145, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-04 09:43:22 +0800] [1110508] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 145, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-04 09:43:30 +0800] [1110511] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 45, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-04 09:43:30 +0800] [1110509] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-04 09:43:30 +0800] [1110510] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-04 20:13:59 +0800] [1110508] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-04 20:13:59 +0800] [1110510] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-04 20:14:00 +0800] [1110511] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 56, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 18, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-05 17:32:05 +0800] [843359] [INFO] Handling signal: hup
[2023-06-05 17:32:05 +0800] [843359] [INFO] Hang up: Master
[2023-06-05 17:32:05 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-05 17:32:05 +0800] [3178366] [INFO] Booting worker with pid: 3178366
[2023-06-05 17:32:05 +0800] [3178367] [INFO] Booting worker with pid: 3178367
[2023-06-05 17:32:05 +0800] [3178368] [INFO] Booting worker with pid: 3178368
[2023-06-05 17:32:05 +0800] [3178369] [INFO] Booting worker with pid: 3178369
[2023-06-05 17:32:05 +0800] [1110511] [INFO] Shutting down
[2023-06-05 17:32:05 +0800] [1110509] [INFO] Shutting down
[2023-06-05 17:32:05 +0800] [1110511] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-05 17:32:05 +0800] [1110509] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-05 17:32:05 +0800] [1110508] [INFO] Shutting down
[2023-06-05 17:32:05 +0800] [1110508] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-05 17:32:05 +0800] [1110510] [INFO] Shutting down
[2023-06-05 17:32:05 +0800] [1110510] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-05 17:32:05 +0800] [1110511] [INFO] Waiting for application shutdown.
[2023-06-05 17:32:05 +0800] [1110509] [INFO] Waiting for application shutdown.
[2023-06-05 17:32:05 +0800] [1110511] [INFO] Application shutdown complete.
[2023-06-05 17:32:05 +0800] [1110511] [INFO] Finished server process [1110511]
[2023-06-05 17:32:05 +0800] [1110509] [INFO] Application shutdown complete.
[2023-06-05 17:32:05 +0800] [1110509] [INFO] Finished server process [1110509]
[2023-06-05 17:32:05 +0800] [1110509] [INFO] Worker exiting (pid: 1110509)
[2023-06-05 17:32:05 +0800] [1110511] [INFO] Worker exiting (pid: 1110511)
[2023-06-05 17:32:05 +0800] [1110508] [INFO] Waiting for application shutdown.
[2023-06-05 17:32:05 +0800] [1110508] [INFO] Application shutdown complete.
[2023-06-05 17:32:05 +0800] [1110508] [INFO] Finished server process [1110508]
[2023-06-05 17:32:05 +0800] [1110508] [INFO] Worker exiting (pid: 1110508)
[2023-06-05 17:32:05 +0800] [1110510] [INFO] Waiting for application shutdown.
[2023-06-05 17:32:05 +0800] [1110510] [INFO] Application shutdown complete.
[2023-06-05 17:32:05 +0800] [1110510] [INFO] Finished server process [1110510]
[2023-06-05 17:32:05 +0800] [1110510] [INFO] Worker exiting (pid: 1110510)
[2023-06-05 17:32:06 +0800] [843359] [WARNING] Worker with pid 1110508 was terminated due to signal 15
[2023-06-05 17:32:06 +0800] [843359] [WARNING] Worker with pid 1110509 was terminated due to signal 15
[2023-06-05 17:32:06 +0800] [843359] [WARNING] Worker with pid 1110510 was terminated due to signal 15
[2023-06-05 17:32:06 +0800] [843359] [WARNING] Worker with pid 1110511 was terminated due to signal 15
[2023-06-05 17:32:12 +0800] [3178367] [INFO] Started server process [3178367]
[2023-06-05 17:32:12 +0800] [3178369] [INFO] Started server process [3178369]
[2023-06-05 17:32:12 +0800] [3178367] [INFO] Waiting for application startup.
[2023-06-05 17:32:12 +0800] [3178369] [INFO] Waiting for application startup.
[2023-06-05 17:32:12 +0800] [3178369] [INFO] Application startup complete.
[2023-06-05 17:32:12 +0800] [3178367] [INFO] Application startup complete.
[2023-06-05 17:32:12 +0800] [3178366] [INFO] Started server process [3178366]
[2023-06-05 17:32:12 +0800] [3178366] [INFO] Waiting for application startup.
[2023-06-05 17:32:12 +0800] [3178368] [INFO] Started server process [3178368]
[2023-06-05 17:32:12 +0800] [3178368] [INFO] Waiting for application startup.
[2023-06-05 17:32:12 +0800] [3178366] [INFO] Application startup complete.
[2023-06-05 17:32:12 +0800] [3178368] [INFO] Application startup complete.
[2023-06-05 17:53:59 +0800] [843359] [INFO] Handling signal: hup
[2023-06-05 17:53:59 +0800] [843359] [INFO] Hang up: Master
[2023-06-05 17:53:59 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-05 17:53:59 +0800] [3183604] [INFO] Booting worker with pid: 3183604
[2023-06-05 17:53:59 +0800] [3183605] [INFO] Booting worker with pid: 3183605
[2023-06-05 17:53:59 +0800] [3183606] [INFO] Booting worker with pid: 3183606
[2023-06-05 17:53:59 +0800] [3183607] [INFO] Booting worker with pid: 3183607
[2023-06-05 17:53:59 +0800] [3178366] [INFO] Shutting down
[2023-06-05 17:53:59 +0800] [3178366] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-05 17:53:59 +0800] [3178369] [INFO] Shutting down
[2023-06-05 17:53:59 +0800] [3178369] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-05 17:53:59 +0800] [3178368] [INFO] Shutting down
[2023-06-05 17:53:59 +0800] [3178368] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-05 17:53:59 +0800] [3178367] [INFO] Shutting down
[2023-06-05 17:53:59 +0800] [3178367] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-05 17:53:59 +0800] [3178366] [INFO] Waiting for application shutdown.
[2023-06-05 17:53:59 +0800] [3178366] [INFO] Application shutdown complete.
[2023-06-05 17:53:59 +0800] [3178366] [INFO] Finished server process [3178366]
[2023-06-05 17:53:59 +0800] [3178366] [INFO] Worker exiting (pid: 3178366)
[2023-06-05 17:53:59 +0800] [3178369] [INFO] Waiting for application shutdown.
[2023-06-05 17:53:59 +0800] [3178369] [INFO] Application shutdown complete.
[2023-06-05 17:53:59 +0800] [3178369] [INFO] Finished server process [3178369]
[2023-06-05 17:53:59 +0800] [3178369] [INFO] Worker exiting (pid: 3178369)
[2023-06-05 17:53:59 +0800] [3178368] [INFO] Waiting for application shutdown.
[2023-06-05 17:53:59 +0800] [3178368] [INFO] Application shutdown complete.
[2023-06-05 17:53:59 +0800] [3178368] [INFO] Finished server process [3178368]
[2023-06-05 17:53:59 +0800] [3178368] [INFO] Worker exiting (pid: 3178368)
[2023-06-05 17:53:59 +0800] [3178367] [INFO] Waiting for application shutdown.
[2023-06-05 17:53:59 +0800] [3178367] [INFO] Application shutdown complete.
[2023-06-05 17:53:59 +0800] [3178367] [INFO] Finished server process [3178367]
[2023-06-05 17:53:59 +0800] [3178367] [INFO] Worker exiting (pid: 3178367)
[2023-06-05 17:54:00 +0800] [843359] [WARNING] Worker with pid 3178367 was terminated due to signal 15
[2023-06-05 17:54:00 +0800] [843359] [WARNING] Worker with pid 3178368 was terminated due to signal 15
[2023-06-05 17:54:00 +0800] [843359] [WARNING] Worker with pid 3178366 was terminated due to signal 15
[2023-06-05 17:54:00 +0800] [843359] [WARNING] Worker with pid 3178369 was terminated due to signal 15
[2023-06-05 17:54:02 +0800] [3183605] [INFO] Started server process [3183605]
[2023-06-05 17:54:02 +0800] [3183605] [INFO] Waiting for application startup.
[2023-06-05 17:54:02 +0800] [3183605] [INFO] Application startup complete.
[2023-06-05 17:54:02 +0800] [3183606] [INFO] Started server process [3183606]
[2023-06-05 17:54:02 +0800] [3183606] [INFO] Waiting for application startup.
[2023-06-05 17:54:02 +0800] [3183606] [INFO] Application startup complete.
[2023-06-05 17:54:02 +0800] [3183607] [INFO] Started server process [3183607]
[2023-06-05 17:54:02 +0800] [3183607] [INFO] Waiting for application startup.
[2023-06-05 17:54:02 +0800] [3183607] [INFO] Application startup complete.
[2023-06-05 17:54:02 +0800] [3183604] [INFO] Started server process [3183604]
[2023-06-05 17:54:02 +0800] [3183604] [INFO] Waiting for application startup.
[2023-06-05 17:54:02 +0800] [3183604] [INFO] Application startup complete.
[2023-06-06 15:25:51 +0800] [3183607] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-06 15:25:51 +0800] [3183604] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 56, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-06 15:25:51 +0800] [3183605] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-06 15:25:51 +0800] [3183604] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 45, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-06 15:25:51 +0800] [3183605] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-06 15:25:51 +0800] [3183606] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 137, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-06 16:24:52 +0800] [843359] [INFO] Handling signal: hup
[2023-06-06 16:24:52 +0800] [843359] [INFO] Hang up: Master
[2023-06-06 16:24:52 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-06 16:24:52 +0800] [3516036] [INFO] Booting worker with pid: 3516036
[2023-06-06 16:24:52 +0800] [3516038] [INFO] Booting worker with pid: 3516038
[2023-06-06 16:24:52 +0800] [3516037] [INFO] Booting worker with pid: 3516037
[2023-06-06 16:24:52 +0800] [3516039] [INFO] Booting worker with pid: 3516039
[2023-06-06 16:24:52 +0800] [3183605] [INFO] Shutting down
[2023-06-06 16:24:52 +0800] [3183607] [INFO] Shutting down
[2023-06-06 16:24:52 +0800] [3183607] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-06 16:24:52 +0800] [3183605] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-06 16:24:52 +0800] [3183604] [INFO] Shutting down
[2023-06-06 16:24:52 +0800] [3183604] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-06 16:24:52 +0800] [3183606] [INFO] Shutting down
[2023-06-06 16:24:52 +0800] [3183606] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-06 16:24:52 +0800] [3183607] [INFO] Waiting for application shutdown.
[2023-06-06 16:24:52 +0800] [3183607] [INFO] Application shutdown complete.
[2023-06-06 16:24:52 +0800] [3183607] [INFO] Finished server process [3183607]
[2023-06-06 16:24:52 +0800] [3183607] [INFO] Worker exiting (pid: 3183607)
[2023-06-06 16:24:52 +0800] [3183605] [INFO] Waiting for application shutdown.
[2023-06-06 16:24:52 +0800] [3183605] [INFO] Application shutdown complete.
[2023-06-06 16:24:52 +0800] [3183605] [INFO] Finished server process [3183605]
[2023-06-06 16:24:52 +0800] [3183605] [INFO] Worker exiting (pid: 3183605)
[2023-06-06 16:24:52 +0800] [3183604] [INFO] Waiting for application shutdown.
[2023-06-06 16:24:52 +0800] [3183604] [INFO] Application shutdown complete.
[2023-06-06 16:24:52 +0800] [3183604] [INFO] Finished server process [3183604]
[2023-06-06 16:24:52 +0800] [3183604] [INFO] Worker exiting (pid: 3183604)
[2023-06-06 16:24:52 +0800] [3183606] [INFO] Waiting for application shutdown.
[2023-06-06 16:24:52 +0800] [3183606] [INFO] Application shutdown complete.
[2023-06-06 16:24:52 +0800] [3183606] [INFO] Finished server process [3183606]
[2023-06-06 16:24:52 +0800] [3183606] [INFO] Worker exiting (pid: 3183606)
[2023-06-06 16:24:53 +0800] [843359] [WARNING] Worker with pid 3183605 was terminated due to signal 15
[2023-06-06 16:24:53 +0800] [843359] [WARNING] Worker with pid 3183604 was terminated due to signal 15
[2023-06-06 16:24:53 +0800] [843359] [WARNING] Worker with pid 3183606 was terminated due to signal 15
[2023-06-06 16:24:53 +0800] [843359] [WARNING] Worker with pid 3183607 was terminated due to signal 15
[2023-06-06 16:24:55 +0800] [3516039] [INFO] Started server process [3516039]
[2023-06-06 16:24:55 +0800] [3516039] [INFO] Waiting for application startup.
[2023-06-06 16:24:55 +0800] [3516039] [INFO] Application startup complete.
[2023-06-06 16:24:56 +0800] [3516038] [INFO] Started server process [3516038]
[2023-06-06 16:24:56 +0800] [3516038] [INFO] Waiting for application startup.
[2023-06-06 16:24:56 +0800] [3516038] [INFO] Application startup complete.
[2023-06-06 16:24:56 +0800] [3516037] [INFO] Started server process [3516037]
[2023-06-06 16:24:56 +0800] [3516037] [INFO] Waiting for application startup.
[2023-06-06 16:24:56 +0800] [3516037] [INFO] Application startup complete.
[2023-06-06 16:24:56 +0800] [3516036] [INFO] Started server process [3516036]
[2023-06-06 16:24:56 +0800] [3516036] [INFO] Waiting for application startup.
[2023-06-06 16:24:56 +0800] [3516036] [INFO] Application startup complete.
[2023-06-06 16:56:01 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:56:12 +0800] [3516038] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:56:24 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:56:35 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:56:47 +0800] [3516037] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:56:59 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:57:12 +0800] [3516037] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:57:24 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:57:36 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:57:48 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:58:00 +0800] [3516037] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:58:12 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:58:23 +0800] [3516037] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:58:35 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:58:47 +0800] [3516038] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:58:59 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:59:11 +0800] [3516037] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:59:22 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:59:34 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:59:45 +0800] [3516038] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 16:59:57 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:00:08 +0800] [3516037] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:00:20 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:00:31 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:00:43 +0800] [3516038] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:00:55 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:01:06 +0800] [3516037] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:01:18 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:01:29 +0800] [3516037] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:01:41 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:01:52 +0800] [3516039] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:02:04 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:02:15 +0800] [3516038] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-06 17:02:26 +0800] [3516036] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 349, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/peak/narrowPeaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 281, in get
    self._recv_all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 436, in _recv_all
    command[code](msg[1:])
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 507, in _recv_file
    os.utime(path, self._utime)
FileNotFoundError: [Errno 2] No such file or directory
[2023-06-06 17:02:51 +0800] [843359] [INFO] Handling signal: hup
[2023-06-06 17:02:51 +0800] [843359] [INFO] Hang up: Master
[2023-06-06 17:02:51 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-06 17:02:51 +0800] [3526172] [INFO] Booting worker with pid: 3526172
[2023-06-06 17:02:51 +0800] [3526173] [INFO] Booting worker with pid: 3526173
[2023-06-06 17:02:51 +0800] [3526175] [INFO] Booting worker with pid: 3526175
[2023-06-06 17:02:51 +0800] [3526174] [INFO] Booting worker with pid: 3526174
[2023-06-06 17:02:51 +0800] [3516039] [INFO] Shutting down
[2023-06-06 17:02:51 +0800] [3516039] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-06 17:02:51 +0800] [3516036] [INFO] Shutting down
[2023-06-06 17:02:51 +0800] [3516036] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-06 17:02:51 +0800] [3516038] [INFO] Shutting down
[2023-06-06 17:02:51 +0800] [3516038] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-06 17:02:51 +0800] [3516037] [INFO] Shutting down
[2023-06-06 17:02:51 +0800] [3516037] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-06 17:02:51 +0800] [3516039] [INFO] Waiting for application shutdown.
[2023-06-06 17:02:51 +0800] [3516039] [INFO] Application shutdown complete.
[2023-06-06 17:02:51 +0800] [3516039] [INFO] Finished server process [3516039]
[2023-06-06 17:02:51 +0800] [3516039] [INFO] Worker exiting (pid: 3516039)
[2023-06-06 17:02:51 +0800] [3516036] [INFO] Waiting for application shutdown.
[2023-06-06 17:02:51 +0800] [3516036] [INFO] Application shutdown complete.
[2023-06-06 17:02:51 +0800] [3516036] [INFO] Finished server process [3516036]
[2023-06-06 17:02:51 +0800] [3516036] [INFO] Worker exiting (pid: 3516036)
[2023-06-06 17:02:51 +0800] [3516038] [INFO] Waiting for application shutdown.
[2023-06-06 17:02:51 +0800] [3516038] [INFO] Application shutdown complete.
[2023-06-06 17:02:51 +0800] [3516038] [INFO] Finished server process [3516038]
[2023-06-06 17:02:51 +0800] [3516038] [INFO] Worker exiting (pid: 3516038)
[2023-06-06 17:02:51 +0800] [3516037] [INFO] Waiting for application shutdown.
[2023-06-06 17:02:51 +0800] [3516037] [INFO] Application shutdown complete.
[2023-06-06 17:02:51 +0800] [3516037] [INFO] Finished server process [3516037]
[2023-06-06 17:02:51 +0800] [3516037] [INFO] Worker exiting (pid: 3516037)
[2023-06-06 17:02:52 +0800] [843359] [WARNING] Worker with pid 3516039 was terminated due to signal 15
[2023-06-06 17:02:52 +0800] [843359] [WARNING] Worker with pid 3516038 was terminated due to signal 15
[2023-06-06 17:02:52 +0800] [843359] [WARNING] Worker with pid 3516037 was terminated due to signal 15
[2023-06-06 17:02:52 +0800] [843359] [WARNING] Worker with pid 3516036 was terminated due to signal 15
[2023-06-06 17:02:54 +0800] [3526174] [INFO] Started server process [3526174]
[2023-06-06 17:02:54 +0800] [3526174] [INFO] Waiting for application startup.
[2023-06-06 17:02:54 +0800] [3526174] [INFO] Application startup complete.
[2023-06-06 17:02:54 +0800] [3526172] [INFO] Started server process [3526172]
[2023-06-06 17:02:54 +0800] [3526172] [INFO] Waiting for application startup.
[2023-06-06 17:02:54 +0800] [3526172] [INFO] Application startup complete.
[2023-06-06 17:02:54 +0800] [3526173] [INFO] Started server process [3526173]
[2023-06-06 17:02:54 +0800] [3526173] [INFO] Waiting for application startup.
[2023-06-06 17:02:54 +0800] [3526173] [INFO] Application startup complete.
[2023-06-06 17:02:54 +0800] [3526175] [INFO] Started server process [3526175]
[2023-06-06 17:02:54 +0800] [3526175] [INFO] Waiting for application startup.
[2023-06-06 17:02:54 +0800] [3526175] [INFO] Application startup complete.
[2023-06-07 01:41:38 +0800] [3526173] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 13, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-07 01:41:38 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 13, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-07 01:41:38 +0800] [3526172] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 172, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 13, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-07 01:48:07 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 01:48:07 +0800] [3526174] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 303, in transfer_files
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 13, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-07 01:54:13 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:05:28 +0800] [3526172] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:07:53 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:10:18 +0800] [3526173] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:12:44 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:15:08 +0800] [3526174] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:17:34 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:19:58 +0800] [3526172] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:22:23 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:24:48 +0800] [3526174] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:27:13 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:29:38 +0800] [3526173] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 05:32:02 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 09:34:51 +0800] [3526173] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 09:38:29 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 09:42:07 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 09:45:46 +0800] [3526172] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 09:49:25 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 09:53:05 +0800] [3526174] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 09:56:43 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 10:00:22 +0800] [3526174] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 10:04:01 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 10:07:41 +0800] [3526173] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 10:11:23 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 70, in _check
    return func(self, *args, **kwds)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 255, in exec_command
    self._wait_for_event()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 1224, in _wait_for_event
    raise e
paramiko.ssh_exception.SSHException: Channel closed.
[2023-06-07 10:15:05 +0800] [3526175] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 355, in transfer_files
    scp.get(f'/data/cabins/wshao/ATAC-seq/data/{req.pb_gene}_{req.celline}/csv/ctrl_peaks.tar.gz',
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/scp.py", line 276, in get
    self.channel.exec_command(self.scp_command +
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/channel.py", line 69, in _check
    raise SSHException("Channel is not open")
paramiko.ssh_exception.SSHException: Channel is not open
[2023-06-07 11:38:21 +0800] [843359] [INFO] Handling signal: hup
[2023-06-07 11:38:21 +0800] [843359] [INFO] Hang up: Master
[2023-06-07 11:38:21 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-07 11:38:21 +0800] [3798678] [INFO] Booting worker with pid: 3798678
[2023-06-07 11:38:21 +0800] [3798680] [INFO] Booting worker with pid: 3798680
[2023-06-07 11:38:21 +0800] [3798679] [INFO] Booting worker with pid: 3798679
[2023-06-07 11:38:21 +0800] [3798681] [INFO] Booting worker with pid: 3798681
[2023-06-07 11:38:21 +0800] [3526175] [INFO] Shutting down
[2023-06-07 11:38:21 +0800] [3526175] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-07 11:38:21 +0800] [3526173] [INFO] Shutting down
[2023-06-07 11:38:21 +0800] [3526173] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-07 11:38:21 +0800] [3526172] [INFO] Shutting down
[2023-06-07 11:38:21 +0800] [3526172] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-07 11:38:21 +0800] [3526174] [INFO] Shutting down
[2023-06-07 11:38:21 +0800] [3526174] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-07 11:38:21 +0800] [3526175] [INFO] Waiting for application shutdown.
[2023-06-07 11:38:21 +0800] [3526175] [INFO] Application shutdown complete.
[2023-06-07 11:38:21 +0800] [3526175] [INFO] Finished server process [3526175]
[2023-06-07 11:38:21 +0800] [3526173] [INFO] Waiting for application shutdown.
[2023-06-07 11:38:21 +0800] [3526173] [INFO] Application shutdown complete.
[2023-06-07 11:38:21 +0800] [3526173] [INFO] Finished server process [3526173]
[2023-06-07 11:38:21 +0800] [3526175] [INFO] Worker exiting (pid: 3526175)
[2023-06-07 11:38:21 +0800] [3526173] [INFO] Worker exiting (pid: 3526173)
[2023-06-07 11:38:21 +0800] [3526172] [INFO] Waiting for application shutdown.
[2023-06-07 11:38:21 +0800] [3526172] [INFO] Application shutdown complete.
[2023-06-07 11:38:21 +0800] [3526172] [INFO] Finished server process [3526172]
[2023-06-07 11:38:21 +0800] [3526172] [INFO] Worker exiting (pid: 3526172)
[2023-06-07 11:38:21 +0800] [3526174] [INFO] Waiting for application shutdown.
[2023-06-07 11:38:21 +0800] [3526174] [INFO] Application shutdown complete.
[2023-06-07 11:38:21 +0800] [3526174] [INFO] Finished server process [3526174]
[2023-06-07 11:38:21 +0800] [3526174] [INFO] Worker exiting (pid: 3526174)
[2023-06-07 11:38:22 +0800] [843359] [WARNING] Worker with pid 3526172 was terminated due to signal 15
[2023-06-07 11:38:22 +0800] [843359] [WARNING] Worker with pid 3526175 was terminated due to signal 15
[2023-06-07 11:38:22 +0800] [843359] [WARNING] Worker with pid 3526173 was terminated due to signal 15
[2023-06-07 11:38:22 +0800] [843359] [WARNING] Worker with pid 3526174 was terminated due to signal 15
[2023-06-07 11:38:27 +0800] [3798681] [INFO] Started server process [3798681]
[2023-06-07 11:38:27 +0800] [3798681] [INFO] Waiting for application startup.
[2023-06-07 11:38:27 +0800] [3798678] [INFO] Started server process [3798678]
[2023-06-07 11:38:27 +0800] [3798678] [INFO] Waiting for application startup.
[2023-06-07 11:38:27 +0800] [3798681] [INFO] Application startup complete.
[2023-06-07 11:38:27 +0800] [3798678] [INFO] Application startup complete.
[2023-06-07 11:38:27 +0800] [3798680] [INFO] Started server process [3798680]
[2023-06-07 11:38:27 +0800] [3798679] [INFO] Started server process [3798679]
[2023-06-07 11:38:27 +0800] [3798680] [INFO] Waiting for application startup.
[2023-06-07 11:38:27 +0800] [3798679] [INFO] Waiting for application startup.
[2023-06-07 11:38:27 +0800] [3798679] [INFO] Application startup complete.
[2023-06-07 11:38:27 +0800] [3798680] [INFO] Application startup complete.
[2023-06-07 12:26:21 +0800] [843359] [INFO] Handling signal: hup
[2023-06-07 12:26:21 +0800] [843359] [INFO] Hang up: Master
[2023-06-07 12:26:21 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-07 12:26:21 +0800] [3810253] [INFO] Booting worker with pid: 3810253
[2023-06-07 12:26:21 +0800] [3810254] [INFO] Booting worker with pid: 3810254
[2023-06-07 12:26:21 +0800] [3810255] [INFO] Booting worker with pid: 3810255
[2023-06-07 12:26:21 +0800] [3810256] [INFO] Booting worker with pid: 3810256
[2023-06-07 12:26:21 +0800] [3798680] [INFO] Shutting down
[2023-06-07 12:26:21 +0800] [3798681] [INFO] Shutting down
[2023-06-07 12:26:21 +0800] [3798680] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-07 12:26:21 +0800] [3798681] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-07 12:26:21 +0800] [3798679] [INFO] Shutting down
[2023-06-07 12:26:21 +0800] [3798679] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-07 12:26:21 +0800] [3798678] [INFO] Shutting down
[2023-06-07 12:26:21 +0800] [3798678] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-07 12:26:21 +0800] [3798680] [INFO] Waiting for application shutdown.
[2023-06-07 12:26:21 +0800] [3798681] [INFO] Waiting for application shutdown.
[2023-06-07 12:26:21 +0800] [3798680] [INFO] Application shutdown complete.
[2023-06-07 12:26:21 +0800] [3798681] [INFO] Application shutdown complete.
[2023-06-07 12:26:21 +0800] [3798680] [INFO] Finished server process [3798680]
[2023-06-07 12:26:21 +0800] [3798681] [INFO] Finished server process [3798681]
[2023-06-07 12:26:21 +0800] [3798681] [INFO] Worker exiting (pid: 3798681)
[2023-06-07 12:26:21 +0800] [3798680] [INFO] Worker exiting (pid: 3798680)
[2023-06-07 12:26:21 +0800] [3798679] [INFO] Waiting for application shutdown.
[2023-06-07 12:26:21 +0800] [3798679] [INFO] Application shutdown complete.
[2023-06-07 12:26:21 +0800] [3798679] [INFO] Finished server process [3798679]
[2023-06-07 12:26:21 +0800] [3798679] [INFO] Worker exiting (pid: 3798679)
[2023-06-07 12:26:21 +0800] [3798678] [INFO] Waiting for application shutdown.
[2023-06-07 12:26:21 +0800] [3798678] [INFO] Application shutdown complete.
[2023-06-07 12:26:21 +0800] [3798678] [INFO] Finished server process [3798678]
[2023-06-07 12:26:21 +0800] [3798678] [INFO] Worker exiting (pid: 3798678)
[2023-06-07 12:26:22 +0800] [843359] [WARNING] Worker with pid 3798678 was terminated due to signal 15
[2023-06-07 12:26:22 +0800] [843359] [WARNING] Worker with pid 3798679 was terminated due to signal 15
[2023-06-07 12:26:22 +0800] [843359] [WARNING] Worker with pid 3798681 was terminated due to signal 15
[2023-06-07 12:26:22 +0800] [843359] [WARNING] Worker with pid 3798680 was terminated due to signal 15
[2023-06-07 12:26:25 +0800] [3810254] [INFO] Started server process [3810254]
[2023-06-07 12:26:25 +0800] [3810254] [INFO] Waiting for application startup.
[2023-06-07 12:26:25 +0800] [3810254] [INFO] Application startup complete.
[2023-06-07 12:26:25 +0800] [3810255] [INFO] Started server process [3810255]
[2023-06-07 12:26:25 +0800] [3810255] [INFO] Waiting for application startup.
[2023-06-07 12:26:25 +0800] [3810255] [INFO] Application startup complete.
[2023-06-07 12:26:25 +0800] [3810256] [INFO] Started server process [3810256]
[2023-06-07 12:26:25 +0800] [3810256] [INFO] Waiting for application startup.
[2023-06-07 12:26:25 +0800] [3810256] [INFO] Application startup complete.
[2023-06-07 12:26:25 +0800] [3810253] [INFO] Started server process [3810253]
[2023-06-07 12:26:25 +0800] [3810253] [INFO] Waiting for application startup.
[2023-06-07 12:26:25 +0800] [3810253] [INFO] Application startup complete.
[2023-06-08 07:07:22 +0800] [3810256] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 178, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 19, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-08 07:07:22 +0800] [3810253] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 178, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 19, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-08 07:07:23 +0800] [3810254] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 252, in download_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 19, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-08 07:07:36 +0800] [3810255] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 309, in transfer_files
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 19, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-08 12:18:19 +0800] [843359] [INFO] Handling signal: hup
[2023-06-08 12:18:19 +0800] [843359] [INFO] Hang up: Master
[2023-06-08 12:18:19 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-08 12:18:19 +0800] [4160350] [INFO] Booting worker with pid: 4160350
[2023-06-08 12:18:19 +0800] [4160353] [INFO] Booting worker with pid: 4160353
[2023-06-08 12:18:19 +0800] [4160351] [INFO] Booting worker with pid: 4160351
[2023-06-08 12:18:19 +0800] [4160355] [INFO] Booting worker with pid: 4160355
[2023-06-08 12:18:19 +0800] [3810254] [INFO] Shutting down
[2023-06-08 12:18:19 +0800] [3810254] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 12:18:19 +0800] [3810253] [INFO] Shutting down
[2023-06-08 12:18:19 +0800] [3810256] [INFO] Shutting down
[2023-06-08 12:18:19 +0800] [3810253] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 12:18:19 +0800] [3810256] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 12:18:19 +0800] [3810255] [INFO] Shutting down
[2023-06-08 12:18:19 +0800] [3810255] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 12:18:19 +0800] [3810254] [INFO] Waiting for application shutdown.
[2023-06-08 12:18:19 +0800] [3810254] [INFO] Application shutdown complete.
[2023-06-08 12:18:19 +0800] [3810254] [INFO] Finished server process [3810254]
[2023-06-08 12:18:19 +0800] [3810254] [INFO] Worker exiting (pid: 3810254)
[2023-06-08 12:18:19 +0800] [3810253] [INFO] Waiting for application shutdown.
[2023-06-08 12:18:19 +0800] [3810253] [INFO] Application shutdown complete.
[2023-06-08 12:18:19 +0800] [3810253] [INFO] Finished server process [3810253]
[2023-06-08 12:18:19 +0800] [3810253] [INFO] Worker exiting (pid: 3810253)
[2023-06-08 12:18:19 +0800] [3810256] [INFO] Waiting for application shutdown.
[2023-06-08 12:18:19 +0800] [3810255] [INFO] Waiting for application shutdown.
[2023-06-08 12:18:19 +0800] [3810256] [INFO] Application shutdown complete.
[2023-06-08 12:18:19 +0800] [3810255] [INFO] Application shutdown complete.
[2023-06-08 12:18:19 +0800] [3810256] [INFO] Finished server process [3810256]
[2023-06-08 12:18:19 +0800] [3810255] [INFO] Finished server process [3810255]
[2023-06-08 12:18:19 +0800] [3810256] [INFO] Worker exiting (pid: 3810256)
[2023-06-08 12:18:19 +0800] [3810255] [INFO] Worker exiting (pid: 3810255)
[2023-06-08 12:18:20 +0800] [843359] [WARNING] Worker with pid 3810255 was terminated due to signal 15
[2023-06-08 12:18:20 +0800] [843359] [WARNING] Worker with pid 3810254 was terminated due to signal 15
[2023-06-08 12:18:20 +0800] [843359] [WARNING] Worker with pid 3810256 was terminated due to signal 15
[2023-06-08 12:18:20 +0800] [843359] [WARNING] Worker with pid 3810253 was terminated due to signal 15
[2023-06-08 12:18:25 +0800] [4160350] [INFO] Started server process [4160350]
[2023-06-08 12:18:25 +0800] [4160350] [INFO] Waiting for application startup.
[2023-06-08 12:18:25 +0800] [4160355] [INFO] Started server process [4160355]
[2023-06-08 12:18:25 +0800] [4160355] [INFO] Waiting for application startup.
[2023-06-08 12:18:25 +0800] [4160350] [INFO] Application startup complete.
[2023-06-08 12:18:25 +0800] [4160355] [INFO] Application startup complete.
[2023-06-08 12:18:25 +0800] [4160353] [INFO] Started server process [4160353]
[2023-06-08 12:18:25 +0800] [4160353] [INFO] Waiting for application startup.
[2023-06-08 12:18:25 +0800] [4160351] [INFO] Started server process [4160351]
[2023-06-08 12:18:25 +0800] [4160351] [INFO] Waiting for application startup.
[2023-06-08 12:18:25 +0800] [4160353] [INFO] Application startup complete.
[2023-06-08 12:18:25 +0800] [4160351] [INFO] Application startup complete.
[2023-06-08 14:43:47 +0800] [843359] [INFO] Handling signal: hup
[2023-06-08 14:43:47 +0800] [843359] [INFO] Hang up: Master
[2023-06-08 14:43:47 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-08 14:43:47 +0800] [2191] [INFO] Booting worker with pid: 2191
[2023-06-08 14:43:47 +0800] [2192] [INFO] Booting worker with pid: 2192
[2023-06-08 14:43:47 +0800] [2193] [INFO] Booting worker with pid: 2193
[2023-06-08 14:43:47 +0800] [2194] [INFO] Booting worker with pid: 2194
[2023-06-08 14:43:47 +0800] [4160353] [INFO] Shutting down
[2023-06-08 14:43:47 +0800] [4160353] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:43:47 +0800] [4160350] [INFO] Shutting down
[2023-06-08 14:43:47 +0800] [4160350] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:43:48 +0800] [4160351] [INFO] Shutting down
[2023-06-08 14:43:48 +0800] [4160351] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:43:48 +0800] [4160355] [INFO] Shutting down
[2023-06-08 14:43:48 +0800] [4160355] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:43:48 +0800] [4160353] [INFO] Waiting for application shutdown.
[2023-06-08 14:43:48 +0800] [4160353] [INFO] Application shutdown complete.
[2023-06-08 14:43:48 +0800] [4160353] [INFO] Finished server process [4160353]
[2023-06-08 14:43:48 +0800] [4160353] [INFO] Worker exiting (pid: 4160353)
[2023-06-08 14:43:48 +0800] [4160350] [INFO] Waiting for application shutdown.
[2023-06-08 14:43:48 +0800] [4160350] [INFO] Application shutdown complete.
[2023-06-08 14:43:48 +0800] [4160350] [INFO] Finished server process [4160350]
[2023-06-08 14:43:48 +0800] [4160350] [INFO] Worker exiting (pid: 4160350)
[2023-06-08 14:43:48 +0800] [4160351] [INFO] Waiting for application shutdown.
[2023-06-08 14:43:48 +0800] [4160351] [INFO] Application shutdown complete.
[2023-06-08 14:43:48 +0800] [4160351] [INFO] Finished server process [4160351]
[2023-06-08 14:43:48 +0800] [4160351] [INFO] Worker exiting (pid: 4160351)
[2023-06-08 14:43:48 +0800] [4160355] [INFO] Waiting for application shutdown.
[2023-06-08 14:43:48 +0800] [4160355] [INFO] Application shutdown complete.
[2023-06-08 14:43:48 +0800] [4160355] [INFO] Finished server process [4160355]
[2023-06-08 14:43:48 +0800] [4160355] [INFO] Worker exiting (pid: 4160355)
[2023-06-08 14:43:48 +0800] [843359] [WARNING] Worker with pid 4160351 was terminated due to signal 15
[2023-06-08 14:43:48 +0800] [843359] [WARNING] Worker with pid 4160355 was terminated due to signal 15
[2023-06-08 14:43:48 +0800] [843359] [WARNING] Worker with pid 4160350 was terminated due to signal 15
[2023-06-08 14:43:48 +0800] [843359] [WARNING] Worker with pid 4160353 was terminated due to signal 15
[2023-06-08 14:43:52 +0800] [2192] [INFO] Started server process [2192]
[2023-06-08 14:43:52 +0800] [2191] [INFO] Started server process [2191]
[2023-06-08 14:43:52 +0800] [2192] [INFO] Waiting for application startup.
[2023-06-08 14:43:52 +0800] [2191] [INFO] Waiting for application startup.
[2023-06-08 14:43:52 +0800] [2192] [INFO] Application startup complete.
[2023-06-08 14:43:52 +0800] [2191] [INFO] Application startup complete.
[2023-06-08 14:43:52 +0800] [2193] [INFO] Started server process [2193]
[2023-06-08 14:43:52 +0800] [2193] [INFO] Waiting for application startup.
[2023-06-08 14:43:52 +0800] [2194] [INFO] Started server process [2194]
[2023-06-08 14:43:52 +0800] [2194] [INFO] Waiting for application startup.
[2023-06-08 14:43:52 +0800] [2194] [INFO] Application startup complete.
[2023-06-08 14:43:52 +0800] [2193] [INFO] Application startup complete.
[2023-06-08 14:54:20 +0800] [843359] [INFO] Handling signal: hup
[2023-06-08 14:54:20 +0800] [843359] [INFO] Hang up: Master
[2023-06-08 14:54:20 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-08 14:54:20 +0800] [4786] [INFO] Booting worker with pid: 4786
[2023-06-08 14:54:20 +0800] [4787] [INFO] Booting worker with pid: 4787
[2023-06-08 14:54:20 +0800] [4788] [INFO] Booting worker with pid: 4788
[2023-06-08 14:54:20 +0800] [4789] [INFO] Booting worker with pid: 4789
[2023-06-08 14:54:20 +0800] [2192] [INFO] Shutting down
[2023-06-08 14:54:20 +0800] [2191] [INFO] Shutting down
[2023-06-08 14:54:20 +0800] [2191] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:54:20 +0800] [2192] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:54:20 +0800] [2193] [INFO] Shutting down
[2023-06-08 14:54:20 +0800] [2193] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:54:20 +0800] [2194] [INFO] Shutting down
[2023-06-08 14:54:20 +0800] [2194] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:54:20 +0800] [2192] [INFO] Waiting for application shutdown.
[2023-06-08 14:54:20 +0800] [2192] [INFO] Application shutdown complete.
[2023-06-08 14:54:20 +0800] [2192] [INFO] Finished server process [2192]
[2023-06-08 14:54:20 +0800] [2192] [INFO] Worker exiting (pid: 2192)
[2023-06-08 14:54:20 +0800] [2191] [INFO] Waiting for application shutdown.
[2023-06-08 14:54:20 +0800] [2191] [INFO] Application shutdown complete.
[2023-06-08 14:54:20 +0800] [2191] [INFO] Finished server process [2191]
[2023-06-08 14:54:20 +0800] [2191] [INFO] Worker exiting (pid: 2191)
[2023-06-08 14:54:20 +0800] [2193] [INFO] Waiting for application shutdown.
[2023-06-08 14:54:20 +0800] [2193] [INFO] Application shutdown complete.
[2023-06-08 14:54:20 +0800] [2193] [INFO] Finished server process [2193]
[2023-06-08 14:54:20 +0800] [2193] [INFO] Worker exiting (pid: 2193)
[2023-06-08 14:54:20 +0800] [2194] [INFO] Waiting for application shutdown.
[2023-06-08 14:54:20 +0800] [2194] [INFO] Application shutdown complete.
[2023-06-08 14:54:20 +0800] [2194] [INFO] Finished server process [2194]
[2023-06-08 14:54:20 +0800] [2194] [INFO] Worker exiting (pid: 2194)
[2023-06-08 14:54:21 +0800] [843359] [WARNING] Worker with pid 2192 was terminated due to signal 15
[2023-06-08 14:54:21 +0800] [843359] [WARNING] Worker with pid 2191 was terminated due to signal 15
[2023-06-08 14:54:21 +0800] [843359] [WARNING] Worker with pid 2194 was terminated due to signal 15
[2023-06-08 14:54:21 +0800] [843359] [WARNING] Worker with pid 2193 was terminated due to signal 15
[2023-06-08 14:54:23 +0800] [4788] [INFO] Started server process [4788]
[2023-06-08 14:54:23 +0800] [4788] [INFO] Waiting for application startup.
[2023-06-08 14:54:23 +0800] [4786] [INFO] Started server process [4786]
[2023-06-08 14:54:23 +0800] [4786] [INFO] Waiting for application startup.
[2023-06-08 14:54:23 +0800] [4788] [INFO] Application startup complete.
[2023-06-08 14:54:23 +0800] [4786] [INFO] Application startup complete.
[2023-06-08 14:54:23 +0800] [4787] [INFO] Started server process [4787]
[2023-06-08 14:54:23 +0800] [4787] [INFO] Waiting for application startup.
[2023-06-08 14:54:23 +0800] [4789] [INFO] Started server process [4789]
[2023-06-08 14:54:23 +0800] [4789] [INFO] Waiting for application startup.
[2023-06-08 14:54:23 +0800] [4787] [INFO] Application startup complete.
[2023-06-08 14:54:23 +0800] [4789] [INFO] Application startup complete.
[2023-06-08 14:54:40 +0800] [843359] [INFO] Handling signal: hup
[2023-06-08 14:54:40 +0800] [843359] [INFO] Hang up: Master
[2023-06-08 14:54:40 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-08 14:54:40 +0800] [4867] [INFO] Booting worker with pid: 4867
[2023-06-08 14:54:40 +0800] [4866] [INFO] Booting worker with pid: 4866
[2023-06-08 14:54:40 +0800] [4868] [INFO] Booting worker with pid: 4868
[2023-06-08 14:54:40 +0800] [4869] [INFO] Booting worker with pid: 4869
[2023-06-08 14:54:40 +0800] [4786] [INFO] Shutting down
[2023-06-08 14:54:40 +0800] [4787] [INFO] Shutting down
[2023-06-08 14:54:40 +0800] [4786] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:54:40 +0800] [4787] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:54:40 +0800] [4788] [INFO] Shutting down
[2023-06-08 14:54:40 +0800] [4789] [INFO] Shutting down
[2023-06-08 14:54:40 +0800] [4788] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:54:40 +0800] [4789] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 14:54:40 +0800] [4786] [INFO] Waiting for application shutdown.
[2023-06-08 14:54:40 +0800] [4787] [INFO] Waiting for application shutdown.
[2023-06-08 14:54:40 +0800] [4786] [INFO] Application shutdown complete.
[2023-06-08 14:54:40 +0800] [4787] [INFO] Application shutdown complete.
[2023-06-08 14:54:40 +0800] [4786] [INFO] Finished server process [4786]
[2023-06-08 14:54:40 +0800] [4787] [INFO] Finished server process [4787]
[2023-06-08 14:54:40 +0800] [4786] [INFO] Worker exiting (pid: 4786)
[2023-06-08 14:54:40 +0800] [4787] [INFO] Worker exiting (pid: 4787)
[2023-06-08 14:54:40 +0800] [4788] [INFO] Waiting for application shutdown.
[2023-06-08 14:54:40 +0800] [4788] [INFO] Application shutdown complete.
[2023-06-08 14:54:40 +0800] [4788] [INFO] Finished server process [4788]
[2023-06-08 14:54:40 +0800] [4788] [INFO] Worker exiting (pid: 4788)
[2023-06-08 14:54:40 +0800] [4789] [INFO] Waiting for application shutdown.
[2023-06-08 14:54:40 +0800] [4789] [INFO] Application shutdown complete.
[2023-06-08 14:54:40 +0800] [4789] [INFO] Finished server process [4789]
[2023-06-08 14:54:40 +0800] [4789] [INFO] Worker exiting (pid: 4789)
[2023-06-08 14:54:41 +0800] [843359] [WARNING] Worker with pid 4789 was terminated due to signal 15
[2023-06-08 14:54:41 +0800] [843359] [WARNING] Worker with pid 4786 was terminated due to signal 15
[2023-06-08 14:54:41 +0800] [843359] [WARNING] Worker with pid 4787 was terminated due to signal 15
[2023-06-08 14:54:41 +0800] [843359] [WARNING] Worker with pid 4788 was terminated due to signal 15
[2023-06-08 14:54:43 +0800] [4866] [INFO] Started server process [4866]
[2023-06-08 14:54:43 +0800] [4866] [INFO] Waiting for application startup.
[2023-06-08 14:54:43 +0800] [4866] [INFO] Application startup complete.
[2023-06-08 14:54:43 +0800] [4868] [INFO] Started server process [4868]
[2023-06-08 14:54:43 +0800] [4868] [INFO] Waiting for application startup.
[2023-06-08 14:54:43 +0800] [4868] [INFO] Application startup complete.
[2023-06-08 14:54:43 +0800] [4869] [INFO] Started server process [4869]
[2023-06-08 14:54:43 +0800] [4869] [INFO] Waiting for application startup.
[2023-06-08 14:54:43 +0800] [4869] [INFO] Application startup complete.
[2023-06-08 14:54:43 +0800] [4867] [INFO] Started server process [4867]
[2023-06-08 14:54:43 +0800] [4867] [INFO] Waiting for application startup.
[2023-06-08 14:54:43 +0800] [4867] [INFO] Application startup complete.
[2023-06-08 17:37:25 +0800] [843359] [INFO] Handling signal: hup
[2023-06-08 17:37:25 +0800] [843359] [INFO] Hang up: Master
[2023-06-08 17:37:25 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-08 17:37:25 +0800] [45272] [INFO] Booting worker with pid: 45272
[2023-06-08 17:37:25 +0800] [45273] [INFO] Booting worker with pid: 45273
[2023-06-08 17:37:25 +0800] [45274] [INFO] Booting worker with pid: 45274
[2023-06-08 17:37:25 +0800] [45275] [INFO] Booting worker with pid: 45275
[2023-06-08 17:37:25 +0800] [4867] [INFO] Shutting down
[2023-06-08 17:37:25 +0800] [4869] [INFO] Shutting down
[2023-06-08 17:37:25 +0800] [4867] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 17:37:25 +0800] [4869] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 17:37:25 +0800] [4866] [INFO] Shutting down
[2023-06-08 17:37:25 +0800] [4866] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 17:37:25 +0800] [4868] [INFO] Shutting down
[2023-06-08 17:37:25 +0800] [4868] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 17:37:25 +0800] [4867] [INFO] Waiting for application shutdown.
[2023-06-08 17:37:25 +0800] [4869] [INFO] Waiting for application shutdown.
[2023-06-08 17:37:25 +0800] [4867] [INFO] Application shutdown complete.
[2023-06-08 17:37:25 +0800] [4869] [INFO] Application shutdown complete.
[2023-06-08 17:37:25 +0800] [4867] [INFO] Finished server process [4867]
[2023-06-08 17:37:25 +0800] [4869] [INFO] Finished server process [4869]
[2023-06-08 17:37:25 +0800] [4867] [INFO] Worker exiting (pid: 4867)
[2023-06-08 17:37:25 +0800] [4869] [INFO] Worker exiting (pid: 4869)
[2023-06-08 17:37:25 +0800] [4866] [INFO] Waiting for application shutdown.
[2023-06-08 17:37:25 +0800] [4866] [INFO] Application shutdown complete.
[2023-06-08 17:37:25 +0800] [4866] [INFO] Finished server process [4866]
[2023-06-08 17:37:25 +0800] [4866] [INFO] Worker exiting (pid: 4866)
[2023-06-08 17:37:25 +0800] [4868] [INFO] Waiting for application shutdown.
[2023-06-08 17:37:25 +0800] [4868] [INFO] Application shutdown complete.
[2023-06-08 17:37:25 +0800] [4868] [INFO] Finished server process [4868]
[2023-06-08 17:37:25 +0800] [4868] [INFO] Worker exiting (pid: 4868)
[2023-06-08 17:37:26 +0800] [843359] [WARNING] Worker with pid 4867 was terminated due to signal 15
[2023-06-08 17:37:26 +0800] [843359] [WARNING] Worker with pid 4868 was terminated due to signal 15
[2023-06-08 17:37:26 +0800] [843359] [WARNING] Worker with pid 4866 was terminated due to signal 15
[2023-06-08 17:37:26 +0800] [843359] [WARNING] Worker with pid 4869 was terminated due to signal 15
[2023-06-08 17:37:28 +0800] [45274] [INFO] Started server process [45274]
[2023-06-08 17:37:28 +0800] [45274] [INFO] Waiting for application startup.
[2023-06-08 17:37:28 +0800] [45274] [INFO] Application startup complete.
[2023-06-08 17:37:28 +0800] [45272] [INFO] Started server process [45272]
[2023-06-08 17:37:28 +0800] [45272] [INFO] Waiting for application startup.
[2023-06-08 17:37:28 +0800] [45272] [INFO] Application startup complete.
[2023-06-08 17:37:28 +0800] [45275] [INFO] Started server process [45275]
[2023-06-08 17:37:28 +0800] [45275] [INFO] Waiting for application startup.
[2023-06-08 17:37:28 +0800] [45275] [INFO] Application startup complete.
[2023-06-08 17:37:28 +0800] [45273] [INFO] Started server process [45273]
[2023-06-08 17:37:28 +0800] [45273] [INFO] Waiting for application startup.
[2023-06-08 17:37:28 +0800] [45273] [INFO] Application startup complete.
[2023-06-08 17:42:42 +0800] [45273] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:43:11 +0800] [45273] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:43:12 +0800] [45273] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:43:33 +0800] [45275] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:43:37 +0800] [45273] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:43:44 +0800] [45274] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:45:45 +0800] [45273] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:45:51 +0800] [45275] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:45:52 +0800] [45272] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:46:05 +0800] [45273] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:46:06 +0800] [45274] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:46:32 +0800] [45274] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:46:33 +0800] [45273] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:47:39 +0800] [45273] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:47:41 +0800] [45272] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 54, in get_single_data
    single_data = SingleDataResponse(data=data)
  File "/data/wshao/ATAC_db/code/schemas.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for SingleDataResponse
data -> condition
  field required (type=value_error.missing)
[2023-06-08 17:50:02 +0800] [843359] [INFO] Handling signal: hup
[2023-06-08 17:50:02 +0800] [843359] [INFO] Hang up: Master
[2023-06-08 17:50:02 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-08 17:50:02 +0800] [48414] [INFO] Booting worker with pid: 48414
[2023-06-08 17:50:02 +0800] [48416] [INFO] Booting worker with pid: 48416
[2023-06-08 17:50:02 +0800] [48417] [INFO] Booting worker with pid: 48417
[2023-06-08 17:50:02 +0800] [48415] [INFO] Booting worker with pid: 48415
[2023-06-08 17:50:02 +0800] [45272] [INFO] Shutting down
[2023-06-08 17:50:02 +0800] [45273] [INFO] Shutting down
[2023-06-08 17:50:02 +0800] [45272] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 17:50:02 +0800] [45273] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 17:50:02 +0800] [45274] [INFO] Shutting down
[2023-06-08 17:50:02 +0800] [45275] [INFO] Shutting down
[2023-06-08 17:50:02 +0800] [45274] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 17:50:02 +0800] [45275] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-08 17:50:02 +0800] [45272] [INFO] Waiting for application shutdown.
[2023-06-08 17:50:02 +0800] [45273] [INFO] Waiting for application shutdown.
[2023-06-08 17:50:02 +0800] [45273] [INFO] Application shutdown complete.
[2023-06-08 17:50:02 +0800] [45272] [INFO] Application shutdown complete.
[2023-06-08 17:50:02 +0800] [45273] [INFO] Finished server process [45273]
[2023-06-08 17:50:02 +0800] [45272] [INFO] Finished server process [45272]
[2023-06-08 17:50:02 +0800] [45272] [INFO] Worker exiting (pid: 45272)
[2023-06-08 17:50:02 +0800] [45273] [INFO] Worker exiting (pid: 45273)
[2023-06-08 17:50:02 +0800] [45274] [INFO] Waiting for application shutdown.
[2023-06-08 17:50:02 +0800] [45274] [INFO] Application shutdown complete.
[2023-06-08 17:50:02 +0800] [45274] [INFO] Finished server process [45274]
[2023-06-08 17:50:02 +0800] [45275] [INFO] Waiting for application shutdown.
[2023-06-08 17:50:02 +0800] [45275] [INFO] Application shutdown complete.
[2023-06-08 17:50:02 +0800] [45275] [INFO] Finished server process [45275]
[2023-06-08 17:50:02 +0800] [45274] [INFO] Worker exiting (pid: 45274)
[2023-06-08 17:50:02 +0800] [45275] [INFO] Worker exiting (pid: 45275)
[2023-06-08 17:50:03 +0800] [843359] [WARNING] Worker with pid 45275 was terminated due to signal 15
[2023-06-08 17:50:03 +0800] [843359] [WARNING] Worker with pid 45272 was terminated due to signal 15
[2023-06-08 17:50:03 +0800] [843359] [WARNING] Worker with pid 45274 was terminated due to signal 15
[2023-06-08 17:50:03 +0800] [843359] [WARNING] Worker with pid 45273 was terminated due to signal 15
[2023-06-08 17:50:05 +0800] [48414] [INFO] Started server process [48414]
[2023-06-08 17:50:05 +0800] [48414] [INFO] Waiting for application startup.
[2023-06-08 17:50:05 +0800] [48414] [INFO] Application startup complete.
[2023-06-08 17:50:05 +0800] [48415] [INFO] Started server process [48415]
[2023-06-08 17:50:05 +0800] [48415] [INFO] Waiting for application startup.
[2023-06-08 17:50:05 +0800] [48415] [INFO] Application startup complete.
[2023-06-08 17:50:05 +0800] [48416] [INFO] Started server process [48416]
[2023-06-08 17:50:05 +0800] [48416] [INFO] Waiting for application startup.
[2023-06-08 17:50:05 +0800] [48417] [INFO] Started server process [48417]
[2023-06-08 17:50:05 +0800] [48417] [INFO] Waiting for application startup.
[2023-06-08 17:50:05 +0800] [48417] [INFO] Application startup complete.
[2023-06-08 17:50:05 +0800] [48416] [INFO] Application startup complete.
[2023-06-09 09:33:52 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 20, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-09 09:33:52 +0800] [48415] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 20, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-09 09:33:52 +0800] [48414] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 20, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-09 09:34:05 +0800] [48417] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 310, in transfer_files
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 20, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-09 21:16:26 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 23, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:45 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:45 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:45 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:45 +0800] [48415] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 89, in get_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:45 +0800] [48414] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 109, in get_ctrl_peak_data
    data, records_sum = crud.get_ctrl_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 409, in get_ctrl_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT ctrl_peaks.id AS ctrl_peaks_id, ctrl_peaks.peak_id AS ctrl_peaks_peak_id, ctrl_peaks.chr AS ctrl_peaks_chr, ctrl_peaks.start AS ctrl_peaks_start, ctrl_peaks.end AS ctrl_peaks_end, ctrl_peaks.width AS ctrl_peaks_width, ctrl_peaks.score AS ctrl_peaks_score, ctrl_peaks.signal_value AS ctrl_peaks_signal_value, ctrl_peaks.log_p_value AS ctrl_peaks_log_p_value, ctrl_peaks.log_q_value AS ctrl_peaks_log_q_value, ctrl_peaks.peak_offset AS ctrl_peaks_peak_offset, ctrl_peaks.annotation AS ctrl_peaks_annotation, ctrl_peaks.gene_chr AS ctrl_peaks_gene_chr, ctrl_peaks.gene_start AS ctrl_peaks_gene_start, ctrl_peaks.gene_end AS ctrl_peaks_gene_end, ctrl_peaks.gene_len AS ctrl_peaks_gene_len, ctrl_peaks.gene_strand AS ctrl_peaks_gene_strand, ctrl_peaks.gene_id AS ctrl_peaks_gene_id, ctrl_peaks.transcript_id AS ctrl_peaks_transcript_id, ctrl_peaks.distance_to_tss AS ctrl_peaks_distance_to_tss 
FROM ctrl_peaks 
WHERE ctrl_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:51 +0800] [48417] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:51 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:51 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:53 +0800] [48414] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:58:53 +0800] [48417] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:59:05 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:59:29 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:59:33 +0800] [48414] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:59:41 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:59:41 +0800] [48414] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 10:59:52 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 163, in download_overall_data
    data, records_sum = crud.get_overall_data(db, None, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:00:00 +0800] [48417] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:00:00 +0800] [48417] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:00:47 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:00:48 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:00:48 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:00:49 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:00:53 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:00:54 +0800] [48416] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:01:06 +0800] [48417] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:01:07 +0800] [48415] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'overall_data.condition' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 729, in _read_packet
    packet.raise_for_error()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'overall_data.condition' in 'field list'")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.`condition` AS overall_data_condition, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-10 11:11:03 +0800] [843359] [INFO] Handling signal: hup
[2023-06-10 11:11:03 +0800] [843359] [INFO] Hang up: Master
[2023-06-10 11:11:03 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-10 11:11:03 +0800] [661749] [INFO] Booting worker with pid: 661749
[2023-06-10 11:11:03 +0800] [661750] [INFO] Booting worker with pid: 661750
[2023-06-10 11:11:03 +0800] [661751] [INFO] Booting worker with pid: 661751
[2023-06-10 11:11:03 +0800] [661752] [INFO] Booting worker with pid: 661752
[2023-06-10 11:11:03 +0800] [48415] [INFO] Shutting down
[2023-06-10 11:11:03 +0800] [48415] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-10 11:11:03 +0800] [48416] [INFO] Shutting down
[2023-06-10 11:11:03 +0800] [48417] [INFO] Shutting down
[2023-06-10 11:11:03 +0800] [48416] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-10 11:11:03 +0800] [48417] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-10 11:11:03 +0800] [48414] [INFO] Shutting down
[2023-06-10 11:11:03 +0800] [48414] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-10 11:11:03 +0800] [48415] [INFO] Waiting for application shutdown.
[2023-06-10 11:11:03 +0800] [48415] [INFO] Application shutdown complete.
[2023-06-10 11:11:03 +0800] [48415] [INFO] Finished server process [48415]
[2023-06-10 11:11:03 +0800] [48415] [INFO] Worker exiting (pid: 48415)
[2023-06-10 11:11:03 +0800] [48417] [INFO] Waiting for application shutdown.
[2023-06-10 11:11:03 +0800] [48417] [INFO] Application shutdown complete.
[2023-06-10 11:11:03 +0800] [48417] [INFO] Finished server process [48417]
[2023-06-10 11:11:03 +0800] [48417] [INFO] Worker exiting (pid: 48417)
[2023-06-10 11:11:03 +0800] [48416] [INFO] Waiting for application shutdown.
[2023-06-10 11:11:03 +0800] [48416] [INFO] Application shutdown complete.
[2023-06-10 11:11:03 +0800] [48416] [INFO] Finished server process [48416]
[2023-06-10 11:11:03 +0800] [48416] [INFO] Worker exiting (pid: 48416)
[2023-06-10 11:11:03 +0800] [48414] [INFO] Waiting for application shutdown.
[2023-06-10 11:11:03 +0800] [48414] [INFO] Application shutdown complete.
[2023-06-10 11:11:03 +0800] [48414] [INFO] Finished server process [48414]
[2023-06-10 11:11:03 +0800] [48414] [INFO] Worker exiting (pid: 48414)
[2023-06-10 11:11:04 +0800] [843359] [WARNING] Worker with pid 48417 was terminated due to signal 15
[2023-06-10 11:11:04 +0800] [843359] [WARNING] Worker with pid 48414 was terminated due to signal 15
[2023-06-10 11:11:04 +0800] [843359] [WARNING] Worker with pid 48416 was terminated due to signal 15
[2023-06-10 11:11:04 +0800] [843359] [WARNING] Worker with pid 48415 was terminated due to signal 15
[2023-06-10 11:11:08 +0800] [661749] [INFO] Started server process [661749]
[2023-06-10 11:11:08 +0800] [661750] [INFO] Started server process [661750]
[2023-06-10 11:11:08 +0800] [661749] [INFO] Waiting for application startup.
[2023-06-10 11:11:08 +0800] [661750] [INFO] Waiting for application startup.
[2023-06-10 11:11:08 +0800] [661749] [INFO] Application startup complete.
[2023-06-10 11:11:08 +0800] [661750] [INFO] Application startup complete.
[2023-06-10 11:11:08 +0800] [661751] [INFO] Started server process [661751]
[2023-06-10 11:11:08 +0800] [661752] [INFO] Started server process [661752]
[2023-06-10 11:11:08 +0800] [661751] [INFO] Waiting for application startup.
[2023-06-10 11:11:08 +0800] [661752] [INFO] Waiting for application startup.
[2023-06-10 11:11:08 +0800] [661752] [INFO] Application startup complete.
[2023-06-10 11:11:08 +0800] [661751] [INFO] Application startup complete.
[2023-06-11 09:25:57 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-11 09:25:57 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-11 09:25:57 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-11 09:25:57 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-12 09:35:11 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-12 09:35:11 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 20, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-12 09:35:11 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-12 09:35:24 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-12 19:50:29 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-12 19:50:39 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-12 19:50:53 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-12 19:50:53 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-13 07:59:04 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-13 07:59:04 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-13 07:59:04 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-13 07:59:04 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-15 22:55:21 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-15 22:55:21 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-15 22:55:21 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 96, in get_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-15 22:55:21 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 89, in get_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-16 11:34:13 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-16 11:34:13 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 96, in get_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-16 11:34:13 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 122, in get_treat_peak_data
    data, records_sum = crud.get_treat_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 536, in get_treat_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT treat_peaks.id AS treat_peaks_id, treat_peaks.peak_id AS treat_peaks_peak_id, treat_peaks.chr AS treat_peaks_chr, treat_peaks.start AS treat_peaks_start, treat_peaks.end AS treat_peaks_end, treat_peaks.width AS treat_peaks_width, treat_peaks.score AS treat_peaks_score, treat_peaks.signal_value AS treat_peaks_signal_value, treat_peaks.log_p_value AS treat_peaks_log_p_value, treat_peaks.log_q_value AS treat_peaks_log_q_value, treat_peaks.peak_offset AS treat_peaks_peak_offset, treat_peaks.annotation AS treat_peaks_annotation, treat_peaks.gene_chr AS treat_peaks_gene_chr, treat_peaks.gene_start AS treat_peaks_gene_start, treat_peaks.gene_end AS treat_peaks_gene_end, treat_peaks.gene_len AS treat_peaks_gene_len, treat_peaks.gene_strand AS treat_peaks_gene_strand, treat_peaks.gene_id AS treat_peaks_gene_id, treat_peaks.transcript_id AS treat_peaks_transcript_id, treat_peaks.distance_to_tss AS treat_peaks_distance_to_tss 
FROM treat_peaks 
WHERE treat_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-16 11:34:13 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 122, in get_treat_peak_data
    data, records_sum = crud.get_treat_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 536, in get_treat_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT treat_peaks.id AS treat_peaks_id, treat_peaks.peak_id AS treat_peaks_peak_id, treat_peaks.chr AS treat_peaks_chr, treat_peaks.start AS treat_peaks_start, treat_peaks.end AS treat_peaks_end, treat_peaks.width AS treat_peaks_width, treat_peaks.score AS treat_peaks_score, treat_peaks.signal_value AS treat_peaks_signal_value, treat_peaks.log_p_value AS treat_peaks_log_p_value, treat_peaks.log_q_value AS treat_peaks_log_q_value, treat_peaks.peak_offset AS treat_peaks_peak_offset, treat_peaks.annotation AS treat_peaks_annotation, treat_peaks.gene_chr AS treat_peaks_gene_chr, treat_peaks.gene_start AS treat_peaks_gene_start, treat_peaks.gene_end AS treat_peaks_gene_end, treat_peaks.gene_len AS treat_peaks_gene_len, treat_peaks.gene_strand AS treat_peaks_gene_strand, treat_peaks.gene_id AS treat_peaks_gene_id, treat_peaks.transcript_id AS treat_peaks_transcript_id, treat_peaks.distance_to_tss AS treat_peaks_distance_to_tss 
FROM treat_peaks 
WHERE treat_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-17 16:09:49 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-17 16:09:49 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-17 16:09:49 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-17 16:09:49 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-18 08:47:42 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 31, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-18 08:47:49 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 198, in download_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 31, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-18 08:47:49 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 198, in download_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 31, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-18 10:21:52 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_peak_data_range
    data = crud.get_diff_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 172, in get_diff_peaks_numerical_range
    start_min = db.query(func.min(diff_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT min(diff_peaks.start) AS min_1 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-19 15:30:28 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-19 15:30:28 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-19 15:30:28 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-19 15:30:28 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 96, in get_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-20 00:28:22 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 36, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-20 00:28:34 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 198, in download_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 36, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-20 00:28:52 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 310, in transfer_files
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 36, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-22 19:19:35 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 216, in download_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 37, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-22 19:19:35 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 216, in download_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 37, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-23 03:28:40 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 253, in download_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 38, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-23 11:15:59 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 216, in download_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 39, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-23 14:50:39 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-23 14:50:39 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-23 16:13:18 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-23 16:13:18 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-23 16:13:50 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-23 16:13:50 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-23 16:15:46 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-23 22:58:22 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-23 22:58:22 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-24 10:20:14 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-24 10:22:13 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-24 10:22:20 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-24 10:22:38 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-24 10:30:33 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-24 10:30:34 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-24 10:39:12 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-24 10:39:12 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-24 21:33:44 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 44, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-24 21:34:02 +0800] [661752] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 198, in download_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 44, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-24 21:34:02 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 198, in download_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 44, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-24 21:34:02 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 198, in download_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 44, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-25 07:19:04 +0800] [661751] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 46, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-25 10:23:24 +0800] [661749] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 122, in get_treat_peak_data
    data, records_sum = crud.get_treat_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 536, in get_treat_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT treat_peaks.id AS treat_peaks_id, treat_peaks.peak_id AS treat_peaks_peak_id, treat_peaks.chr AS treat_peaks_chr, treat_peaks.start AS treat_peaks_start, treat_peaks.end AS treat_peaks_end, treat_peaks.width AS treat_peaks_width, treat_peaks.score AS treat_peaks_score, treat_peaks.signal_value AS treat_peaks_signal_value, treat_peaks.log_p_value AS treat_peaks_log_p_value, treat_peaks.log_q_value AS treat_peaks_log_q_value, treat_peaks.peak_offset AS treat_peaks_peak_offset, treat_peaks.annotation AS treat_peaks_annotation, treat_peaks.gene_chr AS treat_peaks_gene_chr, treat_peaks.gene_start AS treat_peaks_gene_start, treat_peaks.gene_end AS treat_peaks_gene_end, treat_peaks.gene_len AS treat_peaks_gene_len, treat_peaks.gene_strand AS treat_peaks_gene_strand, treat_peaks.gene_id AS treat_peaks_gene_id, treat_peaks.transcript_id AS treat_peaks_transcript_id, treat_peaks.distance_to_tss AS treat_peaks_distance_to_tss 
FROM treat_peaks 
WHERE treat_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-25 10:23:25 +0800] [661750] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 89, in get_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-25 10:58:57 +0800] [843359] [INFO] Handling signal: hup
[2023-06-25 10:58:57 +0800] [843359] [INFO] Hang up: Master
[2023-06-25 10:58:57 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-25 10:58:57 +0800] [1813217] [INFO] Booting worker with pid: 1813217
[2023-06-25 10:58:57 +0800] [1813218] [INFO] Booting worker with pid: 1813218
[2023-06-25 10:58:57 +0800] [1813219] [INFO] Booting worker with pid: 1813219
[2023-06-25 10:58:57 +0800] [1813220] [INFO] Booting worker with pid: 1813220
[2023-06-25 10:58:57 +0800] [661750] [INFO] Shutting down
[2023-06-25 10:58:57 +0800] [661752] [INFO] Shutting down
[2023-06-25 10:58:57 +0800] [661750] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-25 10:58:57 +0800] [661752] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-25 10:58:57 +0800] [661749] [INFO] Shutting down
[2023-06-25 10:58:57 +0800] [661751] [INFO] Shutting down
[2023-06-25 10:58:57 +0800] [661749] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-25 10:58:57 +0800] [661751] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-25 10:58:57 +0800] [661752] [INFO] Waiting for application shutdown.
[2023-06-25 10:58:57 +0800] [661751] [INFO] Waiting for application shutdown.
[2023-06-25 10:58:57 +0800] [661752] [INFO] Application shutdown complete.
[2023-06-25 10:58:57 +0800] [661752] [INFO] Finished server process [661752]
[2023-06-25 10:58:57 +0800] [661751] [INFO] Application shutdown complete.
[2023-06-25 10:58:57 +0800] [661751] [INFO] Finished server process [661751]
[2023-06-25 10:58:57 +0800] [661750] [INFO] Waiting for application shutdown.
[2023-06-25 10:58:57 +0800] [661750] [INFO] Application shutdown complete.
[2023-06-25 10:58:57 +0800] [661749] [INFO] Waiting for application shutdown.
[2023-06-25 10:58:57 +0800] [661749] [INFO] Application shutdown complete.
[2023-06-25 10:58:57 +0800] [661749] [INFO] Finished server process [661749]
[2023-06-25 10:58:57 +0800] [661750] [INFO] Finished server process [661750]
[2023-06-25 10:58:57 +0800] [661750] [INFO] Worker exiting (pid: 661750)
[2023-06-25 10:58:57 +0800] [661751] [INFO] Worker exiting (pid: 661751)
[2023-06-25 10:58:57 +0800] [661749] [INFO] Worker exiting (pid: 661749)
[2023-06-25 10:58:57 +0800] [661752] [INFO] Worker exiting (pid: 661752)
[2023-06-25 10:58:58 +0800] [843359] [WARNING] Worker with pid 661750 was terminated due to signal 15
[2023-06-25 10:58:58 +0800] [843359] [WARNING] Worker with pid 661749 was terminated due to signal 15
[2023-06-25 10:58:58 +0800] [843359] [WARNING] Worker with pid 661752 was terminated due to signal 15
[2023-06-25 10:58:58 +0800] [843359] [WARNING] Worker with pid 661751 was terminated due to signal 15
[2023-06-25 10:59:05 +0800] [1813217] [INFO] Started server process [1813217]
[2023-06-25 10:59:05 +0800] [1813218] [INFO] Started server process [1813218]
[2023-06-25 10:59:05 +0800] [1813218] [INFO] Waiting for application startup.
[2023-06-25 10:59:05 +0800] [1813217] [INFO] Waiting for application startup.
[2023-06-25 10:59:05 +0800] [1813218] [INFO] Application startup complete.
[2023-06-25 10:59:05 +0800] [1813217] [INFO] Application startup complete.
[2023-06-25 10:59:05 +0800] [1813220] [INFO] Started server process [1813220]
[2023-06-25 10:59:05 +0800] [1813220] [INFO] Waiting for application startup.
[2023-06-25 10:59:05 +0800] [1813219] [INFO] Started server process [1813219]
[2023-06-25 10:59:05 +0800] [1813219] [INFO] Waiting for application startup.
[2023-06-25 10:59:05 +0800] [1813220] [INFO] Application startup complete.
[2023-06-25 10:59:05 +0800] [1813219] [INFO] Application startup complete.
[2023-06-25 12:49:23 +0800] [1813219] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-25 12:49:23 +0800] [1813217] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-25 23:37:10 +0800] [1813220] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-25 23:37:10 +0800] [1813219] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-25 23:37:10 +0800] [1813218] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-25 23:37:10 +0800] [1813217] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-26 10:22:20 +0800] [1813217] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-26 10:22:20 +0800] [1813218] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_peak_data_range
    data = crud.get_diff_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 172, in get_diff_peaks_numerical_range
    start_min = db.query(func.min(diff_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT min(diff_peaks.start) AS min_1 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-26 10:22:20 +0800] [1813219] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 705, in _read_packet
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-26 21:19:37 +0800] [1813217] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-26 21:19:37 +0800] [1813218] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-26 21:19:37 +0800] [1813219] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 89, in get_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-27 09:07:37 +0800] [1813219] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-27 09:07:37 +0800] [1813217] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-27 09:07:37 +0800] [1813220] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-27 09:07:37 +0800] [1813218] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 82, in get_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-27 16:16:22 +0800] [843359] [INFO] Handling signal: hup
[2023-06-27 16:16:22 +0800] [843359] [INFO] Hang up: Master
[2023-06-27 16:16:22 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-27 16:16:22 +0800] [2636303] [INFO] Booting worker with pid: 2636303
[2023-06-27 16:16:22 +0800] [2636304] [INFO] Booting worker with pid: 2636304
[2023-06-27 16:16:22 +0800] [2636305] [INFO] Booting worker with pid: 2636305
[2023-06-27 16:16:22 +0800] [2636306] [INFO] Booting worker with pid: 2636306
[2023-06-27 16:16:22 +0800] [1813217] [INFO] Shutting down
[2023-06-27 16:16:22 +0800] [1813219] [INFO] Shutting down
[2023-06-27 16:16:22 +0800] [1813217] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-27 16:16:22 +0800] [1813219] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-27 16:16:22 +0800] [1813220] [INFO] Shutting down
[2023-06-27 16:16:22 +0800] [1813218] [INFO] Shutting down
[2023-06-27 16:16:22 +0800] [1813218] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-27 16:16:22 +0800] [1813220] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-27 16:16:23 +0800] [1813219] [INFO] Waiting for application shutdown.
[2023-06-27 16:16:23 +0800] [1813218] [INFO] Waiting for application shutdown.
[2023-06-27 16:16:23 +0800] [1813218] [INFO] Application shutdown complete.
[2023-06-27 16:16:23 +0800] [1813219] [INFO] Application shutdown complete.
[2023-06-27 16:16:23 +0800] [1813219] [INFO] Finished server process [1813219]
[2023-06-27 16:16:23 +0800] [1813218] [INFO] Finished server process [1813218]
[2023-06-27 16:16:23 +0800] [1813217] [INFO] Waiting for application shutdown.
[2023-06-27 16:16:23 +0800] [1813220] [INFO] Waiting for application shutdown.
[2023-06-27 16:16:23 +0800] [1813217] [INFO] Application shutdown complete.
[2023-06-27 16:16:23 +0800] [1813220] [INFO] Application shutdown complete.
[2023-06-27 16:16:23 +0800] [1813217] [INFO] Finished server process [1813217]
[2023-06-27 16:16:23 +0800] [1813220] [INFO] Finished server process [1813220]
[2023-06-27 16:16:23 +0800] [1813219] [INFO] Worker exiting (pid: 1813219)
[2023-06-27 16:16:23 +0800] [1813220] [INFO] Worker exiting (pid: 1813220)
[2023-06-27 16:16:23 +0800] [1813218] [INFO] Worker exiting (pid: 1813218)
[2023-06-27 16:16:23 +0800] [1813217] [INFO] Worker exiting (pid: 1813217)
[2023-06-27 16:16:23 +0800] [843359] [WARNING] Worker with pid 1813218 was terminated due to signal 15
[2023-06-27 16:16:23 +0800] [843359] [WARNING] Worker with pid 1813219 was terminated due to signal 15
[2023-06-27 16:16:23 +0800] [843359] [WARNING] Worker with pid 1813217 was terminated due to signal 15
[2023-06-27 16:16:24 +0800] [843359] [WARNING] Worker with pid 1813220 was terminated due to signal 15
[2023-06-27 16:16:30 +0800] [2636304] [INFO] Started server process [2636304]
[2023-06-27 16:16:30 +0800] [2636303] [INFO] Started server process [2636303]
[2023-06-27 16:16:30 +0800] [2636303] [INFO] Waiting for application startup.
[2023-06-27 16:16:30 +0800] [2636304] [INFO] Waiting for application startup.
[2023-06-27 16:16:30 +0800] [2636303] [INFO] Application startup complete.
[2023-06-27 16:16:30 +0800] [2636304] [INFO] Application startup complete.
[2023-06-27 16:16:30 +0800] [2636306] [INFO] Started server process [2636306]
[2023-06-27 16:16:30 +0800] [2636306] [INFO] Waiting for application startup.
[2023-06-27 16:16:30 +0800] [2636305] [INFO] Started server process [2636305]
[2023-06-27 16:16:30 +0800] [2636305] [INFO] Waiting for application startup.
[2023-06-27 16:16:30 +0800] [2636306] [INFO] Application startup complete.
[2023-06-27 16:16:30 +0800] [2636305] [INFO] Application startup complete.
[2023-06-27 16:17:39 +0800] [843359] [INFO] Handling signal: hup
[2023-06-27 16:17:39 +0800] [843359] [INFO] Hang up: Master
[2023-06-27 16:17:39 +0800] [843359] [DEBUG] Current configuration:
  config: gunicorn.py
  wsgi_app: None
  bind: ['0.0.0.0:8000']
  backlog: 2048
  workers: 4
  worker_class: uvicorn.workers.UvicornWorker
  threads: 2
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 360000
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: False
  sendfile: None
  reuse_port: False
  chdir: /data/wshao/ATAC_db/code
  daemon: True
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: /data/wshao/ATAC_db/code/gunicorn_access.log
  disable_redirect_access_to_syslog: False
  access_log_format: %(t)s %(p)s %(h)s "%(r)s" %(s)s %(L)s %(b)s %(f)s" "%(a)s"
  errorlog: /data/wshao/ATAC_db/code/gunicorn_error.log
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7f2d0c4ee320>
  on_reload: <function OnReload.on_reload at 0x7f2d0c4ee440>
  when_ready: <function WhenReady.when_ready at 0x7f2d0c4ee560>
  pre_fork: <function Prefork.pre_fork at 0x7f2d0c4ee680>
  post_fork: <function Postfork.post_fork at 0x7f2d0c4ee7a0>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7f2d0c4ee8c0>
  worker_int: <function WorkerInt.worker_int at 0x7f2d0c4ee9e0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7f2d0c4eeb00>
  pre_exec: <function PreExec.pre_exec at 0x7f2d0c4eec20>
  pre_request: <function PreRequest.pre_request at 0x7f2d0c4eed40>
  post_request: <function PostRequest.post_request at 0x7f2d0c4eedd0>
  child_exit: <function ChildExit.child_exit at 0x7f2d0c4eeef0>
  worker_exit: <function WorkerExit.worker_exit at 0x7f2d0c4ef010>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7f2d0c4ef130>
  on_exit: <function OnExit.on_exit at 0x7f2d0c4ef250>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
[2023-06-27 16:17:39 +0800] [2636642] [INFO] Booting worker with pid: 2636642
[2023-06-27 16:17:39 +0800] [2636643] [INFO] Booting worker with pid: 2636643
[2023-06-27 16:17:39 +0800] [2636645] [INFO] Booting worker with pid: 2636645
[2023-06-27 16:17:39 +0800] [2636644] [INFO] Booting worker with pid: 2636644
[2023-06-27 16:17:39 +0800] [2636303] [INFO] Shutting down
[2023-06-27 16:17:39 +0800] [2636304] [INFO] Shutting down
[2023-06-27 16:17:39 +0800] [2636303] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-27 16:17:39 +0800] [2636304] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-27 16:17:39 +0800] [2636306] [INFO] Shutting down
[2023-06-27 16:17:39 +0800] [2636305] [INFO] Shutting down
[2023-06-27 16:17:39 +0800] [2636306] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-27 16:17:39 +0800] [2636305] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2023-06-27 16:17:39 +0800] [2636304] [INFO] Waiting for application shutdown.
[2023-06-27 16:17:39 +0800] [2636303] [INFO] Waiting for application shutdown.
[2023-06-27 16:17:39 +0800] [2636304] [INFO] Application shutdown complete.
[2023-06-27 16:17:39 +0800] [2636303] [INFO] Application shutdown complete.
[2023-06-27 16:17:39 +0800] [2636303] [INFO] Finished server process [2636303]
[2023-06-27 16:17:39 +0800] [2636304] [INFO] Finished server process [2636304]
[2023-06-27 16:17:39 +0800] [2636304] [INFO] Worker exiting (pid: 2636304)
[2023-06-27 16:17:39 +0800] [2636303] [INFO] Worker exiting (pid: 2636303)
[2023-06-27 16:17:39 +0800] [2636306] [INFO] Waiting for application shutdown.
[2023-06-27 16:17:39 +0800] [2636305] [INFO] Waiting for application shutdown.
[2023-06-27 16:17:39 +0800] [2636306] [INFO] Application shutdown complete.
[2023-06-27 16:17:39 +0800] [2636306] [INFO] Finished server process [2636306]
[2023-06-27 16:17:39 +0800] [2636305] [INFO] Application shutdown complete.
[2023-06-27 16:17:39 +0800] [2636305] [INFO] Finished server process [2636305]
[2023-06-27 16:17:39 +0800] [2636306] [INFO] Worker exiting (pid: 2636306)
[2023-06-27 16:17:39 +0800] [2636305] [INFO] Worker exiting (pid: 2636305)
[2023-06-27 16:17:40 +0800] [843359] [WARNING] Worker with pid 2636303 was terminated due to signal 15
[2023-06-27 16:17:40 +0800] [843359] [WARNING] Worker with pid 2636304 was terminated due to signal 15
[2023-06-27 16:17:40 +0800] [843359] [WARNING] Worker with pid 2636306 was terminated due to signal 15
[2023-06-27 16:17:40 +0800] [843359] [WARNING] Worker with pid 2636305 was terminated due to signal 15
[2023-06-27 16:17:42 +0800] [2636642] [INFO] Started server process [2636642]
[2023-06-27 16:17:42 +0800] [2636642] [INFO] Waiting for application startup.
[2023-06-27 16:17:42 +0800] [2636642] [INFO] Application startup complete.
[2023-06-27 16:17:42 +0800] [2636643] [INFO] Started server process [2636643]
[2023-06-27 16:17:42 +0800] [2636643] [INFO] Waiting for application startup.
[2023-06-27 16:17:42 +0800] [2636643] [INFO] Application startup complete.
[2023-06-27 16:17:42 +0800] [2636644] [INFO] Started server process [2636644]
[2023-06-27 16:17:42 +0800] [2636644] [INFO] Waiting for application startup.
[2023-06-27 16:17:42 +0800] [2636644] [INFO] Application startup complete.
[2023-06-27 16:17:42 +0800] [2636645] [INFO] Started server process [2636645]
[2023-06-27 16:17:42 +0800] [2636645] [INFO] Waiting for application startup.
[2023-06-27 16:17:42 +0800] [2636645] [INFO] Application startup complete.
[2023-06-27 18:28:47 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-27 18:30:58 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-27 18:33:09 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-27 18:35:20 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-27 18:37:32 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 06:46:06 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 06:48:17 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 06:50:28 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 06:52:39 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 06:54:50 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 09:55:24 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-28 09:55:24 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-28 09:55:24 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 96, in get_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-28 10:36:40 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 10:38:51 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 10:41:02 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 10:43:14 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 10:45:25 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 18:46:37 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 61, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-28 18:46:59 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 378, in transfer_files_fanrui
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 61, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-28 18:49:09 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 18:51:20 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 18:53:31 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 18:55:42 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-28 21:36:01 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 216, in download_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 55, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-29 04:03:28 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 04:05:39 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 04:07:51 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 04:10:02 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 04:12:13 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 07:03:09 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 07:05:20 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 07:07:31 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 07:09:42 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 07:11:53 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 10:02:04 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-29 11:10:27 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 11:12:38 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 11:14:49 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 11:17:00 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 11:19:11 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 11:25:50 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-29 11:25:50 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2023-06-29 14:45:37 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 14:47:48 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 14:50:00 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 14:52:11 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-29 14:54:22 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 03:07:07 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 779, in _read_query_result
    result.read()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 742, in _read_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-30 03:08:38 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-30 03:11:04 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 82, in get_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-30 03:11:04 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-06-30 03:42:40 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 03:44:51 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 03:47:02 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 03:49:13 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 03:51:24 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 07:55:21 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 07:57:33 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 07:59:44 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 08:01:55 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 08:04:06 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 15:38:33 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 15:40:44 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 15:42:55 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 15:45:06 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 15:47:17 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 22:36:16 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 22:38:27 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 22:40:38 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 22:42:49 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-06-30 22:45:01 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 06:12:55 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 70, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-07-01 06:12:55 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 179, in download_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 70, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-07-01 06:15:53 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 06:18:04 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 06:20:15 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 06:22:26 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 06:24:37 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 11:34:01 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-07-01 14:11:12 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 234, in download_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 71, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-07-01 14:13:49 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 14:16:00 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 14:18:11 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 14:20:22 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 14:22:33 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 20:12:25 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 20:14:36 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 20:16:47 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 20:18:58 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-01 20:21:09 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 02:32:54 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 02:35:05 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 02:37:16 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 02:39:27 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 02:41:38 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 07:24:36 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 07:26:47 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 07:26:47 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 378, in transfer_files_fanrui
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 74, 'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-07-02 07:28:58 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 07:31:09 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 12:23:20 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 12:25:31 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 12:27:42 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 12:29:54 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-02 12:32:05 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 391, in transfer_files_fanrui
    coon.connect(host, username=username, password=password, port=port)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/paramiko/client.py", line 365, in connect
    sock.connect(addr)
TimeoutError: [Errno 110] Connection timed out
[2023-07-04 20:31:04 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-07-04 20:31:04 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-07-04 20:31:05 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-07-22 11:20:29 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2023-07-22 11:20:29 +0800] [2636643] [WARNING] Invalid HTTP request received.
[2023-07-22 11:20:29 +0800] [2636642] [WARNING] Invalid HTTP request received.
[2023-07-23 08:37:44 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2023-07-23 08:37:44 +0800] [2636644] [WARNING] Invalid HTTP request received.
[2023-07-23 08:37:44 +0800] [2636643] [WARNING] Invalid HTTP request received.
[2023-08-01 11:48:15 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-01 11:48:15 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-06 11:49:08 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-06 11:49:09 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-06 11:49:09 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 129, in get_treat_peak_data_range
    data = crud.get_treat_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 544, in get_treat_peaks_numerical_range
    start_min = db.query(func.min(treat_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT min(treat_peaks.start) AS min_1 
FROM treat_peaks 
WHERE treat_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-14 23:00:55 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-14 23:00:55 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-14 23:00:55 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-14 23:00:56 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 116, in get_ctrl_peak_data_range
    data = crud.get_ctrl_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 417, in get_ctrl_peaks_numerical_range
    start_min = db.query(func.min(ctrl_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT min(ctrl_peaks.start) AS min_1 
FROM ctrl_peaks 
WHERE ctrl_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-15 14:18:04 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-15 14:31:35 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-15 14:31:35 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-15 14:31:35 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 82, in get_diff_KEGG_enrichment_data
    data, records_sum = crud.get_diff_kegg_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 244, in get_diff_kegg_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_kegg_enrich.id AS diff_kegg_enrich_id, diff_kegg_enrich.cluster AS diff_kegg_enrich_cluster, diff_kegg_enrich.`KEGG_id` AS `diff_kegg_enrich_KEGG_id`, diff_kegg_enrich.description AS diff_kegg_enrich_description, diff_kegg_enrich.gene_ratio AS diff_kegg_enrich_gene_ratio, diff_kegg_enrich.bg_ratio AS diff_kegg_enrich_bg_ratio, diff_kegg_enrich.p_value AS diff_kegg_enrich_p_value, diff_kegg_enrich.p_adjust AS diff_kegg_enrich_p_adjust, diff_kegg_enrich.q_value AS diff_kegg_enrich_q_value, diff_kegg_enrich.gene_ids AS diff_kegg_enrich_gene_ids, diff_kegg_enrich.count AS diff_kegg_enrich_count 
FROM diff_kegg_enrich 
WHERE diff_kegg_enrich.id = %(id_1)s ORDER BY diff_kegg_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-20 13:51:51 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-20 13:51:51 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-20 13:51:51 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-20 13:51:51 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-25 10:26:50 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-25 10:26:50 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-25 10:26:50 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-08-26 06:12:39 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2023-08-26 06:12:40 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2023-09-11 22:17:00 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-09-11 22:17:00 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-10-04 01:36:38 +0800] [2636644] [WARNING] Invalid HTTP request received.
[2023-10-04 01:36:39 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2023-11-16 19:11:35 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-11-16 19:11:35 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 96, in get_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-11-16 19:11:37 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 96, in get_diff_footprint_data
    data, records_sum = crud.get_diff_footprint(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 309, in get_diff_footprint
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_footprint.id AS diff_footprint_id, diff_footprint.motif AS diff_footprint_motif, diff_footprint.tf AS diff_footprint_tf, diff_footprint.num AS diff_footprint_num, diff_footprint.protection_score_ctrl AS diff_footprint_protection_score_ctrl, diff_footprint.protection_score_treat AS diff_footprint_protection_score_treat, diff_footprint.tc_ctrl AS diff_footprint_tc_ctrl, diff_footprint.tc_treat AS diff_footprint_tc_treat, diff_footprint.tf_activity AS diff_footprint_tf_activity, diff_footprint.z_score AS diff_footprint_z_score, diff_footprint.p_value AS diff_footprint_p_value 
FROM diff_footprint 
WHERE diff_footprint.id = %(id_1)s ORDER BY diff_footprint.z_score DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-11-16 19:12:26 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2023-12-11 09:06:06 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2023-12-11 09:06:07 +0800] [2636644] [WARNING] Invalid HTTP request received.
[2024-01-04 22:05:33 +0800] [2636642] [WARNING] Invalid HTTP request received.
[2024-01-05 20:43:13 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2024-01-05 20:43:13 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2024-01-13 09:23:30 +0800] [2636643] [WARNING] Invalid HTTP request received.
[2024-01-13 09:23:31 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2024-01-16 21:05:58 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2024-01-17 13:16:57 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2024-02-20 18:19:25 +0800] [2636645] [WARNING] Invalid HTTP request received.
[2024-03-05 21:34:25 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-05 21:34:26 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-05 21:34:26 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-05 21:34:26 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-05 21:58:45 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:58:45 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:58:56 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:58:57 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:59:02 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:59:03 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:59:12 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:59:13 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:59:17 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:59:19 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:59:19 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 21 validation errors for DiffPeaksDataRange
response -> start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> width_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> conc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> fold_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> FDR_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_start_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_end_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> gene_len_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> distance_to_tss_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-05 21:59:19 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 255, in app
    content = await serialize_response(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 141, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 11 validation errors for DiffFootprintDataRange
response -> num_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> num_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> protection_score_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_ctrl_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tc_treat_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> tf_activity_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_min
  none is not an allowed value (type=type_error.none.not_allowed)
response -> z_score_max
  none is not an allowed value (type=type_error.none.not_allowed)
response -> p_value_max
  none is not an allowed value (type=type_error.none.not_allowed)
[2024-03-06 12:50:18 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-06 23:38:54 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-06 23:44:47 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-06 23:45:24 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-09 16:31:33 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-09 16:31:33 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-09 16:45:34 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-09 16:45:48 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 116, in get_ctrl_peak_data_range
    data = crud.get_ctrl_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 417, in get_ctrl_peaks_numerical_range
    start_min = db.query(func.min(ctrl_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT min(ctrl_peaks.start) AS min_1 
FROM ctrl_peaks 
WHERE ctrl_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-10 17:02:46 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 163, in download_overall_data
    data, records_sum = crud.get_overall_data(db, None, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-10 17:03:14 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/wshao/ATAC_db/code/main.py", line 163, in download_overall_data
    data, records_sum = crud.get_overall_data(db, None, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 9223372036854775807}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-10 17:03:19 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-10 17:03:27 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 89, in get_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 2, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-13 14:02:38 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-13 14:02:38 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-13 14:02:38 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-13 14:02:39 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 122, in get_treat_peak_data
    data, records_sum = crud.get_treat_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 536, in get_treat_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT treat_peaks.id AS treat_peaks_id, treat_peaks.peak_id AS treat_peaks_peak_id, treat_peaks.chr AS treat_peaks_chr, treat_peaks.start AS treat_peaks_start, treat_peaks.end AS treat_peaks_end, treat_peaks.width AS treat_peaks_width, treat_peaks.score AS treat_peaks_score, treat_peaks.signal_value AS treat_peaks_signal_value, treat_peaks.log_p_value AS treat_peaks_log_p_value, treat_peaks.log_q_value AS treat_peaks_log_q_value, treat_peaks.peak_offset AS treat_peaks_peak_offset, treat_peaks.annotation AS treat_peaks_annotation, treat_peaks.gene_chr AS treat_peaks_gene_chr, treat_peaks.gene_start AS treat_peaks_gene_start, treat_peaks.gene_end AS treat_peaks_gene_end, treat_peaks.gene_len AS treat_peaks_gene_len, treat_peaks.gene_strand AS treat_peaks_gene_strand, treat_peaks.gene_id AS treat_peaks_gene_id, treat_peaks.transcript_id AS treat_peaks_transcript_id, treat_peaks.distance_to_tss AS treat_peaks_distance_to_tss 
FROM treat_peaks 
WHERE treat_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-17 14:13:16 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-17 14:13:16 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-17 14:13:16 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-17 14:13:17 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_peak_data_range
    data = crud.get_diff_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 172, in get_diff_peaks_numerical_range
    start_min = db.query(func.min(diff_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT min(diff_peaks.start) AS min_1 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-18 12:29:14 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-18 12:29:15 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 109, in get_ctrl_peak_data
    data, records_sum = crud.get_ctrl_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 409, in get_ctrl_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT ctrl_peaks.id AS ctrl_peaks_id, ctrl_peaks.peak_id AS ctrl_peaks_peak_id, ctrl_peaks.chr AS ctrl_peaks_chr, ctrl_peaks.start AS ctrl_peaks_start, ctrl_peaks.end AS ctrl_peaks_end, ctrl_peaks.width AS ctrl_peaks_width, ctrl_peaks.score AS ctrl_peaks_score, ctrl_peaks.signal_value AS ctrl_peaks_signal_value, ctrl_peaks.log_p_value AS ctrl_peaks_log_p_value, ctrl_peaks.log_q_value AS ctrl_peaks_log_q_value, ctrl_peaks.peak_offset AS ctrl_peaks_peak_offset, ctrl_peaks.annotation AS ctrl_peaks_annotation, ctrl_peaks.gene_chr AS ctrl_peaks_gene_chr, ctrl_peaks.gene_start AS ctrl_peaks_gene_start, ctrl_peaks.gene_end AS ctrl_peaks_gene_end, ctrl_peaks.gene_len AS ctrl_peaks_gene_len, ctrl_peaks.gene_strand AS ctrl_peaks_gene_strand, ctrl_peaks.gene_id AS ctrl_peaks_gene_id, ctrl_peaks.transcript_id AS ctrl_peaks_transcript_id, ctrl_peaks.distance_to_tss AS ctrl_peaks_distance_to_tss 
FROM ctrl_peaks 
WHERE ctrl_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-18 12:29:15 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 122, in get_treat_peak_data
    data, records_sum = crud.get_treat_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 536, in get_treat_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT treat_peaks.id AS treat_peaks_id, treat_peaks.peak_id AS treat_peaks_peak_id, treat_peaks.chr AS treat_peaks_chr, treat_peaks.start AS treat_peaks_start, treat_peaks.end AS treat_peaks_end, treat_peaks.width AS treat_peaks_width, treat_peaks.score AS treat_peaks_score, treat_peaks.signal_value AS treat_peaks_signal_value, treat_peaks.log_p_value AS treat_peaks_log_p_value, treat_peaks.log_q_value AS treat_peaks_log_q_value, treat_peaks.peak_offset AS treat_peaks_peak_offset, treat_peaks.annotation AS treat_peaks_annotation, treat_peaks.gene_chr AS treat_peaks_gene_chr, treat_peaks.gene_start AS treat_peaks_gene_start, treat_peaks.gene_end AS treat_peaks_gene_end, treat_peaks.gene_len AS treat_peaks_gene_len, treat_peaks.gene_strand AS treat_peaks_gene_strand, treat_peaks.gene_id AS treat_peaks_gene_id, treat_peaks.transcript_id AS treat_peaks_transcript_id, treat_peaks.distance_to_tss AS treat_peaks_distance_to_tss 
FROM treat_peaks 
WHERE treat_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-18 12:29:16 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 116, in get_ctrl_peak_data_range
    data = crud.get_ctrl_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 417, in get_ctrl_peaks_numerical_range
    start_min = db.query(func.min(ctrl_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT min(ctrl_peaks.start) AS min_1 
FROM ctrl_peaks 
WHERE ctrl_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-19 13:28:06 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-19 13:38:18 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_peak_data_range
    data = crud.get_diff_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 172, in get_diff_peaks_numerical_range
    start_min = db.query(func.min(diff_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT min(diff_peaks.start) AS min_1 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-19 13:38:18 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-19 13:38:18 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-20 14:18:01 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-20 14:18:01 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 143, in get_method_enum
    data = crud.get_method_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 82, in get_method_enum
    enum_data = db.query(distinct(overall_data.method)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.method 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-20 14:18:01 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-20 14:20:12 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-21 09:20:16 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-21 09:20:16 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-21 09:20:16 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 75, in get_diff_GO_enrichment_data
    data, records_sum = crud.get_diff_go_enrich(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 229, in get_diff_go_enrich
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_go_enrich.id AS diff_go_enrich_id, diff_go_enrich.`GO_id` AS `diff_go_enrich_GO_id`, diff_go_enrich.description AS diff_go_enrich_description, diff_go_enrich.gene_ratio AS diff_go_enrich_gene_ratio, diff_go_enrich.bg_ratio AS diff_go_enrich_bg_ratio, diff_go_enrich.p_value AS diff_go_enrich_p_value, diff_go_enrich.p_adjust AS diff_go_enrich_p_adjust, diff_go_enrich.q_value AS diff_go_enrich_q_value, diff_go_enrich.gene_ids AS diff_go_enrich_gene_ids, diff_go_enrich.count AS diff_go_enrich_count 
FROM diff_go_enrich 
WHERE diff_go_enrich.id = %(id_1)s ORDER BY diff_go_enrich.count DESC 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 5}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-21 09:20:16 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 116, in get_ctrl_peak_data_range
    data = crud.get_ctrl_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 417, in get_ctrl_peaks_numerical_range
    start_min = db.query(func.min(ctrl_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT min(ctrl_peaks.start) AS min_1 
FROM ctrl_peaks 
WHERE ctrl_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-21 21:47:33 +0800] [2636643] [WARNING] Invalid HTTP request received.
[2024-03-22 10:23:10 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 49, in get_single_data
    data = crud.get_single_data(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 88, in get_single_data
    query_data = db.query(overall_data).filter(overall_data.id == id).first()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
WHERE overall_data.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-22 10:23:10 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_peak_data_range
    data = crud.get_diff_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 172, in get_diff_peaks_numerical_range
    start_min = db.query(func.min(diff_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT min(diff_peaks.start) AS min_1 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-22 10:23:11 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-03-22 10:23:11 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-06-01 00:02:23 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-07-12 14:56:47 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 89, in get_diff_motif_data
    data, records_sum = crud.get_diff_motif(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 256, in get_diff_motif
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_motif.id AS diff_motif_id, diff_motif.`rank` AS diff_motif_rank, diff_motif.motif AS diff_motif_motif, diff_motif.name AS diff_motif_name, diff_motif.consensus AS diff_motif_consensus, diff_motif.p_value AS diff_motif_p_value, diff_motif.log_p_value AS diff_motif_log_p_value, diff_motif.q_value AS diff_motif_q_value, diff_motif.target_sequences AS diff_motif_target_sequences, diff_motif.target_sequences_percent AS diff_motif_target_sequences_percent, diff_motif.bg_sequences AS diff_motif_bg_sequences, diff_motif.bg_sequences_percent AS diff_motif_bg_sequences_percent 
FROM diff_motif 
WHERE diff_motif.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-07-12 14:56:47 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 116, in get_ctrl_peak_data_range
    data = crud.get_ctrl_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 417, in get_ctrl_peaks_numerical_range
    start_min = db.query(func.min(ctrl_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT min(ctrl_peaks.start) AS min_1 
FROM ctrl_peaks 
WHERE ctrl_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-07-12 14:56:47 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
ConnectionResetError: [Errno 104] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 62, in get_diff_peak_data
    data, records_sum = crud.get_diff_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 164, in get_diff_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (ConnectionResetError(104, 'Connection reset by peer'))")
[SQL: SELECT diff_peaks.id AS diff_peaks_id, diff_peaks.peak_id AS diff_peaks_peak_id, diff_peaks.chr AS diff_peaks_chr, diff_peaks.start AS diff_peaks_start, diff_peaks.end AS diff_peaks_end, diff_peaks.width AS diff_peaks_width, diff_peaks.conc AS diff_peaks_conc, diff_peaks.conc_ctrl AS diff_peaks_conc_ctrl, diff_peaks.conc_treat AS diff_peaks_conc_treat, diff_peaks.fold AS diff_peaks_fold, diff_peaks.p_value AS diff_peaks_p_value, diff_peaks.`FDR` AS `diff_peaks_FDR`, diff_peaks.annotation AS diff_peaks_annotation, diff_peaks.gene_chr AS diff_peaks_gene_chr, diff_peaks.gene_start AS diff_peaks_gene_start, diff_peaks.gene_end AS diff_peaks_gene_end, diff_peaks.gene_len AS diff_peaks_gene_len, diff_peaks.gene_strand AS diff_peaks_gene_strand, diff_peaks.gene_id AS diff_peaks_gene_id, diff_peaks.transcript_id AS diff_peaks_transcript_id, diff_peaks.distance_to_tss AS diff_peaks_distance_to_tss 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-09-27 23:08:30 +0800] [2636642] [WARNING] Invalid HTTP request received.
[2024-10-31 16:55:20 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-10-31 16:55:20 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 135, in get_datasource_enum
    data = crud.get_datasource_enum(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 76, in get_datasource_enum
    enum_data = db.query(distinct(overall_data.datasource)).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT DISTINCT overall_data.datasource 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-10-31 16:55:20 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_peak_data_range
    data = crud.get_diff_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 172, in get_diff_peaks_numerical_range
    start_min = db.query(func.min(diff_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT min(diff_peaks.start) AS min_1 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-10-31 16:55:21 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 122, in get_treat_peak_data
    data, records_sum = crud.get_treat_peaks(db, req)
  File "/data/wshao/ATAC_db/code/crud.py", line 536, in get_treat_peaks
    .offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT treat_peaks.id AS treat_peaks_id, treat_peaks.peak_id AS treat_peaks_peak_id, treat_peaks.chr AS treat_peaks_chr, treat_peaks.start AS treat_peaks_start, treat_peaks.end AS treat_peaks_end, treat_peaks.width AS treat_peaks_width, treat_peaks.score AS treat_peaks_score, treat_peaks.signal_value AS treat_peaks_signal_value, treat_peaks.log_p_value AS treat_peaks_log_p_value, treat_peaks.log_q_value AS treat_peaks_log_q_value, treat_peaks.peak_offset AS treat_peaks_peak_offset, treat_peaks.annotation AS treat_peaks_annotation, treat_peaks.gene_chr AS treat_peaks_gene_chr, treat_peaks.gene_start AS treat_peaks_gene_start, treat_peaks.gene_end AS treat_peaks_gene_end, treat_peaks.gene_len AS treat_peaks_gene_len, treat_peaks.gene_strand AS treat_peaks_gene_strand, treat_peaks.gene_id AS treat_peaks_gene_id, treat_peaks.transcript_id AS treat_peaks_transcript_id, treat_peaks.distance_to_tss AS treat_peaks_distance_to_tss 
FROM treat_peaks 
WHERE treat_peaks.id = %(id_1)s 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'id_1': 1, 'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-11-03 20:55:09 +0800] [2636645] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-11-03 20:55:28 +0800] [2636643] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 151, in get_statistics_info
    data = crud.get_statistics_info(db)
  File "/data/wshao/ATAC_db/code/crud.py", line 601, in get_statistics_info
    perturb_datasets_num = db.query(func.count(overall_data.id)).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT count(overall_data.id) AS count_1 
FROM overall_data]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-11-03 20:55:58 +0800] [2636644] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 69, in get_diff_peak_data_range
    data = crud.get_diff_peaks_numerical_range(db, id)
  File "/data/wshao/ATAC_db/code/crud.py", line 172, in get_diff_peaks_numerical_range
    start_min = db.query(func.min(diff_peaks.start)).filter(*filters).scalar()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2820, in scalar
    ret = self.one()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2793, in one
    return self._iter().one()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT min(diff_peaks.start) AS min_1 
FROM diff_peaks 
WHERE diff_peaks.id = %(id_1)s]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2024-11-03 20:55:58 +0800] [2636642] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 760, in _write_bytes
    self._sock.sendall(data)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
pymysql.err.OperationalError: (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 237, in app
    raw_response = await run_endpoint_function(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/fastapi/routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/data/wshao/ATAC_db/code/main.py", line 38, in get_overall_data
    data, records_sum = crud.get_overall_data(db, filter, paging)
  File "/data/wshao/ATAC_db/code/crud.py", line 68, in get_overall_data
    query_data = db.query(overall_data).filter(*filters).offset(paging_start).limit(paging_len).all()
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2688, in all
    return self._iter().all()  # type: ignore
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2231, in execute
    return self._execute_internal(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2126, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 292, in orm_execute_statement
    result = conn.execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
    return meth(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1841, in _execute_context
    return self._exec_single_context(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
    cursor.execute(statement, parameters)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 158, in execute
    result = self._query(query)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/cursors.py", line 325, in _query
    conn.query(q)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 548, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 818, in _execute_command
    self._write_bytes(packet)
  File "/root/anaconda3/envs/fastapi/lib/python3.10/site-packages/pymysql/connections.py", line 763, in _write_bytes
    raise err.OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT overall_data.id AS overall_data_id, overall_data.pb_gene AS overall_data_pb_gene, overall_data.pb_ensembl AS overall_data_pb_ensembl, overall_data.n_sample AS overall_data_n_sample, overall_data.celline AS overall_data_celline, overall_data.method AS overall_data_method, overall_data.conditions AS overall_data_conditions, overall_data.accession AS overall_data_accession, overall_data.datasource AS overall_data_datasource 
FROM overall_data 
 LIMIT %(param_1)s, %(param_2)s]
[parameters: {'param_1': 0, 'param_2': 10}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
